{"version":3,"sources":["bootstrap3-wysihtml5.all.js"],"names":["Object","defineProperty","getOwnPropertyDescriptor","Element","prototype","get","innerText","call","set","s","Array","isArray","arg","toString","wysihtml5","version","commands","dom","quirks","toolbar","lang","selection","views","INVISIBLE_SPACE","EMPTY_FUNCTION","ELEMENT_NODE","TEXT_NODE","BACKSPACE_KEY","ENTER_KEY","ESCAPE_KEY","SPACE_KEY","DELETE_KEY","factory","global","define","amd","rangy","isHostMethod","o","p","t","isHostObject","isHostProperty","createMultiplePropertyTest","testFunc","props","i","length","isTextRange","range","areHostMethods","textRangeMethods","areHostProperties","textRangeProperties","getBody","doc","body","getElementsByTagName","consoleLog","msg","window","console","log","alertOrLog","shouldAlert","alert","fail","reason","api","initialized","supported","config","alertOnFail","getErrorDesc","ex","message","description","init","implementsDomRange","implementsTextRange","testRange","document","createRange","domRangeMethods","domRangeProperties","nodeName","toLowerCase","createTextRange","features","module","errorMessage","moduleName","modules","Module","len","initListeners","name","dependencies","initializer","createModule","isCore","initFunc","newModule","RangePrototype","areHostObjects","util","alertOnWarn","preferTextRange","autoInitialize","rangyAutoInitialize","warn","hasOwnProperty","extend","obj","deep","el","createElement","appendChild","slice","toArray","childNodes","nodeType","arrayLike","e","arr","addListener","eventType","listener","addEventListener","attachEvent","addInitListener","push","shimListeners","addShimListener","shim","createMissingNativeApi","win","requiredModuleNames","requiredModule","Error","deprecationNotice","deprecated","replacement","createError","arguments","createCoreModule","rangePrototype","selectionPrototype","docReady","loadHandler","getNodeIndex","node","previousSibling","getCommonAncestor","node1","node2","ancestors","n","parentNode","arrayContains","isAncestorOf","ancestor","descendant","selfIsAncestor","getClosestAncestorIn","isCharacterDataNode","insertAfter","precedingNode","nextNode","nextSibling","parent","insertBefore","getDocument","ownerDocument","getWindow","defaultView","parentWindow","getIframeDocument","iframeEl","contentDocument","contentWindow","isWindow","isBrokenNode","inspectNode","crashyTextNodes","data","idAttr","id","innerHTML","NodeIterator","root","_next","DomPosition","offset","DOMException","codeName","code","textNode","createTextNode","val","firstChild","getComputedStyleProperty","getComputedStyle","documentElement","currentStyle","propName","_current","hasNext","next","child","detach","equals","pos","inspect","INDEX_SIZE_ERR","HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INVALID_STATE_ERR","INVALID_NODE_TYPE_ERR","isHtmlNamespace","ns","namespaceURI","parentElement","getNodeLength","isOrIsAncestorOf","isTextOrCommentNode","splitDataNode","index","positionsToPreserve","newNode","cloneNode","deleteData","position","getIframeWindow","getContentDocument","methodName","tagName","getRootContainer","comparePoints","nodeA","offsetA","nodeB","offsetB","nodeC","childA","childB","fragmentFromNodeChildren","fragment","createDocumentFragment","createIterator","isNonTextPartiallySelected","startContainer","endContainer","getRangeDocument","getBoundaryBeforeNode","getBoundaryAfterNode","insertNodeAtPosition","firstNodeInserted","rangesIntersect","rangeA","rangeB","touchingIsIntersecting","assertRangeValid","startComparison","startOffset","endOffset","endComparison","cloneSubtree","iterator","frag","partiallySelected","subIterator","isPartiallySelectedSubtree","getSubtreeIterator","iterateSubtree","rangeIterator","func","iteratorState","it","stop","subRangeIterator","deleteSubtree","remove","extractSubtree","getNodesInRange","nodeTypes","filter","filterNodeTypes","regex","RegExp","join","nodes","RangeIterator","test","sc","ec","getName","clonePartiallySelectedTextNodes","collapsed","so","eo","commonAncestorContainer","isSingleCharacterDataNode","_first","_last","createAncestorFinder","assertNoDocTypeNotationEntityAncestor","allowSelf","getDocTypeNotationEntityAncestor","assertValidNodeType","invalidTypes","assertValidOffset","assertSameDocumentOrFragment","getDocumentOrFragmentContainer","assertNodeNotReadOnly","getReadonlyAncestor","assertNode","isOrphan","rootContainerNodeTypes","isValidOffset","isRangeValid","splitRangeBoundaries","startEndSame","setStartAndEnd","rangeToHtml","container","cloneContents","copyComparisonConstantsToObject","START_TO_START","START_TO_END","END_TO_END","END_TO_START","NODE_BEFORE","NODE_AFTER","NODE_BEFORE_AND_AFTER","NODE_INSIDE","copyComparisonConstants","constructor","createRangeContentRemover","remover","boundaryUpdater","boundary","reset","returnValue","createPrototypeRange","createBeforeAfterNodeSetter","isBefore","isStart","beforeAfterNodeTypes","setRangeStart","setRangeEnd","F","setStart","setEnd","args","setBoundary","setStartBefore","setStartAfter","setEndBefore","setEndAfter","collapse","selectNodeContents","selectNode","start","end","extractContents","deleteContents","canSurroundContents","boundariesInvalid","splitBoundaries","splitBoundariesPreservingPositions","normalizeBoundaries","mergeForward","sibling","appendData","removeChild","mergeBackward","nodeLength","insertData","nodeIndex","normalizeStart","endNode","startNode","collapseToPoint","updateCollapsedAndCommonAncestor","updateBoundaries","Range","current","subRange","cloneRange","insertableNodeTypes","surroundNodeTypes","styleEl","htmlParsingConforms","createContextualFragment","fragmentStr","rangeProperties","s2s","n_i","compareBoundaryPoints","how","prefixA","prefixB","insertNode","clone","surroundContents","content","hasChildNodes","lastChild","prop","textParts","compareNode","comparePoint","toHtml","intersectsNode","isPointInRange","intersectsRange","intersectsOrTouchesRange","intersection","intersectionRange","union","unionRange","containsNode","allowPartial","containsNodeContents","containsRange","containsNodeText","nodeRange","textNodes","getNodes","lastTextNode","pop","collapseBefore","collapseAfter","getBookmark","containerNode","preSelectionRange","moveToBookmark","bookmark","charIndex","nodeStack","foundStart","nextCharIndex","rangesEqual","isValid","r1","r2","DomRange","WrappedRange","WrappedTextRange","updateRangeProperties","nativeRange","rangeProto","startMoved","endMoved","nativeRangeDifferent","refresh","testTextNode","oppositeName","range2","type","createNativeRange","getTextRangeContainerElement","textRange","parentEl","duplicate","startEl","endEl","startEndContainer","textRangeIsCollapsed","compareEndPoints","getTextRangeBoundaryPosition","wholeRangeContainerElement","isCollapsed","startInfo","Math","floor","workingRange","containerElement","canHaveHTML","boundaryPosition","nodeInfo","workingNode","workingComparisonType","childNodeCount","comparison","previousNode","boundaryNode","moveToElementText","setEndPoint","tempRange","rangeLength","text","replace","moveStart","createBoundaryTextRange","boundaryOffset","nodeIsDataNode","boundaryParent","rangeContainerElement","startBoundary","rangeToTextRange","startRange","endRange","toTextRange","globalObj","createRangyRange","createIframeRange","createIframeRangyRange","isDirectionBackward","dir","WrappedSelection","getDocSelection","winParam","winSelectionIsBackward","sel","backward","anchorNode","anchorOffset","focusNode","focusOffset","updateAnchorAndFocusFromRange","anchorPrefix","focusPrefix","updateAnchorAndFocusFromNativeSelection","nativeSel","nativeSelection","updateEmptySelection","rangeCount","_ranges","getNativeRange","rangeContainsSingleElement","rangeNodes","getSingleElementFromRange","updateFromTextRange","wrappedRange","updateControlSelection","docSelection","controlRange","item","addRangeToControlSelection","rangeElement","newControlRange","createControlRange","add","select","deleteProperties","detached","actOnCachedSelection","action","cachedRangySelections","cached","splice","createControlSelection","ranges","assertNodeInSameDocument","createStartOrEndSetter","getRangeAt","setSingleRange","isBackward","rangeInspects","anchor","focus","checkSelectionRanges","NUMBER","CONTROL","implementsWinGetSelection","implementsDocSelection","getNativeSelection","selectionIsCollapsed","useDocumentSelection","isSelectionValid","getSelection","testSelection","selectionHasAnchorAndFocus","selectionHasExtend","selectionHasRangeCount","selectionSupportsMultipleRanges","collapsedNonEditableSelectionsSupported","addRangeBackwardToNative","addRange","originalSelectionRangeCount","selectionHasMultipleRanges","originalSelectionRanges","originalSelectionBackward","testEl","contentEditable","removeAllRanges","chromeMatch","navigator","appVersion","match","parseInt","implementsControlRange","testControlRange","getSelectionRangeAt","docSel","getIframeSelection","selProto","addRangeBackward","direction","previousRangeCount","selectionIsBackward","setRanges","empty","refreshSelection","checkForChanges","oldRanges","oldAnchorNode","oldAnchorOffset","removeRangeManually","getAllRanges","removeRange","removed","isBackwards","rangeTexts","collapseToStart","collapseToEnd","selectAllChildren","deleteFromDocument","element","eachRange","callMethodOnEachRange","params","results","apply","changeEachRange","rangeBookmarks","selRanges","rangeBookmark","rangeHtmls","getNativeTextRange","detachAll","Selection","gEBI","getElementById","insertRangeBoundaryMarker","atStart","markerId","Date","random","boundaryRange","markerEl","style","lineHeight","display","className","setRangeBoundary","compareRanges","saveRange","startMarkerId","endMarkerId","restoreRange","rangeInfo","normalize","saveRanges","rangeInfos","sort","restoreRanges","removeMarkerElement","saveSelection","restored","restoreSelection","savedSelection","preserveDirection","removeMarkers","Base","_instance","_static","_prototyping","proto","base","klass","_constructing","forEach","implement","valueOf","source","value","method","previous","toSource","hidden","key","object","block","context","browser","iosVersion","userAgent","androidVersion","isIE","equation","rv","re","appName","exec","parseFloat","$1","testElement","isGecko","indexOf","isWebKit","isChrome","isOpera","USER_AGENT","hasContentEditableSupport","hasEditingApiSupport","execCommand","queryCommandSupported","queryCommandState","hasQuerySelectorSupport","querySelector","querySelectorAll","isIncompatibleMobileBrowser","isIos","isAndroid","isTouchDevice","supportsEvent","supportsSandboxedIframes","throwsMixedContentWarningWhenIframeSrcIsEmpty","displaysCaretInEmptyContentEditableCorrectly","hasCurrentStyleProperty","hasHistoryIssue","platform","substr","insertsLineBreaksOnReturn","supportsPlaceholderAttributeOn","eventName","setAttribute","supportsEventsInIframeCorrectly","supportsHTML5Tags","supportsCommand","buggyCommands","command","isBuggy","e1","queryCommandEnabled","e2","doesAutoLinkingInContentEditable","canDisableAutoLinking","clearsContentEditableCorrectly","supportsGetAttributeCorrectly","td","getAttribute","canSelectImagesInContentEditable","autoScrollsToCaret","autoClosesUnclosedTags","clonedTestElement","supportsNativeGetElementsByClassName","getElementsByClassName","supportsSelectionModify","needsSpaceAfterLineBreak","supportsSpeechApiOn","input","chromeVersion","crashesWhenDefineProperty","property","doesAsyncFocus","hasProblemsSettingCaretAfterImg","hasUndoInContextMenu","hasInsertNodeIssue","hasIframeFocusIssue","createsNestedInvalidMarkupAfterPaste","supportsMutationEvents","supportsModenPaste","array","contains","needle","without","arrayToSubstract","newArr","newArray","map","callback","thisArg","A","unique","vals","max","idx","Dispatcher","on","handler","events","off","handlers","newHandlers","fire","payload","observe","stopObserving","merge","otherObj","newObj","isPlainObject","isFunction","WHITE_SPACE_START","WHITE_SPACE_END","ENTITY_REG_EXP","ENTITY_MAP","string","str","trim","interpolate","vars","by","search","split","escapeHTML","linebreaks","convertSpaces","html","c","_convertUrlsToLinks","URL_REG_EXP","url","punctuation","TRAILING_CHAR_REG_EXP","opening","BRACKETS","realUrl","displayUrl","_getTempElement","tempElement","_wysihtml5_tempElement","_wrapMatchesInNode","nodeValue","_hasParentThatShouldBeIgnored","ignoreInClasses","IGNORE_URLS_IN","_parseNode","childNodesLength","autoLink","addClass","classList","hasClass","removeClass","elementClassName","compareDocumentPosition","convertToList","_createListItem","list","listItem","_createList","listType","uneditableClass","lineBreaks","lineBreaksLength","childNode","lineBreak","isBlockElement","isLineBreak","currentListItem","getStyle","from","insert","after","replaceChild","copyAttributes","attributesToCopy","elementToCopyFrom","to","elementToCopyTo","attribute","andTo","callee","BOX_SIZING_PROPERTIES","shouldIgnoreBoxSizingBorderBox","hasBoxSizingBorderBox","offsetWidth","copyStyles","stylesToCopy","cssText","setStyles","delegate","selector","event","target","domNode","defaultNodeTypes","_isBlankText","prev","options","prevNode","types","ignoreBlankTexts","getAsDom","_innerHTMLShiv","_ensureHTML5Compatibility","_wysihtml5_supportsHTML5Tags","HTML5_ELEMENTS","getParentElement","_isSameNodeName","desiredNodeNames","_isElement","_hasClassName","classRegExp","classNames","_hasStyle","cssStyle","styleRegExp","styles","matchingSet","levels","findByStyle","findByClass","camelize","REG_EXP_CAMELIZE","charAt","toUpperCase","stylePropertyMapping","camelizedProperty","styleValue","needsOverflowReset","originalOverflow","overflow","getPropertyValue","getTextNodes","ingoreEmpty","all","textContent","concat","hasElementWithTagName","_getDocumentIdentifier","_wysihtml5_identifier","DOCUMENT_IDENTIFIER","LIVE_CACHE","cacheEntry","hasElementWithClassName","elementToInsert","before","into","insertCSS","rules","styleElement","styleSheet","link","head","_isLineBreak","_isLineBreakOrBlockElement","eventNames","handlerWrapper","srcElement","preventDefault","stopPropagation","cancelBubble","removeEventListener","detachEvent","parse","elementOrHtml_current","config_current","_convert","oldNode","cleanUp","clearInternals","oldNodeType","oldChilds","oldChildsLength","NODE_TYPE_MAPPING","newChild","attributes","_applySelectorRules","selectorRules","els","elementHandlingMethods","_handleElement","tagRules","currentRules","tags","scopeName","rule","renameTag","_wysihtml5","outerHTML","unwrap","rename_tag","one_of_type","_testTypes","remove_action","remove_action_rename_to","_handleAttributes","_handleStyles","definition","type_definitions","_testType","nodeClasses","nodeStyles","classesLength","a","attr","styleProp","methods","m","typeCeckMethods","classes","WHITE_SPACE_REG_EXP","sp","attrs","v","keep_styles","styleFloat","cssFloat","_getAttributesBeginningWith","beginning","returnAttributes","_checkAttribute","attributeName","attributeValue","attributeCheckMethods","newAttributeValue","_checkAttributes","local_attributes","globalAttributes","checkAttributes","oldAttributes","getAttributes","newValue","matchingAttributes","imax","setClass","set_class","add_class","addStyle","add_style","setAttributes","set_attributes","allowedClasses","newClasses","oldClasses","currentClass","newClass","check_attributes","addClassMethods","addStyleMethods","newStyle","classes_blacklist","src","width","height","INVISIBLE_SPACE_REG_EXP","comments","createComment","defaultRules","REG_EXP","href","alt","numbers","any","align_text","mapping","left","right","center","align_img","justify","clear_br","both","size_font","has_visible_contet","visibleElements","txt","offsetHeight","elementOrHtml","isString","selectors","unjoinNbsps","txtnodes","getCorrectInnerHTML","removeEmptyTextNodes","renameElement","newNodeName","newElement","replaceWithChildNodes","_isBlockElement","_appendLineBreak","resolveList","useLineBreaks","isLastChild","shouldAppendLineBreak","paragraph","firstElementChild","windowProperties","windowProperties2","documentProperties","Sandbox","readyCallback","editableArea","_createIframe","insertInto","getIframe","_readyError","destroy","iframe","that","onload","onreadystatechange","_onLoadIframe","readyState","iframeWindow","iframeDocument","charset","characterSet","sandboxHtml","_getHtml","stylesheets","open","write","close","onerror","fileName","lineNumber","_unset","loaded","setTimeout","templateVars","setter","__defineGetter__","__defineSetter__","ContentEditableArea","getContentEditable","_bindElement","_createElement","_loadElement","contentExists","simulatePlaceholder","editor","view","placeholderText","unset","composerIsVisible","hasPlaceholderSet","clear","placeholderSet","isEmpty","setValue","setTextContent","getTextContent","HAS_GET_ATTRIBUTE_BUG","isLoadedImage","hasAttribute","specified","complete","mozMatchesSelector","queryInList","query","ret","q","unshift","removeElement","referenceNode","tag","MapCell","cell","isColspan","isRowspan","firstCol","lastCol","firstRow","lastRow","isReal","spanCollection","modified","TableModifyerByCell","table","addSpannedCellToMap","r","cspan","rspan","spanCollect","rmax","cmax","rr","cc","setCellAsModified","smax","setTableMap","tableRows","getTableRows","ridx","row","cells","cidx","getRowCells","inlineTables","inlineCells","allCells","tableCells","inlineRows","allRows","getMapIndex","r_length","c_length","r_idx","c_idx","getElementAtIndex","col","getMapElsTo","to_cell","idx_start","idx_end","temp_idx","temp_cidx","maxr","maxc","orderSelectionEnds","secondcell","createCells","nr","correctColIndexForUnreals","corrIdx","getLastNewCellOnRow","rowLimit","removeEmptyTable","splitRowToCells","colspan","cType","newCells","removeAttribute","getRealRowEl","force","injectRowAt","new_cells","n_cidx","canMerge","decreaseCellSpan","span","removeSurplusLines","allRowspan","fillMissingCells","r_max","c_max","prevcell","rectify","unmerge","thisCell","rowspan","collapseCellToNextRow","cellIdx","newRowIdx","newIdx","lastCell","removeRowCell","getRowElementsByCell","modRow","getColumnElementsByCell","removeRow","oldRow","removeColCell","removeColumn","what","addRow","where","newRow","addRowCell","cr","colSpanAttr","addColumn","addColCell","doAdd","handleCellAddWithRowspan","modCell","addRowsNr","crow","temp_r_cells","nrow","getCellsBetween","cell1","cell2","c1","addCells","removeCells","mergeCellsBetween","unmergeCell","findCell","findRowByCell","findColumnByCell","elements","thisOwner","otherOwner","point","parents","location_index","smallest_common_ancestor","this_index","other_index","getPastedHtml","clipboardData","getData","getPastedHtmlWithDiv","composer","f","selBookmark","cleanerDiv","setBookmark","cleanPastedHTML","styleToRegex","styleStr","trimmedStr","escapedStr","extendRulesWithStyleExceptions","exceptStyles","newRules","pickRuleset","ruleset","defaultSet","condition","newHtml","ensureProperClearing","clearIfNecessary","elementsWithTilde","urlToSearch","redraw","tableCellsSelection","editable","handleSelectionMousedown","removeCellSelections","moveHandler","handleMouseMove","upHandler","handleMouseUp","selectedCells","addSelections","curTable","oldEnd","deselect","bindSideclick","sideClickHandler","RGBA_REGEX","RGB_REGEX","HEX6_REGEX","HEX3_REGEX","param_REGX","styleParser","parseColor","stylesStr","paramName","paramRegex","radix","colorMatch","shift","d","unparseColor","parseFontSize","_getCumulativeOffsetTop","top","offsetTop","offsetParent","getDepth","expandRangeToSurround","common","start_depth","end_depth","contain","unselectableClass","getRange","setSelection","setBefore","setAfter","avoidInvisibleSpace","isElement","displayStyle","getSelectedNode","fixSelBorders","getSelectedOwnNodes","getOwnRanges","ownNodes","maxi","findNodesInSelection","curNodes","containsUneditable","uneditables","getOwnUneditables","getPreviousNode","ignoreEmpty","getSelectionParentsByTag","curEl","getRangeToNodeEnd","sNode","lastR","caretIsLastInSelection","endc","endtxt","caretIsFirstInSelection","caretIsInTheBeginnig","ofNode","caretIsBeforeUneditable","executeAndRestoreRangy","executeAndRestore","restoreScrollPosition","oldScrollTop","scrollTop","oldScrollLeft","scrollLeft","placeholderHtml","caretPlaceholder","newCaretPlaceholder","prevSibling","newRange","insertHTML","surround","nodeOptions","deblockAndSurround","tempDivElements","tempElements","scrollIntoView","hasScrollBars","scrollHeight","_wysihtml5ScrollIntoViewElement","selectLine","_selectLine_W3C","_selectLine_MSIE","modify","rangeTop","boundingTop","scrollWidth","rangeBottom","rangeEnd","measureNode","j","moveToPoint","getText","fixRangeOverflow","containment","_detectInlineRangeProblems","previousElementSibling","_endOffsetForNode","dontFix","allUneditables","deepUneditables","tmpRanges","tmpRange","jmax","getHtml","isEndToEndInNode","nodeNames","cssClass","regExp","matchingClassNames","hasStyleAttr","removeStyle","s2","getMatchingStyleRegexp","regexes","sSplit","elStyle","isMatchingAllready","areMatchingAllready","removeOrChangeStyle","exactRegex","hasSameClasses","el1","el2","REG_EXP_WHITE_SPACE","replaceWithOwnChildren","elementsHaveSameNonClassAttributes","attr1","attr2","getNamedItem","isSplitPoint","splitNodeAt","descendantNode","descendantOffset","Merge","firstNode","isElementMerge","firstTextNode","HTMLApplier","tagNames","similarClassRegExp","similarStyleRegExp","applyToAnyTagName","doMerge","textBits","getLength","getAncestorWithClass","cssClassMatch","getAncestorWithStyle","cssStyleMatch","getMatchingAncestor","matchType","postApply","lastNode","merges","rangeStartNode","rangeEndNode","rangeStartOffset","rangeEndOffset","currentMerge","precedingTextNode","getAdjacentMergeableTextNode","nextTextNode","forward","isTextNode","adjacentNode","areElementsMergeable","createContainer","applyToTextNode","isRemovable","undoToTextNode","ancestorWithClass","ancestorWithStyle","styleMode","styleChanged","ancestorRange","applyToRange","ri","undoToRange","getTextSelectedByRange","isAppliedToRange","appliedType","selectedText","toggleRange","isApplied","parentsExactMatch","coverage","Commands","support","result","state","stateValue","bold","formatInline","execWithToggle","_format","tempClass","tempClassRegExp","anchors","hasElementChild","elementToSetCaretAfter","whiteSpace","undef","_changeLinks","oldAttrs","oa","createLink","_removeFormat","codeElement","removeLink","fontSize","size","fontSizeStyle","st","foreColor","color","foreColorStyle","colorVals","colString","colorStr","bgColorStyle","_addClass","_removeClass","_addStyle","_removeStyle","_removeLastChildIfLineBreak","_selectionWrap","surroundedNodes","_hasClasses","_hasStyles","BLOCK_ELEMENTS_GROUP","formatBlock","blockElements","defaultNodeName","selectedNodes","classRemoveAction","blockRenameFound","styleRemoveAction","blockElement","b","hasClasses","hasStyles","formatCode","classname","pre","selectedNode","_getTagNames","alias","ALIAS_MAPPING","_getApplier","identifier","htmlApplier","dontRestoreSelect","noCleanup","ownRanges","state_element","aliasTagName","insertBlockQuote","endToEndParent","qouteEl","insertImage","image","imagesInSelection","LINE_BREAK","insertLineBreak","insertOrderedList","insertList","insertUnorderedList","isNode","findListEl","other","parentLi","otherNodeName","handleSameTypeList","innerLists","otherLists","getListsInSelection","l","handleOtherTypeList","renameLists","createListFallback","tempClassName","getTime","uneditableContainerClassname","cmd","italic","justifyCenter","justifyLeft","justifyRight","justifyFull","alignRightStyle","alignLeftStyle","alignCenterStyle","redo","undoManager","underline","undo","createTable","cols","rows","tableStyle","mergeTableCells","tableSelection","addTableCells","tableSelect","deleteTableCells","selCell","indentList","listEls","tryToPushLiLevel","liNodes","found","listTag","prevLi","liNode","prevLiList","outdentList","tryToPullLiLevel","listNode","outerListNode","outerLiNode","afterList","getAfterList","newList","UNDO_HTML","REDO_HTML","UndoManager","historyStr","historyDom","transact","_observe","sandbox","lastKey","altKey","ctrlKey","metaKey","keyCode","isUndo","shiftKey","isRedo","previousHtml","currentHtml","getValue","getChildNodeIndex","undoPossible","redoPossible","historyEntry","getChildNodeByIndex","View","textareaElement","noTextarea","_observeViewChange","currentView","show","hide","disable","enable","Composer","CARET_HACK","editableElement","textarea","contentEditableMode","_initContentEditableArea","_initSandbox","_displayStyle","disabled","setToEnd","_create","_createWysiwygFormField","form","hiddenField","composerClassName","placeholder","_initAutoLinking","_initObjectResizing","_initUndoManager","_initLineBreaking","initSync","sync","supportsDisablingOfAutoLinking","supportsAutoLinking","isInUneditable","links","urlRegExp","newTextContent","properties","propertiesLength","adjust","USE_NATIVE_LINE_BREAK_INSIDE_TAGS","LIST_TAGS","HOST_TEMPLATE","TEXT_FORMATTING","BOX_FORMATTING","ADDITIONAL_CSS_RULES","focusWithoutScrolling","setActive","elementStyle","originalScrollTop","originalScrollLeft","originalStyles","WebkitUserSelect","scrollTo","originalActiveElement","hasPlaceholder","originalPlaceholder","originalDisplayValue","originalDisabled","displayValueForCopying","focusStylesHost","blurStylesHost","disabledStylesHost","blur","boxFormattingStyles","shortcuts","deleteAroundEditable","uneditable","curNode","first","handleDeleteKeyPress","beforeUneditable","handleTabKeyDown","focusBlurElement","clearInterval","domNodeRemovedInterval","setInterval","handleTables","tableClickHandle","changeevent","create","copyedFromMarking","setData","allImages","notMyImages","myImages","handleTabKey","titlePrefixes","IMG","title","hasTitle","Synchronizer","fromComposerToTextarea","shouldParseHtml","fromTextareaToComposer","textareaValue","startInterval","interval","stopInterval","Textarea","supportsPlaceholder","eventMapping","focusin","focusout","defaultConfig","showToolbarAfterInit","parserRules","br","div","pasteParserRulesets","parser","bodyClassName","supportTouchDevices","Editor","_isCompatible","_initParser","handleBeforeLoad","synchronizer","Toolbar","isCompatible","htmlOrElement","parseContext","oldHtml","_cleanAndPaste","pastedHTML","cleanHtml","Dialog","_observed","callbackWrapper","_serialize","elementToChange","formElements","_clearInterval","fields","_interpolate","avoidHiddenFields","focusedElement","field","fieldName","defaultValue","firstField","linkStyles","wrapperStyles","margin","opacity","padding","zIndex","inputStyles","cursor","marginTop","outline","inputAttributes","Speech","wrapper","CLASS_NAME_COMMAND_DISABLED","CLASS_NAME_COMMANDS_DISABLED","CLASS_NAME_COMMAND_ACTIVE","CLASS_NAME_ACTION_ACTIVE","showOnInit","_getLinks","classNameCommandDisabled","classNameCommandsDisabled","classNameCommandActive","classNameActionActive","speechInputLinks","group","dialog","_getDialog","dialogElement","caretBookmark","dialogContainer","commandLink","_execCommand","commandValue","commandsDisabled","commandObj","commandMapping","_updateLinkStates","execAction","commandLinks","actionLinks","unselectable","actionMapping","multiselect","Dialog_createTable","Dialog_foreColorStyle","firstElement","Dialog_fontSizeStyle","Handlebars","h","g","k","escapeExpression","firstLine","firstColumn","column","helpers","partials","registerHelper","inverse","fn","each","last","hash","includeZero","level","VERSION","COMPILER_REVISION","REVISION_CHANGES","HandlebarsEnvironment","logger","not","registerPartial","methodMap","DEBUG","INFO","WARN","ERROR","createFrame","program","depth","checkRevision","template","VM","invokePartial","compile","programs","programWithDepth","noop","compilerInfo","partial","Function","SafeString","Exception","Utils","depth0","program1","buffer","stack1","self","fa","locale","colours","black","silver","gray","maroon","red","purple","green","olive","navy","blue","orange","program3","emphasis","small","font_styles","normal","h1","h2","h3","h4","h5","h6","edit","smallmodals","cancel","lists","unordered","ordered","outdent","indent","jQuery","$","bsWysihtml5","templates","tpl","Wysihtml5","toolbarOpts","defaultOptions","customTemplates","createToolbar","createEditor","initializeEditor","syncBootstrapDialogEvents","loadParserRules","addMoreShortcuts","ajax","dataType","error","jqXHR","textStatus","errorThrown","success","modal","find","children","toggleClass","culture","debug","keys","localeObject","en","append","click","delegateTarget","showformat","formatname","resetDefaults","defaultOptionsCache","bypassDefaults","$this","shallowExtend","settings","deepExtend","Constructor"],"mappings":"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","sourcesContent":["// TODO: in future try to replace most inline compability checks with polyfills for code readability \n\n// element.textContent polyfill.\n// Unsupporting browsers: IE8\n\nif (Object.defineProperty && Object.getOwnPropertyDescriptor && Object.getOwnPropertyDescriptor(Element.prototype, \"textContent\") && !Object.getOwnPropertyDescriptor(Element.prototype, \"textContent\").get) {\n\t(function() {\n\t\tvar innerText = Object.getOwnPropertyDescriptor(Element.prototype, \"innerText\");\n\t\tObject.defineProperty(Element.prototype, \"textContent\",\n\t\t\t{\n\t\t\t\tget: function() {\n\t\t\t\t\treturn innerText.get.call(this);\n\t\t\t\t},\n\t\t\t\tset: function(s) {\n\t\t\t\t\treturn innerText.set.call(this, s);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t})();\n}\n\n// isArray polyfill for ie8\nif(!Array.isArray) {\n  Array.isArray = function(arg) {\n    return Object.prototype.toString.call(arg) === '[object Array]';\n  };\n};/**\n * @license wysihtml5x v0.4.15\n * https://github.com/Edicy/wysihtml5\n *\n * Author: Christopher Blum (https://github.com/tiff)\n * Secondary author of extended features: Oliver Pulges (https://github.com/pulges)\n *\n * Copyright (C) 2012 XING AG\n * Licensed under the MIT license (MIT)\n *\n */\nvar wysihtml5 = {\n  version: \"0.4.15\",\n\n  // namespaces\n  commands:   {},\n  dom:        {},\n  quirks:     {},\n  toolbar:    {},\n  lang:       {},\n  selection:  {},\n  views:      {},\n\n  INVISIBLE_SPACE: \"\\uFEFF\",\n\n  EMPTY_FUNCTION: function() {},\n\n  ELEMENT_NODE: 1,\n  TEXT_NODE:    3,\n\n  BACKSPACE_KEY:  8,\n  ENTER_KEY:      13,\n  ESCAPE_KEY:     27,\n  SPACE_KEY:      32,\n  DELETE_KEY:     46\n};\n;/**\n * Rangy, a cross-browser JavaScript range and selection library\n * http://code.google.com/p/rangy/\n *\n * Copyright 2014, Tim Down\n * Licensed under the MIT license.\n * Version: 1.3alpha.20140804\n * Build date: 4 August 2014\n */\n\n(function(factory, global) {\n    if (typeof define == \"function\" && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(factory);\n/*\n    TODO: look into this properly.\n    \n    } else if (typeof exports == \"object\") {\n        // Node/CommonJS style for Browserify\n        module.exports = factory;\n*/\n    } else {\n        // No AMD or CommonJS support so we place Rangy in a global variable\n        global.rangy = factory();\n    }\n})(function() {\n\n    var OBJECT = \"object\", FUNCTION = \"function\", UNDEFINED = \"undefined\";\n\n    // Minimal set of properties required for DOM Level 2 Range compliance. Comparison constants such as START_TO_START\n    // are omitted because ranges in KHTML do not have them but otherwise work perfectly well. See issue 113.\n    var domRangeProperties = [\"startContainer\", \"startOffset\", \"endContainer\", \"endOffset\", \"collapsed\",\n        \"commonAncestorContainer\"];\n\n    // Minimal set of methods required for DOM Level 2 Range compliance\n    var domRangeMethods = [\"setStart\", \"setStartBefore\", \"setStartAfter\", \"setEnd\", \"setEndBefore\",\n        \"setEndAfter\", \"collapse\", \"selectNode\", \"selectNodeContents\", \"compareBoundaryPoints\", \"deleteContents\",\n        \"extractContents\", \"cloneContents\", \"insertNode\", \"surroundContents\", \"cloneRange\", \"toString\", \"detach\"];\n\n    var textRangeProperties = [\"boundingHeight\", \"boundingLeft\", \"boundingTop\", \"boundingWidth\", \"htmlText\", \"text\"];\n\n    // Subset of TextRange's full set of methods that we're interested in\n    var textRangeMethods = [\"collapse\", \"compareEndPoints\", \"duplicate\", \"moveToElementText\", \"parentElement\", \"select\",\n        \"setEndPoint\", \"getBoundingClientRect\"];\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Trio of functions taken from Peter Michaux's article:\n    // http://peter.michaux.ca/articles/feature-detection-state-of-the-art-browser-scripting\n    function isHostMethod(o, p) {\n        var t = typeof o[p];\n        return t == FUNCTION || (!!(t == OBJECT && o[p])) || t == \"unknown\";\n    }\n\n    function isHostObject(o, p) {\n        return !!(typeof o[p] == OBJECT && o[p]);\n    }\n\n    function isHostProperty(o, p) {\n        return typeof o[p] != UNDEFINED;\n    }\n\n    // Creates a convenience function to save verbose repeated calls to tests functions\n    function createMultiplePropertyTest(testFunc) {\n        return function(o, props) {\n            var i = props.length;\n            while (i--) {\n                if (!testFunc(o, props[i])) {\n                    return false;\n                }\n            }\n            return true;\n        };\n    }\n\n    // Next trio of functions are a convenience to save verbose repeated calls to previous two functions\n    var areHostMethods = createMultiplePropertyTest(isHostMethod);\n    var areHostObjects = createMultiplePropertyTest(isHostObject);\n    var areHostProperties = createMultiplePropertyTest(isHostProperty);\n\n    function isTextRange(range) {\n        return range && areHostMethods(range, textRangeMethods) && areHostProperties(range, textRangeProperties);\n    }\n\n    function getBody(doc) {\n        return isHostObject(doc, \"body\") ? doc.body : doc.getElementsByTagName(\"body\")[0];\n    }\n\n    var modules = {};\n\n    var api = {\n        version: \"1.3alpha.20140804\",\n        initialized: false,\n        supported: true,\n\n        util: {\n            isHostMethod: isHostMethod,\n            isHostObject: isHostObject,\n            isHostProperty: isHostProperty,\n            areHostMethods: areHostMethods,\n            areHostObjects: areHostObjects,\n            areHostProperties: areHostProperties,\n            isTextRange: isTextRange,\n            getBody: getBody\n        },\n\n        features: {},\n\n        modules: modules,\n        config: {\n            alertOnFail: true,\n            alertOnWarn: false,\n            preferTextRange: false,\n            autoInitialize: (typeof rangyAutoInitialize == UNDEFINED) ? true : rangyAutoInitialize\n        }\n    };\n\n    function consoleLog(msg) {\n        if (isHostObject(window, \"console\") && isHostMethod(window.console, \"log\")) {\n            window.console.log(msg);\n        }\n    }\n\n    function alertOrLog(msg, shouldAlert) {\n        if (shouldAlert) {\n            window.alert(msg);\n        } else  {\n            consoleLog(msg);\n        }\n    }\n\n    function fail(reason) {\n        api.initialized = true;\n        api.supported = false;\n        alertOrLog(\"Rangy is not supported on this page in your browser. Reason: \" + reason, api.config.alertOnFail);\n    }\n\n    api.fail = fail;\n\n    function warn(msg) {\n        alertOrLog(\"Rangy warning: \" + msg, api.config.alertOnWarn);\n    }\n\n    api.warn = warn;\n\n    // Add utility extend() method\n    if ({}.hasOwnProperty) {\n        api.util.extend = function(obj, props, deep) {\n            var o, p;\n            for (var i in props) {\n                if (props.hasOwnProperty(i)) {\n                    o = obj[i];\n                    p = props[i];\n                    if (deep && o !== null && typeof o == \"object\" && p !== null && typeof p == \"object\") {\n                        api.util.extend(o, p, true);\n                    }\n                    obj[i] = p;\n                }\n            }\n            // Special case for toString, which does not show up in for...in loops in IE <= 8\n            if (props.hasOwnProperty(\"toString\")) {\n                obj.toString = props.toString;\n            }\n            return obj;\n        };\n    } else {\n        fail(\"hasOwnProperty not supported\");\n    }\n\n    // Test whether Array.prototype.slice can be relied on for NodeLists and use an alternative toArray() if not\n    (function() {\n        var el = document.createElement(\"div\");\n        el.appendChild(document.createElement(\"span\"));\n        var slice = [].slice;\n        var toArray;\n        try {\n            if (slice.call(el.childNodes, 0)[0].nodeType == 1) {\n                toArray = function(arrayLike) {\n                    return slice.call(arrayLike, 0);\n                };\n            }\n        } catch (e) {}\n\n        if (!toArray) {\n            toArray = function(arrayLike) {\n                var arr = [];\n                for (var i = 0, len = arrayLike.length; i < len; ++i) {\n                    arr[i] = arrayLike[i];\n                }\n                return arr;\n            };\n        }\n\n        api.util.toArray = toArray;\n    })();\n\n\n    // Very simple event handler wrapper function that doesn't attempt to solve issues such as \"this\" handling or\n    // normalization of event properties\n    var addListener;\n    if (isHostMethod(document, \"addEventListener\")) {\n        addListener = function(obj, eventType, listener) {\n            obj.addEventListener(eventType, listener, false);\n        };\n    } else if (isHostMethod(document, \"attachEvent\")) {\n        addListener = function(obj, eventType, listener) {\n            obj.attachEvent(\"on\" + eventType, listener);\n        };\n    } else {\n        fail(\"Document does not have required addEventListener or attachEvent method\");\n    }\n\n    api.util.addListener = addListener;\n\n    var initListeners = [];\n\n    function getErrorDesc(ex) {\n        return ex.message || ex.description || String(ex);\n    }\n\n    // Initialization\n    function init() {\n        if (api.initialized) {\n            return;\n        }\n        var testRange;\n        var implementsDomRange = false, implementsTextRange = false;\n\n        // First, perform basic feature tests\n\n        if (isHostMethod(document, \"createRange\")) {\n            testRange = document.createRange();\n            if (areHostMethods(testRange, domRangeMethods) && areHostProperties(testRange, domRangeProperties)) {\n                implementsDomRange = true;\n            }\n        }\n\n        var body = getBody(document);\n        if (!body || body.nodeName.toLowerCase() != \"body\") {\n            fail(\"No body element found\");\n            return;\n        }\n\n        if (body && isHostMethod(body, \"createTextRange\")) {\n            testRange = body.createTextRange();\n            if (isTextRange(testRange)) {\n                implementsTextRange = true;\n            }\n        }\n\n        if (!implementsDomRange && !implementsTextRange) {\n            fail(\"Neither Range nor TextRange are available\");\n            return;\n        }\n\n        api.initialized = true;\n        api.features = {\n            implementsDomRange: implementsDomRange,\n            implementsTextRange: implementsTextRange\n        };\n\n        // Initialize modules\n        var module, errorMessage;\n        for (var moduleName in modules) {\n            if ( (module = modules[moduleName]) instanceof Module ) {\n                module.init(module, api);\n            }\n        }\n\n        // Call init listeners\n        for (var i = 0, len = initListeners.length; i < len; ++i) {\n            try {\n                initListeners[i](api);\n            } catch (ex) {\n                errorMessage = \"Rangy init listener threw an exception. Continuing. Detail: \" + getErrorDesc(ex);\n                consoleLog(errorMessage);\n            }\n        }\n    }\n\n    // Allow external scripts to initialize this library in case it's loaded after the document has loaded\n    api.init = init;\n\n    // Execute listener immediately if already initialized\n    api.addInitListener = function(listener) {\n        if (api.initialized) {\n            listener(api);\n        } else {\n            initListeners.push(listener);\n        }\n    };\n\n    var shimListeners = [];\n\n    api.addShimListener = function(listener) {\n        shimListeners.push(listener);\n    };\n\n    function shim(win) {\n        win = win || window;\n        init();\n\n        // Notify listeners\n        for (var i = 0, len = shimListeners.length; i < len; ++i) {\n            shimListeners[i](win);\n        }\n    }\n\n    api.shim = api.createMissingNativeApi = shim;\n\n    function Module(name, dependencies, initializer) {\n        this.name = name;\n        this.dependencies = dependencies;\n        this.initialized = false;\n        this.supported = false;\n        this.initializer = initializer;\n    }\n\n    Module.prototype = {\n        init: function() {\n            var requiredModuleNames = this.dependencies || [];\n            for (var i = 0, len = requiredModuleNames.length, requiredModule, moduleName; i < len; ++i) {\n                moduleName = requiredModuleNames[i];\n\n                requiredModule = modules[moduleName];\n                if (!requiredModule || !(requiredModule instanceof Module)) {\n                    throw new Error(\"required module '\" + moduleName + \"' not found\");\n                }\n\n                requiredModule.init();\n\n                if (!requiredModule.supported) {\n                    throw new Error(\"required module '\" + moduleName + \"' not supported\");\n                }\n            }\n            \n            // Now run initializer\n            this.initializer(this);\n        },\n        \n        fail: function(reason) {\n            this.initialized = true;\n            this.supported = false;\n            throw new Error(\"Module '\" + this.name + \"' failed to load: \" + reason);\n        },\n\n        warn: function(msg) {\n            api.warn(\"Module \" + this.name + \": \" + msg);\n        },\n\n        deprecationNotice: function(deprecated, replacement) {\n            api.warn(\"DEPRECATED: \" + deprecated + \" in module \" + this.name + \"is deprecated. Please use \" +\n                replacement + \" instead\");\n        },\n\n        createError: function(msg) {\n            return new Error(\"Error in Rangy \" + this.name + \" module: \" + msg);\n        }\n    };\n    \n    function createModule(isCore, name, dependencies, initFunc) {\n        var newModule = new Module(name, dependencies, function(module) {\n            if (!module.initialized) {\n                module.initialized = true;\n                try {\n                    initFunc(api, module);\n                    module.supported = true;\n                } catch (ex) {\n                    var errorMessage = \"Module '\" + name + \"' failed to load: \" + getErrorDesc(ex);\n                    consoleLog(errorMessage);\n                }\n            }\n        });\n        modules[name] = newModule;\n    }\n\n    api.createModule = function(name) {\n        // Allow 2 or 3 arguments (second argument is an optional array of dependencies)\n        var initFunc, dependencies;\n        if (arguments.length == 2) {\n            initFunc = arguments[1];\n            dependencies = [];\n        } else {\n            initFunc = arguments[2];\n            dependencies = arguments[1];\n        }\n\n        var module = createModule(false, name, dependencies, initFunc);\n\n        // Initialize the module immediately if the core is already initialized\n        if (api.initialized) {\n            module.init();\n        }\n    };\n\n    api.createCoreModule = function(name, dependencies, initFunc) {\n        createModule(true, name, dependencies, initFunc);\n    };\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Ensure rangy.rangePrototype and rangy.selectionPrototype are available immediately\n\n    function RangePrototype() {}\n    api.RangePrototype = RangePrototype;\n    api.rangePrototype = new RangePrototype();\n\n    function SelectionPrototype() {}\n    api.selectionPrototype = new SelectionPrototype();\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Wait for document to load before running tests\n\n    var docReady = false;\n\n    var loadHandler = function(e) {\n        if (!docReady) {\n            docReady = true;\n            if (!api.initialized && api.config.autoInitialize) {\n                init();\n            }\n        }\n    };\n\n    // Test whether we have window and document objects that we will need\n    if (typeof window == UNDEFINED) {\n        fail(\"No window found\");\n        return;\n    }\n    if (typeof document == UNDEFINED) {\n        fail(\"No document found\");\n        return;\n    }\n\n    if (isHostMethod(document, \"addEventListener\")) {\n        document.addEventListener(\"DOMContentLoaded\", loadHandler, false);\n    }\n\n    // Add a fallback in case the DOMContentLoaded event isn't supported\n    addListener(window, \"load\", loadHandler);\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n    \n    // DOM utility methods used by Rangy\n    api.createCoreModule(\"DomUtil\", [], function(api, module) {\n        var UNDEF = \"undefined\";\n        var util = api.util;\n\n        // Perform feature tests\n        if (!util.areHostMethods(document, [\"createDocumentFragment\", \"createElement\", \"createTextNode\"])) {\n            module.fail(\"document missing a Node creation method\");\n        }\n\n        if (!util.isHostMethod(document, \"getElementsByTagName\")) {\n            module.fail(\"document missing getElementsByTagName method\");\n        }\n\n        var el = document.createElement(\"div\");\n        if (!util.areHostMethods(el, [\"insertBefore\", \"appendChild\", \"cloneNode\"] ||\n                !util.areHostObjects(el, [\"previousSibling\", \"nextSibling\", \"childNodes\", \"parentNode\"]))) {\n            module.fail(\"Incomplete Element implementation\");\n        }\n\n        // innerHTML is required for Range's createContextualFragment method\n        if (!util.isHostProperty(el, \"innerHTML\")) {\n            module.fail(\"Element is missing innerHTML property\");\n        }\n\n        var textNode = document.createTextNode(\"test\");\n        if (!util.areHostMethods(textNode, [\"splitText\", \"deleteData\", \"insertData\", \"appendData\", \"cloneNode\"] ||\n                !util.areHostObjects(el, [\"previousSibling\", \"nextSibling\", \"childNodes\", \"parentNode\"]) ||\n                !util.areHostProperties(textNode, [\"data\"]))) {\n            module.fail(\"Incomplete Text Node implementation\");\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Removed use of indexOf because of a bizarre bug in Opera that is thrown in one of the Acid3 tests. I haven't been\n        // able to replicate it outside of the test. The bug is that indexOf returns -1 when called on an Array that\n        // contains just the document as a single element and the value searched for is the document.\n        var arrayContains = /*Array.prototype.indexOf ?\n            function(arr, val) {\n                return arr.indexOf(val) > -1;\n            }:*/\n\n            function(arr, val) {\n                var i = arr.length;\n                while (i--) {\n                    if (arr[i] === val) {\n                        return true;\n                    }\n                }\n                return false;\n            };\n\n        // Opera 11 puts HTML elements in the null namespace, it seems, and IE 7 has undefined namespaceURI\n        function isHtmlNamespace(node) {\n            var ns;\n            return typeof node.namespaceURI == UNDEF || ((ns = node.namespaceURI) === null || ns == \"http://www.w3.org/1999/xhtml\");\n        }\n\n        function parentElement(node) {\n            var parent = node.parentNode;\n            return (parent.nodeType == 1) ? parent : null;\n        }\n\n        function getNodeIndex(node) {\n            var i = 0;\n            while( (node = node.previousSibling) ) {\n                ++i;\n            }\n            return i;\n        }\n\n        function getNodeLength(node) {\n            switch (node.nodeType) {\n                case 7:\n                case 10:\n                    return 0;\n                case 3:\n                case 8:\n                    return node.length;\n                default:\n                    return node.childNodes.length;\n            }\n        }\n\n        function getCommonAncestor(node1, node2) {\n            var ancestors = [], n;\n            for (n = node1; n; n = n.parentNode) {\n                ancestors.push(n);\n            }\n\n            for (n = node2; n; n = n.parentNode) {\n                if (arrayContains(ancestors, n)) {\n                    return n;\n                }\n            }\n\n            return null;\n        }\n\n        function isAncestorOf(ancestor, descendant, selfIsAncestor) {\n            var n = selfIsAncestor ? descendant : descendant.parentNode;\n            while (n) {\n                if (n === ancestor) {\n                    return true;\n                } else {\n                    n = n.parentNode;\n                }\n            }\n            return false;\n        }\n\n        function isOrIsAncestorOf(ancestor, descendant) {\n            return isAncestorOf(ancestor, descendant, true);\n        }\n\n        function getClosestAncestorIn(node, ancestor, selfIsAncestor) {\n            var p, n = selfIsAncestor ? node : node.parentNode;\n            while (n) {\n                p = n.parentNode;\n                if (p === ancestor) {\n                    return n;\n                }\n                n = p;\n            }\n            return null;\n        }\n\n        function isCharacterDataNode(node) {\n            var t = node.nodeType;\n            return t == 3 || t == 4 || t == 8 ; // Text, CDataSection or Comment\n        }\n\n        function isTextOrCommentNode(node) {\n            if (!node) {\n                return false;\n            }\n            var t = node.nodeType;\n            return t == 3 || t == 8 ; // Text or Comment\n        }\n\n        function insertAfter(node, precedingNode) {\n            var nextNode = precedingNode.nextSibling, parent = precedingNode.parentNode;\n            if (nextNode) {\n                parent.insertBefore(node, nextNode);\n            } else {\n                parent.appendChild(node);\n            }\n            return node;\n        }\n\n        // Note that we cannot use splitText() because it is bugridden in IE 9.\n        function splitDataNode(node, index, positionsToPreserve) {\n            var newNode = node.cloneNode(false);\n            newNode.deleteData(0, index);\n            node.deleteData(index, node.length - index);\n            insertAfter(newNode, node);\n\n            // Preserve positions\n            if (positionsToPreserve) {\n                for (var i = 0, position; position = positionsToPreserve[i++]; ) {\n                    // Handle case where position was inside the portion of node after the split point\n                    if (position.node == node && position.offset > index) {\n                        position.node = newNode;\n                        position.offset -= index;\n                    }\n                    // Handle the case where the position is a node offset within node's parent\n                    else if (position.node == node.parentNode && position.offset > getNodeIndex(node)) {\n                        ++position.offset;\n                    }\n                }\n            }\n            return newNode;\n        }\n\n        function getDocument(node) {\n            if (node.nodeType == 9) {\n                return node;\n            } else if (typeof node.ownerDocument != UNDEF) {\n                return node.ownerDocument;\n            } else if (typeof node.document != UNDEF) {\n                return node.document;\n            } else if (node.parentNode) {\n                return getDocument(node.parentNode);\n            } else {\n                throw module.createError(\"getDocument: no document found for node\");\n            }\n        }\n\n        function getWindow(node) {\n            var doc = getDocument(node);\n            if (typeof doc.defaultView != UNDEF) {\n                return doc.defaultView;\n            } else if (typeof doc.parentWindow != UNDEF) {\n                return doc.parentWindow;\n            } else {\n                throw module.createError(\"Cannot get a window object for node\");\n            }\n        }\n\n        function getIframeDocument(iframeEl) {\n            if (typeof iframeEl.contentDocument != UNDEF) {\n                return iframeEl.contentDocument;\n            } else if (typeof iframeEl.contentWindow != UNDEF) {\n                return iframeEl.contentWindow.document;\n            } else {\n                throw module.createError(\"getIframeDocument: No Document object found for iframe element\");\n            }\n        }\n\n        function getIframeWindow(iframeEl) {\n            if (typeof iframeEl.contentWindow != UNDEF) {\n                return iframeEl.contentWindow;\n            } else if (typeof iframeEl.contentDocument != UNDEF) {\n                return iframeEl.contentDocument.defaultView;\n            } else {\n                throw module.createError(\"getIframeWindow: No Window object found for iframe element\");\n            }\n        }\n\n        // This looks bad. Is it worth it?\n        function isWindow(obj) {\n            return obj && util.isHostMethod(obj, \"setTimeout\") && util.isHostObject(obj, \"document\");\n        }\n\n        function getContentDocument(obj, module, methodName) {\n            var doc;\n\n            if (!obj) {\n                doc = document;\n            }\n\n            // Test if a DOM node has been passed and obtain a document object for it if so\n            else if (util.isHostProperty(obj, \"nodeType\")) {\n                doc = (obj.nodeType == 1 && obj.tagName.toLowerCase() == \"iframe\") ?\n                    getIframeDocument(obj) : getDocument(obj);\n            }\n\n            // Test if the doc parameter appears to be a Window object\n            else if (isWindow(obj)) {\n                doc = obj.document;\n            }\n\n            if (!doc) {\n                throw module.createError(methodName + \"(): Parameter must be a Window object or DOM node\");\n            }\n\n            return doc;\n        }\n\n        function getRootContainer(node) {\n            var parent;\n            while ( (parent = node.parentNode) ) {\n                node = parent;\n            }\n            return node;\n        }\n\n        function comparePoints(nodeA, offsetA, nodeB, offsetB) {\n            // See http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level-2-Range-Comparing\n            var nodeC, root, childA, childB, n;\n            if (nodeA == nodeB) {\n                // Case 1: nodes are the same\n                return offsetA === offsetB ? 0 : (offsetA < offsetB) ? -1 : 1;\n            } else if ( (nodeC = getClosestAncestorIn(nodeB, nodeA, true)) ) {\n                // Case 2: node C (container B or an ancestor) is a child node of A\n                return offsetA <= getNodeIndex(nodeC) ? -1 : 1;\n            } else if ( (nodeC = getClosestAncestorIn(nodeA, nodeB, true)) ) {\n                // Case 3: node C (container A or an ancestor) is a child node of B\n                return getNodeIndex(nodeC) < offsetB  ? -1 : 1;\n            } else {\n                root = getCommonAncestor(nodeA, nodeB);\n                if (!root) {\n                    throw new Error(\"comparePoints error: nodes have no common ancestor\");\n                }\n\n                // Case 4: containers are siblings or descendants of siblings\n                childA = (nodeA === root) ? root : getClosestAncestorIn(nodeA, root, true);\n                childB = (nodeB === root) ? root : getClosestAncestorIn(nodeB, root, true);\n\n                if (childA === childB) {\n                    // This shouldn't be possible\n                    throw module.createError(\"comparePoints got to case 4 and childA and childB are the same!\");\n                } else {\n                    n = root.firstChild;\n                    while (n) {\n                        if (n === childA) {\n                            return -1;\n                        } else if (n === childB) {\n                            return 1;\n                        }\n                        n = n.nextSibling;\n                    }\n                }\n            }\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Test for IE's crash (IE 6/7) or exception (IE >= 8) when a reference to garbage-collected text node is queried\n        var crashyTextNodes = false;\n\n        function isBrokenNode(node) {\n            var n;\n            try {\n                n = node.parentNode;\n                return false;\n            } catch (e) {\n                return true;\n            }\n        }\n\n        (function() {\n            var el = document.createElement(\"b\");\n            el.innerHTML = \"1\";\n            var textNode = el.firstChild;\n            el.innerHTML = \"<br>\";\n            crashyTextNodes = isBrokenNode(textNode);\n\n            api.features.crashyTextNodes = crashyTextNodes;\n        })();\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function inspectNode(node) {\n            if (!node) {\n                return \"[No node]\";\n            }\n            if (crashyTextNodes && isBrokenNode(node)) {\n                return \"[Broken node]\";\n            }\n            if (isCharacterDataNode(node)) {\n                return '\"' + node.data + '\"';\n            }\n            if (node.nodeType == 1) {\n                var idAttr = node.id ? ' id=\"' + node.id + '\"' : \"\";\n                return \"<\" + node.nodeName + idAttr + \">[index:\" + getNodeIndex(node) + \",length:\" + node.childNodes.length + \"][\" + (node.innerHTML || \"[innerHTML not supported]\").slice(0, 25) + \"]\";\n            }\n            return node.nodeName;\n        }\n\n        function fragmentFromNodeChildren(node) {\n            var fragment = getDocument(node).createDocumentFragment(), child;\n            while ( (child = node.firstChild) ) {\n                fragment.appendChild(child);\n            }\n            return fragment;\n        }\n\n        var getComputedStyleProperty;\n        if (typeof window.getComputedStyle != UNDEF) {\n            getComputedStyleProperty = function(el, propName) {\n                return getWindow(el).getComputedStyle(el, null)[propName];\n            };\n        } else if (typeof document.documentElement.currentStyle != UNDEF) {\n            getComputedStyleProperty = function(el, propName) {\n                return el.currentStyle[propName];\n            };\n        } else {\n            module.fail(\"No means of obtaining computed style properties found\");\n        }\n\n        function NodeIterator(root) {\n            this.root = root;\n            this._next = root;\n        }\n\n        NodeIterator.prototype = {\n            _current: null,\n\n            hasNext: function() {\n                return !!this._next;\n            },\n\n            next: function() {\n                var n = this._current = this._next;\n                var child, next;\n                if (this._current) {\n                    child = n.firstChild;\n                    if (child) {\n                        this._next = child;\n                    } else {\n                        next = null;\n                        while ((n !== this.root) && !(next = n.nextSibling)) {\n                            n = n.parentNode;\n                        }\n                        this._next = next;\n                    }\n                }\n                return this._current;\n            },\n\n            detach: function() {\n                this._current = this._next = this.root = null;\n            }\n        };\n\n        function createIterator(root) {\n            return new NodeIterator(root);\n        }\n\n        function DomPosition(node, offset) {\n            this.node = node;\n            this.offset = offset;\n        }\n\n        DomPosition.prototype = {\n            equals: function(pos) {\n                return !!pos && this.node === pos.node && this.offset == pos.offset;\n            },\n\n            inspect: function() {\n                return \"[DomPosition(\" + inspectNode(this.node) + \":\" + this.offset + \")]\";\n            },\n\n            toString: function() {\n                return this.inspect();\n            }\n        };\n\n        function DOMException(codeName) {\n            this.code = this[codeName];\n            this.codeName = codeName;\n            this.message = \"DOMException: \" + this.codeName;\n        }\n\n        DOMException.prototype = {\n            INDEX_SIZE_ERR: 1,\n            HIERARCHY_REQUEST_ERR: 3,\n            WRONG_DOCUMENT_ERR: 4,\n            NO_MODIFICATION_ALLOWED_ERR: 7,\n            NOT_FOUND_ERR: 8,\n            NOT_SUPPORTED_ERR: 9,\n            INVALID_STATE_ERR: 11,\n            INVALID_NODE_TYPE_ERR: 24\n        };\n\n        DOMException.prototype.toString = function() {\n            return this.message;\n        };\n\n        api.dom = {\n            arrayContains: arrayContains,\n            isHtmlNamespace: isHtmlNamespace,\n            parentElement: parentElement,\n            getNodeIndex: getNodeIndex,\n            getNodeLength: getNodeLength,\n            getCommonAncestor: getCommonAncestor,\n            isAncestorOf: isAncestorOf,\n            isOrIsAncestorOf: isOrIsAncestorOf,\n            getClosestAncestorIn: getClosestAncestorIn,\n            isCharacterDataNode: isCharacterDataNode,\n            isTextOrCommentNode: isTextOrCommentNode,\n            insertAfter: insertAfter,\n            splitDataNode: splitDataNode,\n            getDocument: getDocument,\n            getWindow: getWindow,\n            getIframeWindow: getIframeWindow,\n            getIframeDocument: getIframeDocument,\n            getBody: util.getBody,\n            isWindow: isWindow,\n            getContentDocument: getContentDocument,\n            getRootContainer: getRootContainer,\n            comparePoints: comparePoints,\n            isBrokenNode: isBrokenNode,\n            inspectNode: inspectNode,\n            getComputedStyleProperty: getComputedStyleProperty,\n            fragmentFromNodeChildren: fragmentFromNodeChildren,\n            createIterator: createIterator,\n            DomPosition: DomPosition\n        };\n\n        api.DOMException = DOMException;\n    });\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Pure JavaScript implementation of DOM Range\n    api.createCoreModule(\"DomRange\", [\"DomUtil\"], function(api, module) {\n        var dom = api.dom;\n        var util = api.util;\n        var DomPosition = dom.DomPosition;\n        var DOMException = api.DOMException;\n\n        var isCharacterDataNode = dom.isCharacterDataNode;\n        var getNodeIndex = dom.getNodeIndex;\n        var isOrIsAncestorOf = dom.isOrIsAncestorOf;\n        var getDocument = dom.getDocument;\n        var comparePoints = dom.comparePoints;\n        var splitDataNode = dom.splitDataNode;\n        var getClosestAncestorIn = dom.getClosestAncestorIn;\n        var getNodeLength = dom.getNodeLength;\n        var arrayContains = dom.arrayContains;\n        var getRootContainer = dom.getRootContainer;\n        var crashyTextNodes = api.features.crashyTextNodes;\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Utility functions\n\n        function isNonTextPartiallySelected(node, range) {\n            return (node.nodeType != 3) &&\n                   (isOrIsAncestorOf(node, range.startContainer) || isOrIsAncestorOf(node, range.endContainer));\n        }\n\n        function getRangeDocument(range) {\n            return range.document || getDocument(range.startContainer);\n        }\n\n        function getBoundaryBeforeNode(node) {\n            return new DomPosition(node.parentNode, getNodeIndex(node));\n        }\n\n        function getBoundaryAfterNode(node) {\n            return new DomPosition(node.parentNode, getNodeIndex(node) + 1);\n        }\n\n        function insertNodeAtPosition(node, n, o) {\n            var firstNodeInserted = node.nodeType == 11 ? node.firstChild : node;\n            if (isCharacterDataNode(n)) {\n                if (o == n.length) {\n                    dom.insertAfter(node, n);\n                } else {\n                    n.parentNode.insertBefore(node, o == 0 ? n : splitDataNode(n, o));\n                }\n            } else if (o >= n.childNodes.length) {\n                n.appendChild(node);\n            } else {\n                n.insertBefore(node, n.childNodes[o]);\n            }\n            return firstNodeInserted;\n        }\n\n        function rangesIntersect(rangeA, rangeB, touchingIsIntersecting) {\n            assertRangeValid(rangeA);\n            assertRangeValid(rangeB);\n\n            if (getRangeDocument(rangeB) != getRangeDocument(rangeA)) {\n                throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n            }\n\n            var startComparison = comparePoints(rangeA.startContainer, rangeA.startOffset, rangeB.endContainer, rangeB.endOffset),\n                endComparison = comparePoints(rangeA.endContainer, rangeA.endOffset, rangeB.startContainer, rangeB.startOffset);\n\n            return touchingIsIntersecting ? startComparison <= 0 && endComparison >= 0 : startComparison < 0 && endComparison > 0;\n        }\n\n        function cloneSubtree(iterator) {\n            var partiallySelected;\n            for (var node, frag = getRangeDocument(iterator.range).createDocumentFragment(), subIterator; node = iterator.next(); ) {\n                partiallySelected = iterator.isPartiallySelectedSubtree();\n                node = node.cloneNode(!partiallySelected);\n                if (partiallySelected) {\n                    subIterator = iterator.getSubtreeIterator();\n                    node.appendChild(cloneSubtree(subIterator));\n                    subIterator.detach();\n                }\n\n                if (node.nodeType == 10) { // DocumentType\n                    throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n                }\n                frag.appendChild(node);\n            }\n            return frag;\n        }\n\n        function iterateSubtree(rangeIterator, func, iteratorState) {\n            var it, n;\n            iteratorState = iteratorState || { stop: false };\n            for (var node, subRangeIterator; node = rangeIterator.next(); ) {\n                if (rangeIterator.isPartiallySelectedSubtree()) {\n                    if (func(node) === false) {\n                        iteratorState.stop = true;\n                        return;\n                    } else {\n                        // The node is partially selected by the Range, so we can use a new RangeIterator on the portion of\n                        // the node selected by the Range.\n                        subRangeIterator = rangeIterator.getSubtreeIterator();\n                        iterateSubtree(subRangeIterator, func, iteratorState);\n                        subRangeIterator.detach();\n                        if (iteratorState.stop) {\n                            return;\n                        }\n                    }\n                } else {\n                    // The whole node is selected, so we can use efficient DOM iteration to iterate over the node and its\n                    // descendants\n                    it = dom.createIterator(node);\n                    while ( (n = it.next()) ) {\n                        if (func(n) === false) {\n                            iteratorState.stop = true;\n                            return;\n                        }\n                    }\n                }\n            }\n        }\n\n        function deleteSubtree(iterator) {\n            var subIterator;\n            while (iterator.next()) {\n                if (iterator.isPartiallySelectedSubtree()) {\n                    subIterator = iterator.getSubtreeIterator();\n                    deleteSubtree(subIterator);\n                    subIterator.detach();\n                } else {\n                    iterator.remove();\n                }\n            }\n        }\n\n        function extractSubtree(iterator) {\n            for (var node, frag = getRangeDocument(iterator.range).createDocumentFragment(), subIterator; node = iterator.next(); ) {\n\n                if (iterator.isPartiallySelectedSubtree()) {\n                    node = node.cloneNode(false);\n                    subIterator = iterator.getSubtreeIterator();\n                    node.appendChild(extractSubtree(subIterator));\n                    subIterator.detach();\n                } else {\n                    iterator.remove();\n                }\n                if (node.nodeType == 10) { // DocumentType\n                    throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n                }\n                frag.appendChild(node);\n            }\n            return frag;\n        }\n\n        function getNodesInRange(range, nodeTypes, filter) {\n            var filterNodeTypes = !!(nodeTypes && nodeTypes.length), regex;\n            var filterExists = !!filter;\n            if (filterNodeTypes) {\n                regex = new RegExp(\"^(\" + nodeTypes.join(\"|\") + \")$\");\n            }\n\n            var nodes = [];\n            iterateSubtree(new RangeIterator(range, false), function(node) {\n                if (filterNodeTypes && !regex.test(node.nodeType)) {\n                    return;\n                }\n                if (filterExists && !filter(node)) {\n                    return;\n                }\n                // Don't include a boundary container if it is a character data node and the range does not contain any\n                // of its character data. See issue 190.\n                var sc = range.startContainer;\n                if (node == sc && isCharacterDataNode(sc) && range.startOffset == sc.length) {\n                    return;\n                }\n\n                var ec = range.endContainer;\n                if (node == ec && isCharacterDataNode(ec) && range.endOffset == 0) {\n                    return;\n                }\n\n                nodes.push(node);\n            });\n            return nodes;\n        }\n\n        function inspect(range) {\n            var name = (typeof range.getName == \"undefined\") ? \"Range\" : range.getName();\n            return \"[\" + name + \"(\" + dom.inspectNode(range.startContainer) + \":\" + range.startOffset + \", \" +\n                    dom.inspectNode(range.endContainer) + \":\" + range.endOffset + \")]\";\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // RangeIterator code partially borrows from IERange by Tim Ryan (http://github.com/timcameronryan/IERange)\n\n        function RangeIterator(range, clonePartiallySelectedTextNodes) {\n            this.range = range;\n            this.clonePartiallySelectedTextNodes = clonePartiallySelectedTextNodes;\n\n\n            if (!range.collapsed) {\n                this.sc = range.startContainer;\n                this.so = range.startOffset;\n                this.ec = range.endContainer;\n                this.eo = range.endOffset;\n                var root = range.commonAncestorContainer;\n\n                if (this.sc === this.ec && isCharacterDataNode(this.sc)) {\n                    this.isSingleCharacterDataNode = true;\n                    this._first = this._last = this._next = this.sc;\n                } else {\n                    this._first = this._next = (this.sc === root && !isCharacterDataNode(this.sc)) ?\n                        this.sc.childNodes[this.so] : getClosestAncestorIn(this.sc, root, true);\n                    this._last = (this.ec === root && !isCharacterDataNode(this.ec)) ?\n                        this.ec.childNodes[this.eo - 1] : getClosestAncestorIn(this.ec, root, true);\n                }\n            }\n        }\n\n        RangeIterator.prototype = {\n            _current: null,\n            _next: null,\n            _first: null,\n            _last: null,\n            isSingleCharacterDataNode: false,\n\n            reset: function() {\n                this._current = null;\n                this._next = this._first;\n            },\n\n            hasNext: function() {\n                return !!this._next;\n            },\n\n            next: function() {\n                // Move to next node\n                var current = this._current = this._next;\n                if (current) {\n                    this._next = (current !== this._last) ? current.nextSibling : null;\n\n                    // Check for partially selected text nodes\n                    if (isCharacterDataNode(current) && this.clonePartiallySelectedTextNodes) {\n                        if (current === this.ec) {\n                            (current = current.cloneNode(true)).deleteData(this.eo, current.length - this.eo);\n                        }\n                        if (this._current === this.sc) {\n                            (current = current.cloneNode(true)).deleteData(0, this.so);\n                        }\n                    }\n                }\n\n                return current;\n            },\n\n            remove: function() {\n                var current = this._current, start, end;\n\n                if (isCharacterDataNode(current) && (current === this.sc || current === this.ec)) {\n                    start = (current === this.sc) ? this.so : 0;\n                    end = (current === this.ec) ? this.eo : current.length;\n                    if (start != end) {\n                        current.deleteData(start, end - start);\n                    }\n                } else {\n                    if (current.parentNode) {\n                        current.parentNode.removeChild(current);\n                    } else {\n                    }\n                }\n            },\n\n            // Checks if the current node is partially selected\n            isPartiallySelectedSubtree: function() {\n                var current = this._current;\n                return isNonTextPartiallySelected(current, this.range);\n            },\n\n            getSubtreeIterator: function() {\n                var subRange;\n                if (this.isSingleCharacterDataNode) {\n                    subRange = this.range.cloneRange();\n                    subRange.collapse(false);\n                } else {\n                    subRange = new Range(getRangeDocument(this.range));\n                    var current = this._current;\n                    var startContainer = current, startOffset = 0, endContainer = current, endOffset = getNodeLength(current);\n\n                    if (isOrIsAncestorOf(current, this.sc)) {\n                        startContainer = this.sc;\n                        startOffset = this.so;\n                    }\n                    if (isOrIsAncestorOf(current, this.ec)) {\n                        endContainer = this.ec;\n                        endOffset = this.eo;\n                    }\n\n                    updateBoundaries(subRange, startContainer, startOffset, endContainer, endOffset);\n                }\n                return new RangeIterator(subRange, this.clonePartiallySelectedTextNodes);\n            },\n\n            detach: function() {\n                this.range = this._current = this._next = this._first = this._last = this.sc = this.so = this.ec = this.eo = null;\n            }\n        };\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var beforeAfterNodeTypes = [1, 3, 4, 5, 7, 8, 10];\n        var rootContainerNodeTypes = [2, 9, 11];\n        var readonlyNodeTypes = [5, 6, 10, 12];\n        var insertableNodeTypes = [1, 3, 4, 5, 7, 8, 10, 11];\n        var surroundNodeTypes = [1, 3, 4, 5, 7, 8];\n\n        function createAncestorFinder(nodeTypes) {\n            return function(node, selfIsAncestor) {\n                var t, n = selfIsAncestor ? node : node.parentNode;\n                while (n) {\n                    t = n.nodeType;\n                    if (arrayContains(nodeTypes, t)) {\n                        return n;\n                    }\n                    n = n.parentNode;\n                }\n                return null;\n            };\n        }\n\n        var getDocumentOrFragmentContainer = createAncestorFinder( [9, 11] );\n        var getReadonlyAncestor = createAncestorFinder(readonlyNodeTypes);\n        var getDocTypeNotationEntityAncestor = createAncestorFinder( [6, 10, 12] );\n\n        function assertNoDocTypeNotationEntityAncestor(node, allowSelf) {\n            if (getDocTypeNotationEntityAncestor(node, allowSelf)) {\n                throw new DOMException(\"INVALID_NODE_TYPE_ERR\");\n            }\n        }\n\n        function assertValidNodeType(node, invalidTypes) {\n            if (!arrayContains(invalidTypes, node.nodeType)) {\n                throw new DOMException(\"INVALID_NODE_TYPE_ERR\");\n            }\n        }\n\n        function assertValidOffset(node, offset) {\n            if (offset < 0 || offset > (isCharacterDataNode(node) ? node.length : node.childNodes.length)) {\n                throw new DOMException(\"INDEX_SIZE_ERR\");\n            }\n        }\n\n        function assertSameDocumentOrFragment(node1, node2) {\n            if (getDocumentOrFragmentContainer(node1, true) !== getDocumentOrFragmentContainer(node2, true)) {\n                throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n            }\n        }\n\n        function assertNodeNotReadOnly(node) {\n            if (getReadonlyAncestor(node, true)) {\n                throw new DOMException(\"NO_MODIFICATION_ALLOWED_ERR\");\n            }\n        }\n\n        function assertNode(node, codeName) {\n            if (!node) {\n                throw new DOMException(codeName);\n            }\n        }\n\n        function isOrphan(node) {\n            return (crashyTextNodes && dom.isBrokenNode(node)) ||\n                !arrayContains(rootContainerNodeTypes, node.nodeType) && !getDocumentOrFragmentContainer(node, true);\n        }\n\n        function isValidOffset(node, offset) {\n            return offset <= (isCharacterDataNode(node) ? node.length : node.childNodes.length);\n        }\n\n        function isRangeValid(range) {\n            return (!!range.startContainer && !!range.endContainer &&\n                    !isOrphan(range.startContainer) &&\n                    !isOrphan(range.endContainer) &&\n                    isValidOffset(range.startContainer, range.startOffset) &&\n                    isValidOffset(range.endContainer, range.endOffset));\n        }\n\n        function assertRangeValid(range) {\n            if (!isRangeValid(range)) {\n                throw new Error(\"Range error: Range is no longer valid after DOM mutation (\" + range.inspect() + \")\");\n            }\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Test the browser's innerHTML support to decide how to implement createContextualFragment\n        var styleEl = document.createElement(\"style\");\n        var htmlParsingConforms = false;\n        try {\n            styleEl.innerHTML = \"<b>x</b>\";\n            htmlParsingConforms = (styleEl.firstChild.nodeType == 3); // Opera incorrectly creates an element node\n        } catch (e) {\n            // IE 6 and 7 throw\n        }\n\n        api.features.htmlParsingConforms = htmlParsingConforms;\n\n        var createContextualFragment = htmlParsingConforms ?\n\n            // Implementation as per HTML parsing spec, trusting in the browser's implementation of innerHTML. See\n            // discussion and base code for this implementation at issue 67.\n            // Spec: http://html5.org/specs/dom-parsing.html#extensions-to-the-range-interface\n            // Thanks to Aleks Williams.\n            function(fragmentStr) {\n                // \"Let node the context object's start's node.\"\n                var node = this.startContainer;\n                var doc = getDocument(node);\n\n                // \"If the context object's start's node is null, raise an INVALID_STATE_ERR\n                // exception and abort these steps.\"\n                if (!node) {\n                    throw new DOMException(\"INVALID_STATE_ERR\");\n                }\n\n                // \"Let element be as follows, depending on node's interface:\"\n                // Document, Document Fragment: null\n                var el = null;\n\n                // \"Element: node\"\n                if (node.nodeType == 1) {\n                    el = node;\n\n                // \"Text, Comment: node's parentElement\"\n                } else if (isCharacterDataNode(node)) {\n                    el = dom.parentElement(node);\n                }\n\n                // \"If either element is null or element's ownerDocument is an HTML document\n                // and element's local name is \"html\" and element's namespace is the HTML\n                // namespace\"\n                if (el === null || (\n                    el.nodeName == \"HTML\" &&\n                    dom.isHtmlNamespace(getDocument(el).documentElement) &&\n                    dom.isHtmlNamespace(el)\n                )) {\n\n                // \"let element be a new Element with \"body\" as its local name and the HTML\n                // namespace as its namespace.\"\"\n                    el = doc.createElement(\"body\");\n                } else {\n                    el = el.cloneNode(false);\n                }\n\n                // \"If the node's document is an HTML document: Invoke the HTML fragment parsing algorithm.\"\n                // \"If the node's document is an XML document: Invoke the XML fragment parsing algorithm.\"\n                // \"In either case, the algorithm must be invoked with fragment as the input\n                // and element as the context element.\"\n                el.innerHTML = fragmentStr;\n\n                // \"If this raises an exception, then abort these steps. Otherwise, let new\n                // children be the nodes returned.\"\n\n                // \"Let fragment be a new DocumentFragment.\"\n                // \"Append all new children to fragment.\"\n                // \"Return fragment.\"\n                return dom.fragmentFromNodeChildren(el);\n            } :\n\n            // In this case, innerHTML cannot be trusted, so fall back to a simpler, non-conformant implementation that\n            // previous versions of Rangy used (with the exception of using a body element rather than a div)\n            function(fragmentStr) {\n                var doc = getRangeDocument(this);\n                var el = doc.createElement(\"body\");\n                el.innerHTML = fragmentStr;\n\n                return dom.fragmentFromNodeChildren(el);\n            };\n\n        function splitRangeBoundaries(range, positionsToPreserve) {\n            assertRangeValid(range);\n\n            var sc = range.startContainer, so = range.startOffset, ec = range.endContainer, eo = range.endOffset;\n            var startEndSame = (sc === ec);\n\n            if (isCharacterDataNode(ec) && eo > 0 && eo < ec.length) {\n                splitDataNode(ec, eo, positionsToPreserve);\n            }\n\n            if (isCharacterDataNode(sc) && so > 0 && so < sc.length) {\n                sc = splitDataNode(sc, so, positionsToPreserve);\n                if (startEndSame) {\n                    eo -= so;\n                    ec = sc;\n                } else if (ec == sc.parentNode && eo >= getNodeIndex(sc)) {\n                    eo++;\n                }\n                so = 0;\n            }\n            range.setStartAndEnd(sc, so, ec, eo);\n        }\n        \n        function rangeToHtml(range) {\n            assertRangeValid(range);\n            var container = range.commonAncestorContainer.parentNode.cloneNode(false);\n            container.appendChild( range.cloneContents() );\n            return container.innerHTML;\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var rangeProperties = [\"startContainer\", \"startOffset\", \"endContainer\", \"endOffset\", \"collapsed\",\n            \"commonAncestorContainer\"];\n\n        var s2s = 0, s2e = 1, e2e = 2, e2s = 3;\n        var n_b = 0, n_a = 1, n_b_a = 2, n_i = 3;\n\n        util.extend(api.rangePrototype, {\n            compareBoundaryPoints: function(how, range) {\n                assertRangeValid(this);\n                assertSameDocumentOrFragment(this.startContainer, range.startContainer);\n\n                var nodeA, offsetA, nodeB, offsetB;\n                var prefixA = (how == e2s || how == s2s) ? \"start\" : \"end\";\n                var prefixB = (how == s2e || how == s2s) ? \"start\" : \"end\";\n                nodeA = this[prefixA + \"Container\"];\n                offsetA = this[prefixA + \"Offset\"];\n                nodeB = range[prefixB + \"Container\"];\n                offsetB = range[prefixB + \"Offset\"];\n                return comparePoints(nodeA, offsetA, nodeB, offsetB);\n            },\n\n            insertNode: function(node) {\n                assertRangeValid(this);\n                assertValidNodeType(node, insertableNodeTypes);\n                assertNodeNotReadOnly(this.startContainer);\n\n                if (isOrIsAncestorOf(node, this.startContainer)) {\n                    throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n                }\n\n                // No check for whether the container of the start of the Range is of a type that does not allow\n                // children of the type of node: the browser's DOM implementation should do this for us when we attempt\n                // to add the node\n\n                var firstNodeInserted = insertNodeAtPosition(node, this.startContainer, this.startOffset);\n                this.setStartBefore(firstNodeInserted);\n            },\n\n            cloneContents: function() {\n                assertRangeValid(this);\n\n                var clone, frag;\n                if (this.collapsed) {\n                    return getRangeDocument(this).createDocumentFragment();\n                } else {\n                    if (this.startContainer === this.endContainer && isCharacterDataNode(this.startContainer)) {\n                        clone = this.startContainer.cloneNode(true);\n                        clone.data = clone.data.slice(this.startOffset, this.endOffset);\n                        frag = getRangeDocument(this).createDocumentFragment();\n                        frag.appendChild(clone);\n                        return frag;\n                    } else {\n                        var iterator = new RangeIterator(this, true);\n                        clone = cloneSubtree(iterator);\n                        iterator.detach();\n                    }\n                    return clone;\n                }\n            },\n\n            canSurroundContents: function() {\n                assertRangeValid(this);\n                assertNodeNotReadOnly(this.startContainer);\n                assertNodeNotReadOnly(this.endContainer);\n\n                // Check if the contents can be surrounded. Specifically, this means whether the range partially selects\n                // no non-text nodes.\n                var iterator = new RangeIterator(this, true);\n                var boundariesInvalid = (iterator._first && (isNonTextPartiallySelected(iterator._first, this)) ||\n                        (iterator._last && isNonTextPartiallySelected(iterator._last, this)));\n                iterator.detach();\n                return !boundariesInvalid;\n            },\n\n            surroundContents: function(node) {\n                assertValidNodeType(node, surroundNodeTypes);\n\n                if (!this.canSurroundContents()) {\n                    throw new DOMException(\"INVALID_STATE_ERR\");\n                }\n\n                // Extract the contents\n                var content = this.extractContents();\n\n                // Clear the children of the node\n                if (node.hasChildNodes()) {\n                    while (node.lastChild) {\n                        node.removeChild(node.lastChild);\n                    }\n                }\n\n                // Insert the new node and add the extracted contents\n                insertNodeAtPosition(node, this.startContainer, this.startOffset);\n                node.appendChild(content);\n\n                this.selectNode(node);\n            },\n\n            cloneRange: function() {\n                assertRangeValid(this);\n                var range = new Range(getRangeDocument(this));\n                var i = rangeProperties.length, prop;\n                while (i--) {\n                    prop = rangeProperties[i];\n                    range[prop] = this[prop];\n                }\n                return range;\n            },\n\n            toString: function() {\n                assertRangeValid(this);\n                var sc = this.startContainer;\n                if (sc === this.endContainer && isCharacterDataNode(sc)) {\n                    return (sc.nodeType == 3 || sc.nodeType == 4) ? sc.data.slice(this.startOffset, this.endOffset) : \"\";\n                } else {\n                    var textParts = [], iterator = new RangeIterator(this, true);\n                    iterateSubtree(iterator, function(node) {\n                        // Accept only text or CDATA nodes, not comments\n                        if (node.nodeType == 3 || node.nodeType == 4) {\n                            textParts.push(node.data);\n                        }\n                    });\n                    iterator.detach();\n                    return textParts.join(\"\");\n                }\n            },\n\n            // The methods below are all non-standard. The following batch were introduced by Mozilla but have since\n            // been removed from Mozilla.\n\n            compareNode: function(node) {\n                assertRangeValid(this);\n\n                var parent = node.parentNode;\n                var nodeIndex = getNodeIndex(node);\n\n                if (!parent) {\n                    throw new DOMException(\"NOT_FOUND_ERR\");\n                }\n\n                var startComparison = this.comparePoint(parent, nodeIndex),\n                    endComparison = this.comparePoint(parent, nodeIndex + 1);\n\n                if (startComparison < 0) { // Node starts before\n                    return (endComparison > 0) ? n_b_a : n_b;\n                } else {\n                    return (endComparison > 0) ? n_a : n_i;\n                }\n            },\n\n            comparePoint: function(node, offset) {\n                assertRangeValid(this);\n                assertNode(node, \"HIERARCHY_REQUEST_ERR\");\n                assertSameDocumentOrFragment(node, this.startContainer);\n\n                if (comparePoints(node, offset, this.startContainer, this.startOffset) < 0) {\n                    return -1;\n                } else if (comparePoints(node, offset, this.endContainer, this.endOffset) > 0) {\n                    return 1;\n                }\n                return 0;\n            },\n\n            createContextualFragment: createContextualFragment,\n\n            toHtml: function() {\n                return rangeToHtml(this);\n            },\n\n            // touchingIsIntersecting determines whether this method considers a node that borders a range intersects\n            // with it (as in WebKit) or not (as in Gecko pre-1.9, and the default)\n            intersectsNode: function(node, touchingIsIntersecting) {\n                assertRangeValid(this);\n                assertNode(node, \"NOT_FOUND_ERR\");\n                if (getDocument(node) !== getRangeDocument(this)) {\n                    return false;\n                }\n\n                var parent = node.parentNode, offset = getNodeIndex(node);\n                assertNode(parent, \"NOT_FOUND_ERR\");\n\n                var startComparison = comparePoints(parent, offset, this.endContainer, this.endOffset),\n                    endComparison = comparePoints(parent, offset + 1, this.startContainer, this.startOffset);\n\n                return touchingIsIntersecting ? startComparison <= 0 && endComparison >= 0 : startComparison < 0 && endComparison > 0;\n            },\n\n            isPointInRange: function(node, offset) {\n                assertRangeValid(this);\n                assertNode(node, \"HIERARCHY_REQUEST_ERR\");\n                assertSameDocumentOrFragment(node, this.startContainer);\n\n                return (comparePoints(node, offset, this.startContainer, this.startOffset) >= 0) &&\n                       (comparePoints(node, offset, this.endContainer, this.endOffset) <= 0);\n            },\n\n            // The methods below are non-standard and invented by me.\n\n            // Sharing a boundary start-to-end or end-to-start does not count as intersection.\n            intersectsRange: function(range) {\n                return rangesIntersect(this, range, false);\n            },\n\n            // Sharing a boundary start-to-end or end-to-start does count as intersection.\n            intersectsOrTouchesRange: function(range) {\n                return rangesIntersect(this, range, true);\n            },\n\n            intersection: function(range) {\n                if (this.intersectsRange(range)) {\n                    var startComparison = comparePoints(this.startContainer, this.startOffset, range.startContainer, range.startOffset),\n                        endComparison = comparePoints(this.endContainer, this.endOffset, range.endContainer, range.endOffset);\n\n                    var intersectionRange = this.cloneRange();\n                    if (startComparison == -1) {\n                        intersectionRange.setStart(range.startContainer, range.startOffset);\n                    }\n                    if (endComparison == 1) {\n                        intersectionRange.setEnd(range.endContainer, range.endOffset);\n                    }\n                    return intersectionRange;\n                }\n                return null;\n            },\n\n            union: function(range) {\n                if (this.intersectsOrTouchesRange(range)) {\n                    var unionRange = this.cloneRange();\n                    if (comparePoints(range.startContainer, range.startOffset, this.startContainer, this.startOffset) == -1) {\n                        unionRange.setStart(range.startContainer, range.startOffset);\n                    }\n                    if (comparePoints(range.endContainer, range.endOffset, this.endContainer, this.endOffset) == 1) {\n                        unionRange.setEnd(range.endContainer, range.endOffset);\n                    }\n                    return unionRange;\n                } else {\n                    throw new DOMException(\"Ranges do not intersect\");\n                }\n            },\n\n            containsNode: function(node, allowPartial) {\n                if (allowPartial) {\n                    return this.intersectsNode(node, false);\n                } else {\n                    return this.compareNode(node) == n_i;\n                }\n            },\n\n            containsNodeContents: function(node) {\n                return this.comparePoint(node, 0) >= 0 && this.comparePoint(node, getNodeLength(node)) <= 0;\n            },\n\n            containsRange: function(range) {\n                var intersection = this.intersection(range);\n                return intersection !== null && range.equals(intersection);\n            },\n\n            containsNodeText: function(node) {\n                var nodeRange = this.cloneRange();\n                nodeRange.selectNode(node);\n                var textNodes = nodeRange.getNodes([3]);\n                if (textNodes.length > 0) {\n                    nodeRange.setStart(textNodes[0], 0);\n                    var lastTextNode = textNodes.pop();\n                    nodeRange.setEnd(lastTextNode, lastTextNode.length);\n                    return this.containsRange(nodeRange);\n                } else {\n                    return this.containsNodeContents(node);\n                }\n            },\n\n            getNodes: function(nodeTypes, filter) {\n                assertRangeValid(this);\n                return getNodesInRange(this, nodeTypes, filter);\n            },\n\n            getDocument: function() {\n                return getRangeDocument(this);\n            },\n\n            collapseBefore: function(node) {\n                this.setEndBefore(node);\n                this.collapse(false);\n            },\n\n            collapseAfter: function(node) {\n                this.setStartAfter(node);\n                this.collapse(true);\n            },\n            \n            getBookmark: function(containerNode) {\n                var doc = getRangeDocument(this);\n                var preSelectionRange = api.createRange(doc);\n                containerNode = containerNode || dom.getBody(doc);\n                preSelectionRange.selectNodeContents(containerNode);\n                var range = this.intersection(preSelectionRange);\n                var start = 0, end = 0;\n                if (range) {\n                    preSelectionRange.setEnd(range.startContainer, range.startOffset);\n                    start = preSelectionRange.toString().length;\n                    end = start + range.toString().length;\n                }\n\n                return {\n                    start: start,\n                    end: end,\n                    containerNode: containerNode\n                };\n            },\n            \n            moveToBookmark: function(bookmark) {\n                var containerNode = bookmark.containerNode;\n                var charIndex = 0;\n                this.setStart(containerNode, 0);\n                this.collapse(true);\n                var nodeStack = [containerNode], node, foundStart = false, stop = false;\n                var nextCharIndex, i, childNodes;\n\n                while (!stop && (node = nodeStack.pop())) {\n                    if (node.nodeType == 3) {\n                        nextCharIndex = charIndex + node.length;\n                        if (!foundStart && bookmark.start >= charIndex && bookmark.start <= nextCharIndex) {\n                            this.setStart(node, bookmark.start - charIndex);\n                            foundStart = true;\n                        }\n                        if (foundStart && bookmark.end >= charIndex && bookmark.end <= nextCharIndex) {\n                            this.setEnd(node, bookmark.end - charIndex);\n                            stop = true;\n                        }\n                        charIndex = nextCharIndex;\n                    } else {\n                        childNodes = node.childNodes;\n                        i = childNodes.length;\n                        while (i--) {\n                            nodeStack.push(childNodes[i]);\n                        }\n                    }\n                }\n            },\n\n            getName: function() {\n                return \"DomRange\";\n            },\n\n            equals: function(range) {\n                return Range.rangesEqual(this, range);\n            },\n\n            isValid: function() {\n                return isRangeValid(this);\n            },\n            \n            inspect: function() {\n                return inspect(this);\n            },\n            \n            detach: function() {\n                // In DOM4, detach() is now a no-op.\n            }\n        });\n\n        function copyComparisonConstantsToObject(obj) {\n            obj.START_TO_START = s2s;\n            obj.START_TO_END = s2e;\n            obj.END_TO_END = e2e;\n            obj.END_TO_START = e2s;\n\n            obj.NODE_BEFORE = n_b;\n            obj.NODE_AFTER = n_a;\n            obj.NODE_BEFORE_AND_AFTER = n_b_a;\n            obj.NODE_INSIDE = n_i;\n        }\n\n        function copyComparisonConstants(constructor) {\n            copyComparisonConstantsToObject(constructor);\n            copyComparisonConstantsToObject(constructor.prototype);\n        }\n\n        function createRangeContentRemover(remover, boundaryUpdater) {\n            return function() {\n                assertRangeValid(this);\n\n                var sc = this.startContainer, so = this.startOffset, root = this.commonAncestorContainer;\n\n                var iterator = new RangeIterator(this, true);\n\n                // Work out where to position the range after content removal\n                var node, boundary;\n                if (sc !== root) {\n                    node = getClosestAncestorIn(sc, root, true);\n                    boundary = getBoundaryAfterNode(node);\n                    sc = boundary.node;\n                    so = boundary.offset;\n                }\n\n                // Check none of the range is read-only\n                iterateSubtree(iterator, assertNodeNotReadOnly);\n\n                iterator.reset();\n\n                // Remove the content\n                var returnValue = remover(iterator);\n                iterator.detach();\n\n                // Move to the new position\n                boundaryUpdater(this, sc, so, sc, so);\n\n                return returnValue;\n            };\n        }\n\n        function createPrototypeRange(constructor, boundaryUpdater) {\n            function createBeforeAfterNodeSetter(isBefore, isStart) {\n                return function(node) {\n                    assertValidNodeType(node, beforeAfterNodeTypes);\n                    assertValidNodeType(getRootContainer(node), rootContainerNodeTypes);\n\n                    var boundary = (isBefore ? getBoundaryBeforeNode : getBoundaryAfterNode)(node);\n                    (isStart ? setRangeStart : setRangeEnd)(this, boundary.node, boundary.offset);\n                };\n            }\n\n            function setRangeStart(range, node, offset) {\n                var ec = range.endContainer, eo = range.endOffset;\n                if (node !== range.startContainer || offset !== range.startOffset) {\n                    // Check the root containers of the range and the new boundary, and also check whether the new boundary\n                    // is after the current end. In either case, collapse the range to the new position\n                    if (getRootContainer(node) != getRootContainer(ec) || comparePoints(node, offset, ec, eo) == 1) {\n                        ec = node;\n                        eo = offset;\n                    }\n                    boundaryUpdater(range, node, offset, ec, eo);\n                }\n            }\n\n            function setRangeEnd(range, node, offset) {\n                var sc = range.startContainer, so = range.startOffset;\n                if (node !== range.endContainer || offset !== range.endOffset) {\n                    // Check the root containers of the range and the new boundary, and also check whether the new boundary\n                    // is after the current end. In either case, collapse the range to the new position\n                    if (getRootContainer(node) != getRootContainer(sc) || comparePoints(node, offset, sc, so) == -1) {\n                        sc = node;\n                        so = offset;\n                    }\n                    boundaryUpdater(range, sc, so, node, offset);\n                }\n            }\n\n            // Set up inheritance\n            var F = function() {};\n            F.prototype = api.rangePrototype;\n            constructor.prototype = new F();\n\n            util.extend(constructor.prototype, {\n                setStart: function(node, offset) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n                    assertValidOffset(node, offset);\n\n                    setRangeStart(this, node, offset);\n                },\n\n                setEnd: function(node, offset) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n                    assertValidOffset(node, offset);\n\n                    setRangeEnd(this, node, offset);\n                },\n\n                /**\n                 * Convenience method to set a range's start and end boundaries. Overloaded as follows:\n                 * - Two parameters (node, offset) creates a collapsed range at that position\n                 * - Three parameters (node, startOffset, endOffset) creates a range contained with node starting at\n                 *   startOffset and ending at endOffset\n                 * - Four parameters (startNode, startOffset, endNode, endOffset) creates a range starting at startOffset in\n                 *   startNode and ending at endOffset in endNode\n                 */\n                setStartAndEnd: function() {\n                    var args = arguments;\n                    var sc = args[0], so = args[1], ec = sc, eo = so;\n\n                    switch (args.length) {\n                        case 3:\n                            eo = args[2];\n                            break;\n                        case 4:\n                            ec = args[2];\n                            eo = args[3];\n                            break;\n                    }\n\n                    boundaryUpdater(this, sc, so, ec, eo);\n                },\n                \n                setBoundary: function(node, offset, isStart) {\n                    this[\"set\" + (isStart ? \"Start\" : \"End\")](node, offset);\n                },\n\n                setStartBefore: createBeforeAfterNodeSetter(true, true),\n                setStartAfter: createBeforeAfterNodeSetter(false, true),\n                setEndBefore: createBeforeAfterNodeSetter(true, false),\n                setEndAfter: createBeforeAfterNodeSetter(false, false),\n\n                collapse: function(isStart) {\n                    assertRangeValid(this);\n                    if (isStart) {\n                        boundaryUpdater(this, this.startContainer, this.startOffset, this.startContainer, this.startOffset);\n                    } else {\n                        boundaryUpdater(this, this.endContainer, this.endOffset, this.endContainer, this.endOffset);\n                    }\n                },\n\n                selectNodeContents: function(node) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n\n                    boundaryUpdater(this, node, 0, node, getNodeLength(node));\n                },\n\n                selectNode: function(node) {\n                    assertNoDocTypeNotationEntityAncestor(node, false);\n                    assertValidNodeType(node, beforeAfterNodeTypes);\n\n                    var start = getBoundaryBeforeNode(node), end = getBoundaryAfterNode(node);\n                    boundaryUpdater(this, start.node, start.offset, end.node, end.offset);\n                },\n\n                extractContents: createRangeContentRemover(extractSubtree, boundaryUpdater),\n\n                deleteContents: createRangeContentRemover(deleteSubtree, boundaryUpdater),\n\n                canSurroundContents: function() {\n                    assertRangeValid(this);\n                    assertNodeNotReadOnly(this.startContainer);\n                    assertNodeNotReadOnly(this.endContainer);\n\n                    // Check if the contents can be surrounded. Specifically, this means whether the range partially selects\n                    // no non-text nodes.\n                    var iterator = new RangeIterator(this, true);\n                    var boundariesInvalid = (iterator._first && isNonTextPartiallySelected(iterator._first, this) ||\n                            (iterator._last && isNonTextPartiallySelected(iterator._last, this)));\n                    iterator.detach();\n                    return !boundariesInvalid;\n                },\n\n                splitBoundaries: function() {\n                    splitRangeBoundaries(this);\n                },\n\n                splitBoundariesPreservingPositions: function(positionsToPreserve) {\n                    splitRangeBoundaries(this, positionsToPreserve);\n                },\n\n                normalizeBoundaries: function() {\n                    assertRangeValid(this);\n\n                    var sc = this.startContainer, so = this.startOffset, ec = this.endContainer, eo = this.endOffset;\n\n                    var mergeForward = function(node) {\n                        var sibling = node.nextSibling;\n                        if (sibling && sibling.nodeType == node.nodeType) {\n                            ec = node;\n                            eo = node.length;\n                            node.appendData(sibling.data);\n                            sibling.parentNode.removeChild(sibling);\n                        }\n                    };\n\n                    var mergeBackward = function(node) {\n                        var sibling = node.previousSibling;\n                        if (sibling && sibling.nodeType == node.nodeType) {\n                            sc = node;\n                            var nodeLength = node.length;\n                            so = sibling.length;\n                            node.insertData(0, sibling.data);\n                            sibling.parentNode.removeChild(sibling);\n                            if (sc == ec) {\n                                eo += so;\n                                ec = sc;\n                            } else if (ec == node.parentNode) {\n                                var nodeIndex = getNodeIndex(node);\n                                if (eo == nodeIndex) {\n                                    ec = node;\n                                    eo = nodeLength;\n                                } else if (eo > nodeIndex) {\n                                    eo--;\n                                }\n                            }\n                        }\n                    };\n\n                    var normalizeStart = true;\n\n                    if (isCharacterDataNode(ec)) {\n                        if (ec.length == eo) {\n                            mergeForward(ec);\n                        }\n                    } else {\n                        if (eo > 0) {\n                            var endNode = ec.childNodes[eo - 1];\n                            if (endNode && isCharacterDataNode(endNode)) {\n                                mergeForward(endNode);\n                            }\n                        }\n                        normalizeStart = !this.collapsed;\n                    }\n\n                    if (normalizeStart) {\n                        if (isCharacterDataNode(sc)) {\n                            if (so == 0) {\n                                mergeBackward(sc);\n                            }\n                        } else {\n                            if (so < sc.childNodes.length) {\n                                var startNode = sc.childNodes[so];\n                                if (startNode && isCharacterDataNode(startNode)) {\n                                    mergeBackward(startNode);\n                                }\n                            }\n                        }\n                    } else {\n                        sc = ec;\n                        so = eo;\n                    }\n\n                    boundaryUpdater(this, sc, so, ec, eo);\n                },\n\n                collapseToPoint: function(node, offset) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n                    assertValidOffset(node, offset);\n                    this.setStartAndEnd(node, offset);\n                }\n            });\n\n            copyComparisonConstants(constructor);\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Updates commonAncestorContainer and collapsed after boundary change\n        function updateCollapsedAndCommonAncestor(range) {\n            range.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);\n            range.commonAncestorContainer = range.collapsed ?\n                range.startContainer : dom.getCommonAncestor(range.startContainer, range.endContainer);\n        }\n\n        function updateBoundaries(range, startContainer, startOffset, endContainer, endOffset) {\n            range.startContainer = startContainer;\n            range.startOffset = startOffset;\n            range.endContainer = endContainer;\n            range.endOffset = endOffset;\n            range.document = dom.getDocument(startContainer);\n\n            updateCollapsedAndCommonAncestor(range);\n        }\n\n        function Range(doc) {\n            this.startContainer = doc;\n            this.startOffset = 0;\n            this.endContainer = doc;\n            this.endOffset = 0;\n            this.document = doc;\n            updateCollapsedAndCommonAncestor(this);\n        }\n\n        createPrototypeRange(Range, updateBoundaries);\n\n        util.extend(Range, {\n            rangeProperties: rangeProperties,\n            RangeIterator: RangeIterator,\n            copyComparisonConstants: copyComparisonConstants,\n            createPrototypeRange: createPrototypeRange,\n            inspect: inspect,\n            toHtml: rangeToHtml,\n            getRangeDocument: getRangeDocument,\n            rangesEqual: function(r1, r2) {\n                return r1.startContainer === r2.startContainer &&\n                    r1.startOffset === r2.startOffset &&\n                    r1.endContainer === r2.endContainer &&\n                    r1.endOffset === r2.endOffset;\n            }\n        });\n\n        api.DomRange = Range;\n    });\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Wrappers for the browser's native DOM Range and/or TextRange implementation \n    api.createCoreModule(\"WrappedRange\", [\"DomRange\"], function(api, module) {\n        var WrappedRange, WrappedTextRange;\n        var dom = api.dom;\n        var util = api.util;\n        var DomPosition = dom.DomPosition;\n        var DomRange = api.DomRange;\n        var getBody = dom.getBody;\n        var getContentDocument = dom.getContentDocument;\n        var isCharacterDataNode = dom.isCharacterDataNode;\n\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        if (api.features.implementsDomRange) {\n            // This is a wrapper around the browser's native DOM Range. It has two aims:\n            // - Provide workarounds for specific browser bugs\n            // - provide convenient extensions, which are inherited from Rangy's DomRange\n\n            (function() {\n                var rangeProto;\n                var rangeProperties = DomRange.rangeProperties;\n\n                function updateRangeProperties(range) {\n                    var i = rangeProperties.length, prop;\n                    while (i--) {\n                        prop = rangeProperties[i];\n                        range[prop] = range.nativeRange[prop];\n                    }\n                    // Fix for broken collapsed property in IE 9.\n                    range.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);\n                }\n\n                function updateNativeRange(range, startContainer, startOffset, endContainer, endOffset) {\n                    var startMoved = (range.startContainer !== startContainer || range.startOffset != startOffset);\n                    var endMoved = (range.endContainer !== endContainer || range.endOffset != endOffset);\n                    var nativeRangeDifferent = !range.equals(range.nativeRange);\n\n                    // Always set both boundaries for the benefit of IE9 (see issue 35)\n                    if (startMoved || endMoved || nativeRangeDifferent) {\n                        range.setEnd(endContainer, endOffset);\n                        range.setStart(startContainer, startOffset);\n                    }\n                }\n\n                var createBeforeAfterNodeSetter;\n\n                WrappedRange = function(range) {\n                    if (!range) {\n                        throw module.createError(\"WrappedRange: Range must be specified\");\n                    }\n                    this.nativeRange = range;\n                    updateRangeProperties(this);\n                };\n\n                DomRange.createPrototypeRange(WrappedRange, updateNativeRange);\n\n                rangeProto = WrappedRange.prototype;\n\n                rangeProto.selectNode = function(node) {\n                    this.nativeRange.selectNode(node);\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.cloneContents = function() {\n                    return this.nativeRange.cloneContents();\n                };\n\n                // Due to a long-standing Firefox bug that I have not been able to find a reliable way to detect,\n                // insertNode() is never delegated to the native range.\n\n                rangeProto.surroundContents = function(node) {\n                    this.nativeRange.surroundContents(node);\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.collapse = function(isStart) {\n                    this.nativeRange.collapse(isStart);\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.cloneRange = function() {\n                    return new WrappedRange(this.nativeRange.cloneRange());\n                };\n\n                rangeProto.refresh = function() {\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.toString = function() {\n                    return this.nativeRange.toString();\n                };\n\n                // Create test range and node for feature detection\n\n                var testTextNode = document.createTextNode(\"test\");\n                getBody(document).appendChild(testTextNode);\n                var range = document.createRange();\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for Firefox 2 bug that prevents moving the start of a Range to a point after its current end and\n                // correct for it\n\n                range.setStart(testTextNode, 0);\n                range.setEnd(testTextNode, 0);\n\n                try {\n                    range.setStart(testTextNode, 1);\n\n                    rangeProto.setStart = function(node, offset) {\n                        this.nativeRange.setStart(node, offset);\n                        updateRangeProperties(this);\n                    };\n\n                    rangeProto.setEnd = function(node, offset) {\n                        this.nativeRange.setEnd(node, offset);\n                        updateRangeProperties(this);\n                    };\n\n                    createBeforeAfterNodeSetter = function(name) {\n                        return function(node) {\n                            this.nativeRange[name](node);\n                            updateRangeProperties(this);\n                        };\n                    };\n\n                } catch(ex) {\n\n                    rangeProto.setStart = function(node, offset) {\n                        try {\n                            this.nativeRange.setStart(node, offset);\n                        } catch (ex) {\n                            this.nativeRange.setEnd(node, offset);\n                            this.nativeRange.setStart(node, offset);\n                        }\n                        updateRangeProperties(this);\n                    };\n\n                    rangeProto.setEnd = function(node, offset) {\n                        try {\n                            this.nativeRange.setEnd(node, offset);\n                        } catch (ex) {\n                            this.nativeRange.setStart(node, offset);\n                            this.nativeRange.setEnd(node, offset);\n                        }\n                        updateRangeProperties(this);\n                    };\n\n                    createBeforeAfterNodeSetter = function(name, oppositeName) {\n                        return function(node) {\n                            try {\n                                this.nativeRange[name](node);\n                            } catch (ex) {\n                                this.nativeRange[oppositeName](node);\n                                this.nativeRange[name](node);\n                            }\n                            updateRangeProperties(this);\n                        };\n                    };\n                }\n\n                rangeProto.setStartBefore = createBeforeAfterNodeSetter(\"setStartBefore\", \"setEndBefore\");\n                rangeProto.setStartAfter = createBeforeAfterNodeSetter(\"setStartAfter\", \"setEndAfter\");\n                rangeProto.setEndBefore = createBeforeAfterNodeSetter(\"setEndBefore\", \"setStartBefore\");\n                rangeProto.setEndAfter = createBeforeAfterNodeSetter(\"setEndAfter\", \"setStartAfter\");\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Always use DOM4-compliant selectNodeContents implementation: it's simpler and less code than testing\n                // whether the native implementation can be trusted\n                rangeProto.selectNodeContents = function(node) {\n                    this.setStartAndEnd(node, 0, dom.getNodeLength(node));\n                };\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for and correct WebKit bug that has the behaviour of compareBoundaryPoints round the wrong way for\n                // constants START_TO_END and END_TO_START: https://bugs.webkit.org/show_bug.cgi?id=20738\n\n                range.selectNodeContents(testTextNode);\n                range.setEnd(testTextNode, 3);\n\n                var range2 = document.createRange();\n                range2.selectNodeContents(testTextNode);\n                range2.setEnd(testTextNode, 4);\n                range2.setStart(testTextNode, 2);\n\n                if (range.compareBoundaryPoints(range.START_TO_END, range2) == -1 &&\n                        range.compareBoundaryPoints(range.END_TO_START, range2) == 1) {\n                    // This is the wrong way round, so correct for it\n\n                    rangeProto.compareBoundaryPoints = function(type, range) {\n                        range = range.nativeRange || range;\n                        if (type == range.START_TO_END) {\n                            type = range.END_TO_START;\n                        } else if (type == range.END_TO_START) {\n                            type = range.START_TO_END;\n                        }\n                        return this.nativeRange.compareBoundaryPoints(type, range);\n                    };\n                } else {\n                    rangeProto.compareBoundaryPoints = function(type, range) {\n                        return this.nativeRange.compareBoundaryPoints(type, range.nativeRange || range);\n                    };\n                }\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for IE 9 deleteContents() and extractContents() bug and correct it. See issue 107.\n\n                var el = document.createElement(\"div\");\n                el.innerHTML = \"123\";\n                var textNode = el.firstChild;\n                var body = getBody(document);\n                body.appendChild(el);\n\n                range.setStart(textNode, 1);\n                range.setEnd(textNode, 2);\n                range.deleteContents();\n\n                if (textNode.data == \"13\") {\n                    // Behaviour is correct per DOM4 Range so wrap the browser's implementation of deleteContents() and\n                    // extractContents()\n                    rangeProto.deleteContents = function() {\n                        this.nativeRange.deleteContents();\n                        updateRangeProperties(this);\n                    };\n\n                    rangeProto.extractContents = function() {\n                        var frag = this.nativeRange.extractContents();\n                        updateRangeProperties(this);\n                        return frag;\n                    };\n                } else {\n                }\n\n                body.removeChild(el);\n                body = null;\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for existence of createContextualFragment and delegate to it if it exists\n                if (util.isHostMethod(range, \"createContextualFragment\")) {\n                    rangeProto.createContextualFragment = function(fragmentStr) {\n                        return this.nativeRange.createContextualFragment(fragmentStr);\n                    };\n                }\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Clean up\n                getBody(document).removeChild(testTextNode);\n\n                rangeProto.getName = function() {\n                    return \"WrappedRange\";\n                };\n\n                api.WrappedRange = WrappedRange;\n\n                api.createNativeRange = function(doc) {\n                    doc = getContentDocument(doc, module, \"createNativeRange\");\n                    return doc.createRange();\n                };\n            })();\n        }\n        \n        if (api.features.implementsTextRange) {\n            /*\n            This is a workaround for a bug where IE returns the wrong container element from the TextRange's parentElement()\n            method. For example, in the following (where pipes denote the selection boundaries):\n\n            <ul id=\"ul\"><li id=\"a\">| a </li><li id=\"b\"> b |</li></ul>\n\n            var range = document.selection.createRange();\n            alert(range.parentElement().id); // Should alert \"ul\" but alerts \"b\"\n\n            This method returns the common ancestor node of the following:\n            - the parentElement() of the textRange\n            - the parentElement() of the textRange after calling collapse(true)\n            - the parentElement() of the textRange after calling collapse(false)\n            */\n            var getTextRangeContainerElement = function(textRange) {\n                var parentEl = textRange.parentElement();\n                var range = textRange.duplicate();\n                range.collapse(true);\n                var startEl = range.parentElement();\n                range = textRange.duplicate();\n                range.collapse(false);\n                var endEl = range.parentElement();\n                var startEndContainer = (startEl == endEl) ? startEl : dom.getCommonAncestor(startEl, endEl);\n\n                return startEndContainer == parentEl ? startEndContainer : dom.getCommonAncestor(parentEl, startEndContainer);\n            };\n\n            var textRangeIsCollapsed = function(textRange) {\n                return textRange.compareEndPoints(\"StartToEnd\", textRange) == 0;\n            };\n\n            // Gets the boundary of a TextRange expressed as a node and an offset within that node. This function started\n            // out as an improved version of code found in Tim Cameron Ryan's IERange (http://code.google.com/p/ierange/)\n            // but has grown, fixing problems with line breaks in preformatted text, adding workaround for IE TextRange\n            // bugs, handling for inputs and images, plus optimizations.\n            var getTextRangeBoundaryPosition = function(textRange, wholeRangeContainerElement, isStart, isCollapsed, startInfo) {\n                var workingRange = textRange.duplicate();\n                workingRange.collapse(isStart);\n                var containerElement = workingRange.parentElement();\n\n                // Sometimes collapsing a TextRange that's at the start of a text node can move it into the previous node, so\n                // check for that\n                if (!dom.isOrIsAncestorOf(wholeRangeContainerElement, containerElement)) {\n                    containerElement = wholeRangeContainerElement;\n                }\n\n\n                // Deal with nodes that cannot \"contain rich HTML markup\". In practice, this means form inputs, images and\n                // similar. See http://msdn.microsoft.com/en-us/library/aa703950%28VS.85%29.aspx\n                if (!containerElement.canHaveHTML) {\n                    var pos = new DomPosition(containerElement.parentNode, dom.getNodeIndex(containerElement));\n                    return {\n                        boundaryPosition: pos,\n                        nodeInfo: {\n                            nodeIndex: pos.offset,\n                            containerElement: pos.node\n                        }\n                    };\n                }\n\n                var workingNode = dom.getDocument(containerElement).createElement(\"span\");\n\n                // Workaround for HTML5 Shiv's insane violation of document.createElement(). See Rangy issue 104 and HTML5\n                // Shiv issue 64: https://github.com/aFarkas/html5shiv/issues/64\n                if (workingNode.parentNode) {\n                    workingNode.parentNode.removeChild(workingNode);\n                }\n\n                var comparison, workingComparisonType = isStart ? \"StartToStart\" : \"StartToEnd\";\n                var previousNode, nextNode, boundaryPosition, boundaryNode;\n                var start = (startInfo && startInfo.containerElement == containerElement) ? startInfo.nodeIndex : 0;\n                var childNodeCount = containerElement.childNodes.length;\n                var end = childNodeCount;\n\n                // Check end first. Code within the loop assumes that the endth child node of the container is definitely\n                // after the range boundary.\n                var nodeIndex = end;\n\n                while (true) {\n                    if (nodeIndex == childNodeCount) {\n                        containerElement.appendChild(workingNode);\n                    } else {\n                        containerElement.insertBefore(workingNode, containerElement.childNodes[nodeIndex]);\n                    }\n                    workingRange.moveToElementText(workingNode);\n                    comparison = workingRange.compareEndPoints(workingComparisonType, textRange);\n                    if (comparison == 0 || start == end) {\n                        break;\n                    } else if (comparison == -1) {\n                        if (end == start + 1) {\n                            // We know the endth child node is after the range boundary, so we must be done.\n                            break;\n                        } else {\n                            start = nodeIndex;\n                        }\n                    } else {\n                        end = (end == start + 1) ? start : nodeIndex;\n                    }\n                    nodeIndex = Math.floor((start + end) / 2);\n                    containerElement.removeChild(workingNode);\n                }\n\n\n                // We've now reached or gone past the boundary of the text range we're interested in\n                // so have identified the node we want\n                boundaryNode = workingNode.nextSibling;\n\n                if (comparison == -1 && boundaryNode && isCharacterDataNode(boundaryNode)) {\n                    // This is a character data node (text, comment, cdata). The working range is collapsed at the start of\n                    // the node containing the text range's boundary, so we move the end of the working range to the\n                    // boundary point and measure the length of its text to get the boundary's offset within the node.\n                    workingRange.setEndPoint(isStart ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n                    var offset;\n\n                    if (/[\\r\\n]/.test(boundaryNode.data)) {\n                        /*\n                        For the particular case of a boundary within a text node containing rendered line breaks (within a\n                        <pre> element, for example), we need a slightly complicated approach to get the boundary's offset in\n                        IE. The facts:\n                        \n                        - Each line break is represented as \\r in the text node's data/nodeValue properties\n                        - Each line break is represented as \\r\\n in the TextRange's 'text' property\n                        - The 'text' property of the TextRange does not contain trailing line breaks\n                        \n                        To get round the problem presented by the final fact above, we can use the fact that TextRange's\n                        moveStart() and moveEnd() methods return the actual number of characters moved, which is not\n                        necessarily the same as the number of characters it was instructed to move. The simplest approach is\n                        to use this to store the characters moved when moving both the start and end of the range to the\n                        start of the document body and subtracting the start offset from the end offset (the\n                        \"move-negative-gazillion\" method). However, this is extremely slow when the document is large and\n                        the range is near the end of it. Clearly doing the mirror image (i.e. moving the range boundaries to\n                        the end of the document) has the same problem.\n                        \n                        Another approach that works is to use moveStart() to move the start boundary of the range up to the\n                        end boundary one character at a time and incrementing a counter with the value returned by the\n                        moveStart() call. However, the check for whether the start boundary has reached the end boundary is\n                        expensive, so this method is slow (although unlike \"move-negative-gazillion\" is largely unaffected\n                        by the location of the range within the document).\n                        \n                        The approach used below is a hybrid of the two methods above. It uses the fact that a string\n                        containing the TextRange's 'text' property with each \\r\\n converted to a single \\r character cannot\n                        be longer than the text of the TextRange, so the start of the range is moved that length initially\n                        and then a character at a time to make up for any trailing line breaks not contained in the 'text'\n                        property. This has good performance in most situations compared to the previous two methods.\n                        */\n                        var tempRange = workingRange.duplicate();\n                        var rangeLength = tempRange.text.replace(/\\r\\n/g, \"\\r\").length;\n\n                        offset = tempRange.moveStart(\"character\", rangeLength);\n                        while ( (comparison = tempRange.compareEndPoints(\"StartToEnd\", tempRange)) == -1) {\n                            offset++;\n                            tempRange.moveStart(\"character\", 1);\n                        }\n                    } else {\n                        offset = workingRange.text.length;\n                    }\n                    boundaryPosition = new DomPosition(boundaryNode, offset);\n                } else {\n\n                    // If the boundary immediately follows a character data node and this is the end boundary, we should favour\n                    // a position within that, and likewise for a start boundary preceding a character data node\n                    previousNode = (isCollapsed || !isStart) && workingNode.previousSibling;\n                    nextNode = (isCollapsed || isStart) && workingNode.nextSibling;\n                    if (nextNode && isCharacterDataNode(nextNode)) {\n                        boundaryPosition = new DomPosition(nextNode, 0);\n                    } else if (previousNode && isCharacterDataNode(previousNode)) {\n                        boundaryPosition = new DomPosition(previousNode, previousNode.data.length);\n                    } else {\n                        boundaryPosition = new DomPosition(containerElement, dom.getNodeIndex(workingNode));\n                    }\n                }\n\n                // Clean up\n                workingNode.parentNode.removeChild(workingNode);\n\n                return {\n                    boundaryPosition: boundaryPosition,\n                    nodeInfo: {\n                        nodeIndex: nodeIndex,\n                        containerElement: containerElement\n                    }\n                };\n            };\n\n            // Returns a TextRange representing the boundary of a TextRange expressed as a node and an offset within that\n            // node. This function started out as an optimized version of code found in Tim Cameron Ryan's IERange\n            // (http://code.google.com/p/ierange/)\n            var createBoundaryTextRange = function(boundaryPosition, isStart) {\n                var boundaryNode, boundaryParent, boundaryOffset = boundaryPosition.offset;\n                var doc = dom.getDocument(boundaryPosition.node);\n                var workingNode, childNodes, workingRange = getBody(doc).createTextRange();\n                var nodeIsDataNode = isCharacterDataNode(boundaryPosition.node);\n\n                if (nodeIsDataNode) {\n                    boundaryNode = boundaryPosition.node;\n                    boundaryParent = boundaryNode.parentNode;\n                } else {\n                    childNodes = boundaryPosition.node.childNodes;\n                    boundaryNode = (boundaryOffset < childNodes.length) ? childNodes[boundaryOffset] : null;\n                    boundaryParent = boundaryPosition.node;\n                }\n\n                // Position the range immediately before the node containing the boundary\n                workingNode = doc.createElement(\"span\");\n\n                // Making the working element non-empty element persuades IE to consider the TextRange boundary to be within\n                // the element rather than immediately before or after it\n                workingNode.innerHTML = \"&#feff;\";\n\n                // insertBefore is supposed to work like appendChild if the second parameter is null. However, a bug report\n                // for IERange suggests that it can crash the browser: http://code.google.com/p/ierange/issues/detail?id=12\n                if (boundaryNode) {\n                    boundaryParent.insertBefore(workingNode, boundaryNode);\n                } else {\n                    boundaryParent.appendChild(workingNode);\n                }\n\n                workingRange.moveToElementText(workingNode);\n                workingRange.collapse(!isStart);\n\n                // Clean up\n                boundaryParent.removeChild(workingNode);\n\n                // Move the working range to the text offset, if required\n                if (nodeIsDataNode) {\n                    workingRange[isStart ? \"moveStart\" : \"moveEnd\"](\"character\", boundaryOffset);\n                }\n\n                return workingRange;\n            };\n\n            /*------------------------------------------------------------------------------------------------------------*/\n\n            // This is a wrapper around a TextRange, providing full DOM Range functionality using rangy's DomRange as a\n            // prototype\n\n            WrappedTextRange = function(textRange) {\n                this.textRange = textRange;\n                this.refresh();\n            };\n\n            WrappedTextRange.prototype = new DomRange(document);\n\n            WrappedTextRange.prototype.refresh = function() {\n                var start, end, startBoundary;\n\n                // TextRange's parentElement() method cannot be trusted. getTextRangeContainerElement() works around that.\n                var rangeContainerElement = getTextRangeContainerElement(this.textRange);\n\n                if (textRangeIsCollapsed(this.textRange)) {\n                    end = start = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, true,\n                        true).boundaryPosition;\n                } else {\n                    startBoundary = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, true, false);\n                    start = startBoundary.boundaryPosition;\n\n                    // An optimization used here is that if the start and end boundaries have the same parent element, the\n                    // search scope for the end boundary can be limited to exclude the portion of the element that precedes\n                    // the start boundary\n                    end = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, false, false,\n                        startBoundary.nodeInfo).boundaryPosition;\n                }\n\n                this.setStart(start.node, start.offset);\n                this.setEnd(end.node, end.offset);\n            };\n\n            WrappedTextRange.prototype.getName = function() {\n                return \"WrappedTextRange\";\n            };\n\n            DomRange.copyComparisonConstants(WrappedTextRange);\n\n            var rangeToTextRange = function(range) {\n                if (range.collapsed) {\n                    return createBoundaryTextRange(new DomPosition(range.startContainer, range.startOffset), true);\n                } else {\n                    var startRange = createBoundaryTextRange(new DomPosition(range.startContainer, range.startOffset), true);\n                    var endRange = createBoundaryTextRange(new DomPosition(range.endContainer, range.endOffset), false);\n                    var textRange = getBody( DomRange.getRangeDocument(range) ).createTextRange();\n                    textRange.setEndPoint(\"StartToStart\", startRange);\n                    textRange.setEndPoint(\"EndToEnd\", endRange);\n                    return textRange;\n                }\n            };\n\n            WrappedTextRange.rangeToTextRange = rangeToTextRange;\n\n            WrappedTextRange.prototype.toTextRange = function() {\n                return rangeToTextRange(this);\n            };\n\n            api.WrappedTextRange = WrappedTextRange;\n\n            // IE 9 and above have both implementations and Rangy makes both available. The next few lines sets which\n            // implementation to use by default.\n            if (!api.features.implementsDomRange || api.config.preferTextRange) {\n                // Add WrappedTextRange as the Range property of the global object to allow expression like Range.END_TO_END to work\n                var globalObj = (function() { return this; })();\n                if (typeof globalObj.Range == \"undefined\") {\n                    globalObj.Range = WrappedTextRange;\n                }\n\n                api.createNativeRange = function(doc) {\n                    doc = getContentDocument(doc, module, \"createNativeRange\");\n                    return getBody(doc).createTextRange();\n                };\n\n                api.WrappedRange = WrappedTextRange;\n            }\n        }\n\n        api.createRange = function(doc) {\n            doc = getContentDocument(doc, module, \"createRange\");\n            return new api.WrappedRange(api.createNativeRange(doc));\n        };\n\n        api.createRangyRange = function(doc) {\n            doc = getContentDocument(doc, module, \"createRangyRange\");\n            return new DomRange(doc);\n        };\n\n        api.createIframeRange = function(iframeEl) {\n            module.deprecationNotice(\"createIframeRange()\", \"createRange(iframeEl)\");\n            return api.createRange(iframeEl);\n        };\n\n        api.createIframeRangyRange = function(iframeEl) {\n            module.deprecationNotice(\"createIframeRangyRange()\", \"createRangyRange(iframeEl)\");\n            return api.createRangyRange(iframeEl);\n        };\n\n        api.addShimListener(function(win) {\n            var doc = win.document;\n            if (typeof doc.createRange == \"undefined\") {\n                doc.createRange = function() {\n                    return api.createRange(doc);\n                };\n            }\n            doc = win = null;\n        });\n    });\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // This module creates a selection object wrapper that conforms as closely as possible to the Selection specification\n    // in the HTML Editing spec (http://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#selections)\n    api.createCoreModule(\"WrappedSelection\", [\"DomRange\", \"WrappedRange\"], function(api, module) {\n        api.config.checkSelectionRanges = true;\n\n        var BOOLEAN = \"boolean\";\n        var NUMBER = \"number\";\n        var dom = api.dom;\n        var util = api.util;\n        var isHostMethod = util.isHostMethod;\n        var DomRange = api.DomRange;\n        var WrappedRange = api.WrappedRange;\n        var DOMException = api.DOMException;\n        var DomPosition = dom.DomPosition;\n        var getNativeSelection;\n        var selectionIsCollapsed;\n        var features = api.features;\n        var CONTROL = \"Control\";\n        var getDocument = dom.getDocument;\n        var getBody = dom.getBody;\n        var rangesEqual = DomRange.rangesEqual;\n\n\n        // Utility function to support direction parameters in the API that may be a string (\"backward\" or \"forward\") or a\n        // Boolean (true for backwards).\n        function isDirectionBackward(dir) {\n            return (typeof dir == \"string\") ? /^backward(s)?$/i.test(dir) : !!dir;\n        }\n\n        function getWindow(win, methodName) {\n            if (!win) {\n                return window;\n            } else if (dom.isWindow(win)) {\n                return win;\n            } else if (win instanceof WrappedSelection) {\n                return win.win;\n            } else {\n                var doc = dom.getContentDocument(win, module, methodName);\n                return dom.getWindow(doc);\n            }\n        }\n\n        function getWinSelection(winParam) {\n            return getWindow(winParam, \"getWinSelection\").getSelection();\n        }\n\n        function getDocSelection(winParam) {\n            return getWindow(winParam, \"getDocSelection\").document.selection;\n        }\n        \n        function winSelectionIsBackward(sel) {\n            var backward = false;\n            if (sel.anchorNode) {\n                backward = (dom.comparePoints(sel.anchorNode, sel.anchorOffset, sel.focusNode, sel.focusOffset) == 1);\n            }\n            return backward;\n        }\n\n        // Test for the Range/TextRange and Selection features required\n        // Test for ability to retrieve selection\n        var implementsWinGetSelection = isHostMethod(window, \"getSelection\"),\n            implementsDocSelection = util.isHostObject(document, \"selection\");\n\n        features.implementsWinGetSelection = implementsWinGetSelection;\n        features.implementsDocSelection = implementsDocSelection;\n\n        var useDocumentSelection = implementsDocSelection && (!implementsWinGetSelection || api.config.preferTextRange);\n\n        if (useDocumentSelection) {\n            getNativeSelection = getDocSelection;\n            api.isSelectionValid = function(winParam) {\n                var doc = getWindow(winParam, \"isSelectionValid\").document, nativeSel = doc.selection;\n\n                // Check whether the selection TextRange is actually contained within the correct document\n                return (nativeSel.type != \"None\" || getDocument(nativeSel.createRange().parentElement()) == doc);\n            };\n        } else if (implementsWinGetSelection) {\n            getNativeSelection = getWinSelection;\n            api.isSelectionValid = function() {\n                return true;\n            };\n        } else {\n            module.fail(\"Neither document.selection or window.getSelection() detected.\");\n        }\n\n        api.getNativeSelection = getNativeSelection;\n\n        var testSelection = getNativeSelection();\n        var testRange = api.createNativeRange(document);\n        var body = getBody(document);\n\n        // Obtaining a range from a selection\n        var selectionHasAnchorAndFocus = util.areHostProperties(testSelection,\n            [\"anchorNode\", \"focusNode\", \"anchorOffset\", \"focusOffset\"]);\n\n        features.selectionHasAnchorAndFocus = selectionHasAnchorAndFocus;\n\n        // Test for existence of native selection extend() method\n        var selectionHasExtend = isHostMethod(testSelection, \"extend\");\n        features.selectionHasExtend = selectionHasExtend;\n        \n        // Test if rangeCount exists\n        var selectionHasRangeCount = (typeof testSelection.rangeCount == NUMBER);\n        features.selectionHasRangeCount = selectionHasRangeCount;\n\n        var selectionSupportsMultipleRanges = false;\n        var collapsedNonEditableSelectionsSupported = true;\n\n        var addRangeBackwardToNative = selectionHasExtend ?\n            function(nativeSelection, range) {\n                var doc = DomRange.getRangeDocument(range);\n                var endRange = api.createRange(doc);\n                endRange.collapseToPoint(range.endContainer, range.endOffset);\n                nativeSelection.addRange(getNativeRange(endRange));\n                nativeSelection.extend(range.startContainer, range.startOffset);\n            } : null;\n\n        if (util.areHostMethods(testSelection, [\"addRange\", \"getRangeAt\", \"removeAllRanges\"]) &&\n                typeof testSelection.rangeCount == NUMBER && features.implementsDomRange) {\n\n            (function() {\n                // Previously an iframe was used but this caused problems in some circumstances in IE, so tests are\n                // performed on the current document's selection. See issue 109.\n\n                // Note also that if a selection previously existed, it is wiped by these tests. This should usually be fine\n                // because initialization usually happens when the document loads, but could be a problem for a script that\n                // loads and initializes Rangy later. If anyone complains, code could be added to save and restore the\n                // selection.\n                var sel = window.getSelection();\n                if (sel) {\n                    // Store the current selection\n                    var originalSelectionRangeCount = sel.rangeCount;\n                    var selectionHasMultipleRanges = (originalSelectionRangeCount > 1);\n                    var originalSelectionRanges = [];\n                    var originalSelectionBackward = winSelectionIsBackward(sel); \n                    for (var i = 0; i < originalSelectionRangeCount; ++i) {\n                        originalSelectionRanges[i] = sel.getRangeAt(i);\n                    }\n                    \n                    // Create some test elements\n                    var body = getBody(document);\n                    var testEl = body.appendChild( document.createElement(\"div\") );\n                    testEl.contentEditable = \"false\";\n                    var textNode = testEl.appendChild( document.createTextNode(\"\\u00a0\\u00a0\\u00a0\") );\n\n                    // Test whether the native selection will allow a collapsed selection within a non-editable element\n                    var r1 = document.createRange();\n\n                    r1.setStart(textNode, 1);\n                    r1.collapse(true);\n                    sel.addRange(r1);\n                    collapsedNonEditableSelectionsSupported = (sel.rangeCount == 1);\n                    sel.removeAllRanges();\n\n                    // Test whether the native selection is capable of supporting multiple ranges.\n                    if (!selectionHasMultipleRanges) {\n                        // Doing the original feature test here in Chrome 36 (and presumably later versions) prints a\n                        // console error of \"Discontiguous selection is not supported.\" that cannot be suppressed. There's\n                        // nothing we can do about this while retaining the feature test so we have to resort to a browser\n                        // sniff. I'm not happy about it. See\n                        // https://code.google.com/p/chromium/issues/detail?id=399791\n                        var chromeMatch = window.navigator.appVersion.match(/Chrome\\/(.*?) /);\n                        if (chromeMatch && parseInt(chromeMatch[1]) >= 36) {\n                            selectionSupportsMultipleRanges = false;\n                        } else {\n                            var r2 = r1.cloneRange();\n                            r1.setStart(textNode, 0);\n                            r2.setEnd(textNode, 3);\n                            r2.setStart(textNode, 2);\n                            sel.addRange(r1);\n                            sel.addRange(r2);\n                            selectionSupportsMultipleRanges = (sel.rangeCount == 2);\n                        }\n                    }\n\n                    // Clean up\n                    body.removeChild(testEl);\n                    sel.removeAllRanges();\n\n                    for (i = 0; i < originalSelectionRangeCount; ++i) {\n                        if (i == 0 && originalSelectionBackward) {\n                            if (addRangeBackwardToNative) {\n                                addRangeBackwardToNative(sel, originalSelectionRanges[i]);\n                            } else {\n                                api.warn(\"Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend\");\n                                sel.addRange(originalSelectionRanges[i]);\n                            }\n                        } else {\n                            sel.addRange(originalSelectionRanges[i]);\n                        }\n                    }\n                }\n            })();\n        }\n\n        features.selectionSupportsMultipleRanges = selectionSupportsMultipleRanges;\n        features.collapsedNonEditableSelectionsSupported = collapsedNonEditableSelectionsSupported;\n\n        // ControlRanges\n        var implementsControlRange = false, testControlRange;\n\n        if (body && isHostMethod(body, \"createControlRange\")) {\n            testControlRange = body.createControlRange();\n            if (util.areHostProperties(testControlRange, [\"item\", \"add\"])) {\n                implementsControlRange = true;\n            }\n        }\n        features.implementsControlRange = implementsControlRange;\n\n        // Selection collapsedness\n        if (selectionHasAnchorAndFocus) {\n            selectionIsCollapsed = function(sel) {\n                return sel.anchorNode === sel.focusNode && sel.anchorOffset === sel.focusOffset;\n            };\n        } else {\n            selectionIsCollapsed = function(sel) {\n                return sel.rangeCount ? sel.getRangeAt(sel.rangeCount - 1).collapsed : false;\n            };\n        }\n\n        function updateAnchorAndFocusFromRange(sel, range, backward) {\n            var anchorPrefix = backward ? \"end\" : \"start\", focusPrefix = backward ? \"start\" : \"end\";\n            sel.anchorNode = range[anchorPrefix + \"Container\"];\n            sel.anchorOffset = range[anchorPrefix + \"Offset\"];\n            sel.focusNode = range[focusPrefix + \"Container\"];\n            sel.focusOffset = range[focusPrefix + \"Offset\"];\n        }\n\n        function updateAnchorAndFocusFromNativeSelection(sel) {\n            var nativeSel = sel.nativeSelection;\n            sel.anchorNode = nativeSel.anchorNode;\n            sel.anchorOffset = nativeSel.anchorOffset;\n            sel.focusNode = nativeSel.focusNode;\n            sel.focusOffset = nativeSel.focusOffset;\n        }\n\n        function updateEmptySelection(sel) {\n            sel.anchorNode = sel.focusNode = null;\n            sel.anchorOffset = sel.focusOffset = 0;\n            sel.rangeCount = 0;\n            sel.isCollapsed = true;\n            sel._ranges.length = 0;\n        }\n\n        function getNativeRange(range) {\n            var nativeRange;\n            if (range instanceof DomRange) {\n                nativeRange = api.createNativeRange(range.getDocument());\n                nativeRange.setEnd(range.endContainer, range.endOffset);\n                nativeRange.setStart(range.startContainer, range.startOffset);\n            } else if (range instanceof WrappedRange) {\n                nativeRange = range.nativeRange;\n            } else if (features.implementsDomRange && (range instanceof dom.getWindow(range.startContainer).Range)) {\n                nativeRange = range;\n            }\n            return nativeRange;\n        }\n\n        function rangeContainsSingleElement(rangeNodes) {\n            if (!rangeNodes.length || rangeNodes[0].nodeType != 1) {\n                return false;\n            }\n            for (var i = 1, len = rangeNodes.length; i < len; ++i) {\n                if (!dom.isAncestorOf(rangeNodes[0], rangeNodes[i])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n\n        function getSingleElementFromRange(range) {\n            var nodes = range.getNodes();\n            if (!rangeContainsSingleElement(nodes)) {\n                throw module.createError(\"getSingleElementFromRange: range \" + range.inspect() + \" did not consist of a single element\");\n            }\n            return nodes[0];\n        }\n\n        // Simple, quick test which only needs to distinguish between a TextRange and a ControlRange\n        function isTextRange(range) {\n            return !!range && typeof range.text != \"undefined\";\n        }\n\n        function updateFromTextRange(sel, range) {\n            // Create a Range from the selected TextRange\n            var wrappedRange = new WrappedRange(range);\n            sel._ranges = [wrappedRange];\n\n            updateAnchorAndFocusFromRange(sel, wrappedRange, false);\n            sel.rangeCount = 1;\n            sel.isCollapsed = wrappedRange.collapsed;\n        }\n\n        function updateControlSelection(sel) {\n            // Update the wrapped selection based on what's now in the native selection\n            sel._ranges.length = 0;\n            if (sel.docSelection.type == \"None\") {\n                updateEmptySelection(sel);\n            } else {\n                var controlRange = sel.docSelection.createRange();\n                if (isTextRange(controlRange)) {\n                    // This case (where the selection type is \"Control\" and calling createRange() on the selection returns\n                    // a TextRange) can happen in IE 9. It happens, for example, when all elements in the selected\n                    // ControlRange have been removed from the ControlRange and removed from the document.\n                    updateFromTextRange(sel, controlRange);\n                } else {\n                    sel.rangeCount = controlRange.length;\n                    var range, doc = getDocument(controlRange.item(0));\n                    for (var i = 0; i < sel.rangeCount; ++i) {\n                        range = api.createRange(doc);\n                        range.selectNode(controlRange.item(i));\n                        sel._ranges.push(range);\n                    }\n                    sel.isCollapsed = sel.rangeCount == 1 && sel._ranges[0].collapsed;\n                    updateAnchorAndFocusFromRange(sel, sel._ranges[sel.rangeCount - 1], false);\n                }\n            }\n        }\n\n        function addRangeToControlSelection(sel, range) {\n            var controlRange = sel.docSelection.createRange();\n            var rangeElement = getSingleElementFromRange(range);\n\n            // Create a new ControlRange containing all the elements in the selected ControlRange plus the element\n            // contained by the supplied range\n            var doc = getDocument(controlRange.item(0));\n            var newControlRange = getBody(doc).createControlRange();\n            for (var i = 0, len = controlRange.length; i < len; ++i) {\n                newControlRange.add(controlRange.item(i));\n            }\n            try {\n                newControlRange.add(rangeElement);\n            } catch (ex) {\n                throw module.createError(\"addRange(): Element within the specified Range could not be added to control selection (does it have layout?)\");\n            }\n            newControlRange.select();\n\n            // Update the wrapped selection based on what's now in the native selection\n            updateControlSelection(sel);\n        }\n\n        var getSelectionRangeAt;\n\n        if (isHostMethod(testSelection, \"getRangeAt\")) {\n            // try/catch is present because getRangeAt() must have thrown an error in some browser and some situation.\n            // Unfortunately, I didn't write a comment about the specifics and am now scared to take it out. Let that be a\n            // lesson to us all, especially me.\n            getSelectionRangeAt = function(sel, index) {\n                try {\n                    return sel.getRangeAt(index);\n                } catch (ex) {\n                    return null;\n                }\n            };\n        } else if (selectionHasAnchorAndFocus) {\n            getSelectionRangeAt = function(sel) {\n                var doc = getDocument(sel.anchorNode);\n                var range = api.createRange(doc);\n                range.setStartAndEnd(sel.anchorNode, sel.anchorOffset, sel.focusNode, sel.focusOffset);\n\n                // Handle the case when the selection was selected backwards (from the end to the start in the\n                // document)\n                if (range.collapsed !== this.isCollapsed) {\n                    range.setStartAndEnd(sel.focusNode, sel.focusOffset, sel.anchorNode, sel.anchorOffset);\n                }\n\n                return range;\n            };\n        }\n\n        function WrappedSelection(selection, docSelection, win) {\n            this.nativeSelection = selection;\n            this.docSelection = docSelection;\n            this._ranges = [];\n            this.win = win;\n            this.refresh();\n        }\n\n        WrappedSelection.prototype = api.selectionPrototype;\n\n        function deleteProperties(sel) {\n            sel.win = sel.anchorNode = sel.focusNode = sel._ranges = null;\n            sel.rangeCount = sel.anchorOffset = sel.focusOffset = 0;\n            sel.detached = true;\n        }\n\n        var cachedRangySelections = [];\n\n        function actOnCachedSelection(win, action) {\n            var i = cachedRangySelections.length, cached, sel;\n            while (i--) {\n                cached = cachedRangySelections[i];\n                sel = cached.selection;\n                if (action == \"deleteAll\") {\n                    deleteProperties(sel);\n                } else if (cached.win == win) {\n                    if (action == \"delete\") {\n                        cachedRangySelections.splice(i, 1);\n                        return true;\n                    } else {\n                        return sel;\n                    }\n                }\n            }\n            if (action == \"deleteAll\") {\n                cachedRangySelections.length = 0;\n            }\n            return null;\n        }\n\n        var getSelection = function(win) {\n            // Check if the parameter is a Rangy Selection object\n            if (win && win instanceof WrappedSelection) {\n                win.refresh();\n                return win;\n            }\n\n            win = getWindow(win, \"getNativeSelection\");\n\n            var sel = actOnCachedSelection(win);\n            var nativeSel = getNativeSelection(win), docSel = implementsDocSelection ? getDocSelection(win) : null;\n            if (sel) {\n                sel.nativeSelection = nativeSel;\n                sel.docSelection = docSel;\n                sel.refresh();\n            } else {\n                sel = new WrappedSelection(nativeSel, docSel, win);\n                cachedRangySelections.push( { win: win, selection: sel } );\n            }\n            return sel;\n        };\n\n        api.getSelection = getSelection;\n\n        api.getIframeSelection = function(iframeEl) {\n            module.deprecationNotice(\"getIframeSelection()\", \"getSelection(iframeEl)\");\n            return api.getSelection(dom.getIframeWindow(iframeEl));\n        };\n\n        var selProto = WrappedSelection.prototype;\n\n        function createControlSelection(sel, ranges) {\n            // Ensure that the selection becomes of type \"Control\"\n            var doc = getDocument(ranges[0].startContainer);\n            var controlRange = getBody(doc).createControlRange();\n            for (var i = 0, el, len = ranges.length; i < len; ++i) {\n                el = getSingleElementFromRange(ranges[i]);\n                try {\n                    controlRange.add(el);\n                } catch (ex) {\n                    throw module.createError(\"setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)\");\n                }\n            }\n            controlRange.select();\n\n            // Update the wrapped selection based on what's now in the native selection\n            updateControlSelection(sel);\n        }\n\n        // Selecting a range\n        if (!useDocumentSelection && selectionHasAnchorAndFocus && util.areHostMethods(testSelection, [\"removeAllRanges\", \"addRange\"])) {\n            selProto.removeAllRanges = function() {\n                this.nativeSelection.removeAllRanges();\n                updateEmptySelection(this);\n            };\n\n            var addRangeBackward = function(sel, range) {\n                addRangeBackwardToNative(sel.nativeSelection, range);\n                sel.refresh();\n            };\n\n            if (selectionHasRangeCount) {\n                selProto.addRange = function(range, direction) {\n                    if (implementsControlRange && implementsDocSelection && this.docSelection.type == CONTROL) {\n                        addRangeToControlSelection(this, range);\n                    } else {\n                        if (isDirectionBackward(direction) && selectionHasExtend) {\n                            addRangeBackward(this, range);\n                        } else {\n                            var previousRangeCount;\n                            if (selectionSupportsMultipleRanges) {\n                                previousRangeCount = this.rangeCount;\n                            } else {\n                                this.removeAllRanges();\n                                previousRangeCount = 0;\n                            }\n                            // Clone the native range so that changing the selected range does not affect the selection.\n                            // This is contrary to the spec but is the only way to achieve consistency between browsers. See\n                            // issue 80.\n                            this.nativeSelection.addRange(getNativeRange(range).cloneRange());\n\n                            // Check whether adding the range was successful\n                            this.rangeCount = this.nativeSelection.rangeCount;\n\n                            if (this.rangeCount == previousRangeCount + 1) {\n                                // The range was added successfully\n\n                                // Check whether the range that we added to the selection is reflected in the last range extracted from\n                                // the selection\n                                if (api.config.checkSelectionRanges) {\n                                    var nativeRange = getSelectionRangeAt(this.nativeSelection, this.rangeCount - 1);\n                                    if (nativeRange && !rangesEqual(nativeRange, range)) {\n                                        // Happens in WebKit with, for example, a selection placed at the start of a text node\n                                        range = new WrappedRange(nativeRange);\n                                    }\n                                }\n                                this._ranges[this.rangeCount - 1] = range;\n                                updateAnchorAndFocusFromRange(this, range, selectionIsBackward(this.nativeSelection));\n                                this.isCollapsed = selectionIsCollapsed(this);\n                            } else {\n                                // The range was not added successfully. The simplest thing is to refresh\n                                this.refresh();\n                            }\n                        }\n                    }\n                };\n            } else {\n                selProto.addRange = function(range, direction) {\n                    if (isDirectionBackward(direction) && selectionHasExtend) {\n                        addRangeBackward(this, range);\n                    } else {\n                        this.nativeSelection.addRange(getNativeRange(range));\n                        this.refresh();\n                    }\n                };\n            }\n\n            selProto.setRanges = function(ranges) {\n                if (implementsControlRange && implementsDocSelection && ranges.length > 1) {\n                    createControlSelection(this, ranges);\n                } else {\n                    this.removeAllRanges();\n                    for (var i = 0, len = ranges.length; i < len; ++i) {\n                        this.addRange(ranges[i]);\n                    }\n                }\n            };\n        } else if (isHostMethod(testSelection, \"empty\") && isHostMethod(testRange, \"select\") &&\n                   implementsControlRange && useDocumentSelection) {\n\n            selProto.removeAllRanges = function() {\n                // Added try/catch as fix for issue #21\n                try {\n                    this.docSelection.empty();\n\n                    // Check for empty() not working (issue #24)\n                    if (this.docSelection.type != \"None\") {\n                        // Work around failure to empty a control selection by instead selecting a TextRange and then\n                        // calling empty()\n                        var doc;\n                        if (this.anchorNode) {\n                            doc = getDocument(this.anchorNode);\n                        } else if (this.docSelection.type == CONTROL) {\n                            var controlRange = this.docSelection.createRange();\n                            if (controlRange.length) {\n                                doc = getDocument( controlRange.item(0) );\n                            }\n                        }\n                        if (doc) {\n                            var textRange = getBody(doc).createTextRange();\n                            textRange.select();\n                            this.docSelection.empty();\n                        }\n                    }\n                } catch(ex) {}\n                updateEmptySelection(this);\n            };\n\n            selProto.addRange = function(range) {\n                if (this.docSelection.type == CONTROL) {\n                    addRangeToControlSelection(this, range);\n                } else {\n                    api.WrappedTextRange.rangeToTextRange(range).select();\n                    this._ranges[0] = range;\n                    this.rangeCount = 1;\n                    this.isCollapsed = this._ranges[0].collapsed;\n                    updateAnchorAndFocusFromRange(this, range, false);\n                }\n            };\n\n            selProto.setRanges = function(ranges) {\n                this.removeAllRanges();\n                var rangeCount = ranges.length;\n                if (rangeCount > 1) {\n                    createControlSelection(this, ranges);\n                } else if (rangeCount) {\n                    this.addRange(ranges[0]);\n                }\n            };\n        } else {\n            module.fail(\"No means of selecting a Range or TextRange was found\");\n            return false;\n        }\n\n        selProto.getRangeAt = function(index) {\n            if (index < 0 || index >= this.rangeCount) {\n                throw new DOMException(\"INDEX_SIZE_ERR\");\n            } else {\n                // Clone the range to preserve selection-range independence. See issue 80.\n                return this._ranges[index].cloneRange();\n            }\n        };\n\n        var refreshSelection;\n\n        if (useDocumentSelection) {\n            refreshSelection = function(sel) {\n                var range;\n                if (api.isSelectionValid(sel.win)) {\n                    range = sel.docSelection.createRange();\n                } else {\n                    range = getBody(sel.win.document).createTextRange();\n                    range.collapse(true);\n                }\n\n                if (sel.docSelection.type == CONTROL) {\n                    updateControlSelection(sel);\n                } else if (isTextRange(range)) {\n                    updateFromTextRange(sel, range);\n                } else {\n                    updateEmptySelection(sel);\n                }\n            };\n        } else if (isHostMethod(testSelection, \"getRangeAt\") && typeof testSelection.rangeCount == NUMBER) {\n            refreshSelection = function(sel) {\n                if (implementsControlRange && implementsDocSelection && sel.docSelection.type == CONTROL) {\n                    updateControlSelection(sel);\n                } else {\n                    sel._ranges.length = sel.rangeCount = sel.nativeSelection.rangeCount;\n                    if (sel.rangeCount) {\n                        for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                            sel._ranges[i] = new api.WrappedRange(sel.nativeSelection.getRangeAt(i));\n                        }\n                        updateAnchorAndFocusFromRange(sel, sel._ranges[sel.rangeCount - 1], selectionIsBackward(sel.nativeSelection));\n                        sel.isCollapsed = selectionIsCollapsed(sel);\n                    } else {\n                        updateEmptySelection(sel);\n                    }\n                }\n            };\n        } else if (selectionHasAnchorAndFocus && typeof testSelection.isCollapsed == BOOLEAN && typeof testRange.collapsed == BOOLEAN && features.implementsDomRange) {\n            refreshSelection = function(sel) {\n                var range, nativeSel = sel.nativeSelection;\n                if (nativeSel.anchorNode) {\n                    range = getSelectionRangeAt(nativeSel, 0);\n                    sel._ranges = [range];\n                    sel.rangeCount = 1;\n                    updateAnchorAndFocusFromNativeSelection(sel);\n                    sel.isCollapsed = selectionIsCollapsed(sel);\n                } else {\n                    updateEmptySelection(sel);\n                }\n            };\n        } else {\n            module.fail(\"No means of obtaining a Range or TextRange from the user's selection was found\");\n            return false;\n        }\n\n        selProto.refresh = function(checkForChanges) {\n            var oldRanges = checkForChanges ? this._ranges.slice(0) : null;\n            var oldAnchorNode = this.anchorNode, oldAnchorOffset = this.anchorOffset;\n\n            refreshSelection(this);\n            if (checkForChanges) {\n                // Check the range count first\n                var i = oldRanges.length;\n                if (i != this._ranges.length) {\n                    return true;\n                }\n\n                // Now check the direction. Checking the anchor position is the same is enough since we're checking all the\n                // ranges after this\n                if (this.anchorNode != oldAnchorNode || this.anchorOffset != oldAnchorOffset) {\n                    return true;\n                }\n\n                // Finally, compare each range in turn\n                while (i--) {\n                    if (!rangesEqual(oldRanges[i], this._ranges[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        };\n\n        // Removal of a single range\n        var removeRangeManually = function(sel, range) {\n            var ranges = sel.getAllRanges();\n            sel.removeAllRanges();\n            for (var i = 0, len = ranges.length; i < len; ++i) {\n                if (!rangesEqual(range, ranges[i])) {\n                    sel.addRange(ranges[i]);\n                }\n            }\n            if (!sel.rangeCount) {\n                updateEmptySelection(sel);\n            }\n        };\n\n        if (implementsControlRange && implementsDocSelection) {\n            selProto.removeRange = function(range) {\n                if (this.docSelection.type == CONTROL) {\n                    var controlRange = this.docSelection.createRange();\n                    var rangeElement = getSingleElementFromRange(range);\n\n                    // Create a new ControlRange containing all the elements in the selected ControlRange minus the\n                    // element contained by the supplied range\n                    var doc = getDocument(controlRange.item(0));\n                    var newControlRange = getBody(doc).createControlRange();\n                    var el, removed = false;\n                    for (var i = 0, len = controlRange.length; i < len; ++i) {\n                        el = controlRange.item(i);\n                        if (el !== rangeElement || removed) {\n                            newControlRange.add(controlRange.item(i));\n                        } else {\n                            removed = true;\n                        }\n                    }\n                    newControlRange.select();\n\n                    // Update the wrapped selection based on what's now in the native selection\n                    updateControlSelection(this);\n                } else {\n                    removeRangeManually(this, range);\n                }\n            };\n        } else {\n            selProto.removeRange = function(range) {\n                removeRangeManually(this, range);\n            };\n        }\n\n        // Detecting if a selection is backward\n        var selectionIsBackward;\n        if (!useDocumentSelection && selectionHasAnchorAndFocus && features.implementsDomRange) {\n            selectionIsBackward = winSelectionIsBackward;\n\n            selProto.isBackward = function() {\n                return selectionIsBackward(this);\n            };\n        } else {\n            selectionIsBackward = selProto.isBackward = function() {\n                return false;\n            };\n        }\n\n        // Create an alias for backwards compatibility. From 1.3, everything is \"backward\" rather than \"backwards\"\n        selProto.isBackwards = selProto.isBackward;\n\n        // Selection stringifier\n        // This is conformant to the old HTML5 selections draft spec but differs from WebKit and Mozilla's implementation.\n        // The current spec does not yet define this method.\n        selProto.toString = function() {\n            var rangeTexts = [];\n            for (var i = 0, len = this.rangeCount; i < len; ++i) {\n                rangeTexts[i] = \"\" + this._ranges[i];\n            }\n            return rangeTexts.join(\"\");\n        };\n\n        function assertNodeInSameDocument(sel, node) {\n            if (sel.win.document != getDocument(node)) {\n                throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n            }\n        }\n\n        // No current browser conforms fully to the spec for this method, so Rangy's own method is always used\n        selProto.collapse = function(node, offset) {\n            assertNodeInSameDocument(this, node);\n            var range = api.createRange(node);\n            range.collapseToPoint(node, offset);\n            this.setSingleRange(range);\n            this.isCollapsed = true;\n        };\n\n        selProto.collapseToStart = function() {\n            if (this.rangeCount) {\n                var range = this._ranges[0];\n                this.collapse(range.startContainer, range.startOffset);\n            } else {\n                throw new DOMException(\"INVALID_STATE_ERR\");\n            }\n        };\n\n        selProto.collapseToEnd = function() {\n            if (this.rangeCount) {\n                var range = this._ranges[this.rangeCount - 1];\n                this.collapse(range.endContainer, range.endOffset);\n            } else {\n                throw new DOMException(\"INVALID_STATE_ERR\");\n            }\n        };\n\n        // The spec is very specific on how selectAllChildren should be implemented so the native implementation is\n        // never used by Rangy.\n        selProto.selectAllChildren = function(node) {\n            assertNodeInSameDocument(this, node);\n            var range = api.createRange(node);\n            range.selectNodeContents(node);\n            this.setSingleRange(range);\n        };\n\n        selProto.deleteFromDocument = function() {\n            // Sepcial behaviour required for IE's control selections\n            if (implementsControlRange && implementsDocSelection && this.docSelection.type == CONTROL) {\n                var controlRange = this.docSelection.createRange();\n                var element;\n                while (controlRange.length) {\n                    element = controlRange.item(0);\n                    controlRange.remove(element);\n                    element.parentNode.removeChild(element);\n                }\n                this.refresh();\n            } else if (this.rangeCount) {\n                var ranges = this.getAllRanges();\n                if (ranges.length) {\n                    this.removeAllRanges();\n                    for (var i = 0, len = ranges.length; i < len; ++i) {\n                        ranges[i].deleteContents();\n                    }\n                    // The spec says nothing about what the selection should contain after calling deleteContents on each\n                    // range. Firefox moves the selection to where the final selected range was, so we emulate that\n                    this.addRange(ranges[len - 1]);\n                }\n            }\n        };\n\n        // The following are non-standard extensions\n        selProto.eachRange = function(func, returnValue) {\n            for (var i = 0, len = this._ranges.length; i < len; ++i) {\n                if ( func( this.getRangeAt(i) ) ) {\n                    return returnValue;\n                }\n            }\n        };\n\n        selProto.getAllRanges = function() {\n            var ranges = [];\n            this.eachRange(function(range) {\n                ranges.push(range);\n            });\n            return ranges;\n        };\n\n        selProto.setSingleRange = function(range, direction) {\n            this.removeAllRanges();\n            this.addRange(range, direction);\n        };\n\n        selProto.callMethodOnEachRange = function(methodName, params) {\n            var results = [];\n            this.eachRange( function(range) {\n                results.push( range[methodName].apply(range, params) );\n            } );\n            return results;\n        };\n        \n        function createStartOrEndSetter(isStart) {\n            return function(node, offset) {\n                var range;\n                if (this.rangeCount) {\n                    range = this.getRangeAt(0);\n                    range[\"set\" + (isStart ? \"Start\" : \"End\")](node, offset);\n                } else {\n                    range = api.createRange(this.win.document);\n                    range.setStartAndEnd(node, offset);\n                }\n                this.setSingleRange(range, this.isBackward());\n            };\n        }\n\n        selProto.setStart = createStartOrEndSetter(true);\n        selProto.setEnd = createStartOrEndSetter(false);\n        \n        // Add select() method to Range prototype. Any existing selection will be removed.\n        api.rangePrototype.select = function(direction) {\n            getSelection( this.getDocument() ).setSingleRange(this, direction);\n        };\n\n        selProto.changeEachRange = function(func) {\n            var ranges = [];\n            var backward = this.isBackward();\n\n            this.eachRange(function(range) {\n                func(range);\n                ranges.push(range);\n            });\n\n            this.removeAllRanges();\n            if (backward && ranges.length == 1) {\n                this.addRange(ranges[0], \"backward\");\n            } else {\n                this.setRanges(ranges);\n            }\n        };\n\n        selProto.containsNode = function(node, allowPartial) {\n            return this.eachRange( function(range) {\n                return range.containsNode(node, allowPartial);\n            }, true ) || false;\n        };\n\n        selProto.getBookmark = function(containerNode) {\n            return {\n                backward: this.isBackward(),\n                rangeBookmarks: this.callMethodOnEachRange(\"getBookmark\", [containerNode])\n            };\n        };\n\n        selProto.moveToBookmark = function(bookmark) {\n            var selRanges = [];\n            for (var i = 0, rangeBookmark, range; rangeBookmark = bookmark.rangeBookmarks[i++]; ) {\n                range = api.createRange(this.win);\n                range.moveToBookmark(rangeBookmark);\n                selRanges.push(range);\n            }\n            if (bookmark.backward) {\n                this.setSingleRange(selRanges[0], \"backward\");\n            } else {\n                this.setRanges(selRanges);\n            }\n        };\n\n        selProto.toHtml = function() {\n            var rangeHtmls = [];\n            this.eachRange(function(range) {\n                rangeHtmls.push( DomRange.toHtml(range) );\n            });\n            return rangeHtmls.join(\"\");\n        };\n\n        if (features.implementsTextRange) {\n            selProto.getNativeTextRange = function() {\n                var sel, textRange;\n                if ( (sel = this.docSelection) ) {\n                    var range = sel.createRange();\n                    if (isTextRange(range)) {\n                        return range;\n                    } else {\n                        throw module.createError(\"getNativeTextRange: selection is a control selection\"); \n                    }\n                } else if (this.rangeCount > 0) {\n                    return api.WrappedTextRange.rangeToTextRange( this.getRangeAt(0) );\n                } else {\n                    throw module.createError(\"getNativeTextRange: selection contains no range\");\n                }\n            };\n        }\n\n        function inspect(sel) {\n            var rangeInspects = [];\n            var anchor = new DomPosition(sel.anchorNode, sel.anchorOffset);\n            var focus = new DomPosition(sel.focusNode, sel.focusOffset);\n            var name = (typeof sel.getName == \"function\") ? sel.getName() : \"Selection\";\n\n            if (typeof sel.rangeCount != \"undefined\") {\n                for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                    rangeInspects[i] = DomRange.inspect(sel.getRangeAt(i));\n                }\n            }\n            return \"[\" + name + \"(Ranges: \" + rangeInspects.join(\", \") +\n                    \")(anchor: \" + anchor.inspect() + \", focus: \" + focus.inspect() + \"]\";\n        }\n\n        selProto.getName = function() {\n            return \"WrappedSelection\";\n        };\n\n        selProto.inspect = function() {\n            return inspect(this);\n        };\n\n        selProto.detach = function() {\n            actOnCachedSelection(this.win, \"delete\");\n            deleteProperties(this);\n        };\n\n        WrappedSelection.detachAll = function() {\n            actOnCachedSelection(null, \"deleteAll\");\n        };\n\n        WrappedSelection.inspect = inspect;\n        WrappedSelection.isDirectionBackward = isDirectionBackward;\n\n        api.Selection = WrappedSelection;\n\n        api.selectionPrototype = selProto;\n\n        api.addShimListener(function(win) {\n            if (typeof win.getSelection == \"undefined\") {\n                win.getSelection = function() {\n                    return getSelection(win);\n                };\n            }\n            win = null;\n        });\n    });\n    \n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    return api;\n}, this);;/**\n * Selection save and restore module for Rangy.\n * Saves and restores user selections using marker invisible elements in the DOM.\n *\n * Part of Rangy, a cross-browser JavaScript range and selection library\n * http://code.google.com/p/rangy/\n *\n * Depends on Rangy core.\n *\n * Copyright 2014, Tim Down\n * Licensed under the MIT license.\n * Version: 1.3alpha.20140804\n * Build date: 4 August 2014\n */\n(function(factory, global) {\n    if (typeof define == \"function\" && define.amd) {\n        // AMD. Register as an anonymous module with a dependency on Rangy.\n        define([\"rangy\"], factory);\n        /*\n         } else if (typeof exports == \"object\") {\n         // Node/CommonJS style for Browserify\n         module.exports = factory;\n         */\n    } else {\n        // No AMD or CommonJS support so we use the rangy global variable\n        factory(global.rangy);\n    }\n})(function(rangy) {\n    rangy.createModule(\"SaveRestore\", [\"WrappedRange\"], function(api, module) {\n        var dom = api.dom;\n\n        var markerTextChar = \"\\ufeff\";\n\n        function gEBI(id, doc) {\n            return (doc || document).getElementById(id);\n        }\n\n        function insertRangeBoundaryMarker(range, atStart) {\n            var markerId = \"selectionBoundary_\" + (+new Date()) + \"_\" + (\"\" + Math.random()).slice(2);\n            var markerEl;\n            var doc = dom.getDocument(range.startContainer);\n\n            // Clone the Range and collapse to the appropriate boundary point\n            var boundaryRange = range.cloneRange();\n            boundaryRange.collapse(atStart);\n\n            // Create the marker element containing a single invisible character using DOM methods and insert it\n            markerEl = doc.createElement(\"span\");\n            markerEl.id = markerId;\n            markerEl.style.lineHeight = \"0\";\n            markerEl.style.display = \"none\";\n            markerEl.className = \"rangySelectionBoundary\";\n            markerEl.appendChild(doc.createTextNode(markerTextChar));\n\n            boundaryRange.insertNode(markerEl);\n            return markerEl;\n        }\n\n        function setRangeBoundary(doc, range, markerId, atStart) {\n            var markerEl = gEBI(markerId, doc);\n            if (markerEl) {\n                range[atStart ? \"setStartBefore\" : \"setEndBefore\"](markerEl);\n                markerEl.parentNode.removeChild(markerEl);\n            } else {\n                module.warn(\"Marker element has been removed. Cannot restore selection.\");\n            }\n        }\n\n        function compareRanges(r1, r2) {\n            return r2.compareBoundaryPoints(r1.START_TO_START, r1);\n        }\n\n        function saveRange(range, backward) {\n            var startEl, endEl, doc = api.DomRange.getRangeDocument(range), text = range.toString();\n\n            if (range.collapsed) {\n                endEl = insertRangeBoundaryMarker(range, false);\n                return {\n                    document: doc,\n                    markerId: endEl.id,\n                    collapsed: true\n                };\n            } else {\n                endEl = insertRangeBoundaryMarker(range, false);\n                startEl = insertRangeBoundaryMarker(range, true);\n\n                return {\n                    document: doc,\n                    startMarkerId: startEl.id,\n                    endMarkerId: endEl.id,\n                    collapsed: false,\n                    backward: backward,\n                    toString: function() {\n                        return \"original text: '\" + text + \"', new text: '\" + range.toString() + \"'\";\n                    }\n                };\n            }\n        }\n\n        function restoreRange(rangeInfo, normalize) {\n            var doc = rangeInfo.document;\n            if (typeof normalize == \"undefined\") {\n                normalize = true;\n            }\n            var range = api.createRange(doc);\n            if (rangeInfo.collapsed) {\n                var markerEl = gEBI(rangeInfo.markerId, doc);\n                if (markerEl) {\n                    markerEl.style.display = \"inline\";\n                    var previousNode = markerEl.previousSibling;\n\n                    // Workaround for issue 17\n                    if (previousNode && previousNode.nodeType == 3) {\n                        markerEl.parentNode.removeChild(markerEl);\n                        range.collapseToPoint(previousNode, previousNode.length);\n                    } else {\n                        range.collapseBefore(markerEl);\n                        markerEl.parentNode.removeChild(markerEl);\n                    }\n                } else {\n                    module.warn(\"Marker element has been removed. Cannot restore selection.\");\n                }\n            } else {\n                setRangeBoundary(doc, range, rangeInfo.startMarkerId, true);\n                setRangeBoundary(doc, range, rangeInfo.endMarkerId, false);\n            }\n\n            if (normalize) {\n                range.normalizeBoundaries();\n            }\n\n            return range;\n        }\n\n        function saveRanges(ranges, backward) {\n            var rangeInfos = [], range, doc;\n\n            // Order the ranges by position within the DOM, latest first, cloning the array to leave the original untouched\n            ranges = ranges.slice(0);\n            ranges.sort(compareRanges);\n\n            for (var i = 0, len = ranges.length; i < len; ++i) {\n                rangeInfos[i] = saveRange(ranges[i], backward);\n            }\n\n            // Now that all the markers are in place and DOM manipulation over, adjust each range's boundaries to lie\n            // between its markers\n            for (i = len - 1; i >= 0; --i) {\n                range = ranges[i];\n                doc = api.DomRange.getRangeDocument(range);\n                if (range.collapsed) {\n                    range.collapseAfter(gEBI(rangeInfos[i].markerId, doc));\n                } else {\n                    range.setEndBefore(gEBI(rangeInfos[i].endMarkerId, doc));\n                    range.setStartAfter(gEBI(rangeInfos[i].startMarkerId, doc));\n                }\n            }\n\n            return rangeInfos;\n        }\n\n        function saveSelection(win) {\n            if (!api.isSelectionValid(win)) {\n                module.warn(\"Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus.\");\n                return null;\n            }\n            var sel = api.getSelection(win);\n            var ranges = sel.getAllRanges();\n            var backward = (ranges.length == 1 && sel.isBackward());\n\n            var rangeInfos = saveRanges(ranges, backward);\n\n            // Ensure current selection is unaffected\n            if (backward) {\n                sel.setSingleRange(ranges[0], \"backward\");\n            } else {\n                sel.setRanges(ranges);\n            }\n\n            return {\n                win: win,\n                rangeInfos: rangeInfos,\n                restored: false\n            };\n        }\n\n        function restoreRanges(rangeInfos) {\n            var ranges = [];\n\n            // Ranges are in reverse order of appearance in the DOM. We want to restore earliest first to avoid\n            // normalization affecting previously restored ranges.\n            var rangeCount = rangeInfos.length;\n\n            for (var i = rangeCount - 1; i >= 0; i--) {\n                ranges[i] = restoreRange(rangeInfos[i], true);\n            }\n\n            return ranges;\n        }\n\n        function restoreSelection(savedSelection, preserveDirection) {\n            if (!savedSelection.restored) {\n                var rangeInfos = savedSelection.rangeInfos;\n                var sel = api.getSelection(savedSelection.win);\n                var ranges = restoreRanges(rangeInfos), rangeCount = rangeInfos.length;\n\n                if (rangeCount == 1 && preserveDirection && api.features.selectionHasExtend && rangeInfos[0].backward) {\n                    sel.removeAllRanges();\n                    sel.addRange(ranges[0], true);\n                } else {\n                    sel.setRanges(ranges);\n                }\n\n                savedSelection.restored = true;\n            }\n        }\n\n        function removeMarkerElement(doc, markerId) {\n            var markerEl = gEBI(markerId, doc);\n            if (markerEl) {\n                markerEl.parentNode.removeChild(markerEl);\n            }\n        }\n\n        function removeMarkers(savedSelection) {\n            var rangeInfos = savedSelection.rangeInfos;\n            for (var i = 0, len = rangeInfos.length, rangeInfo; i < len; ++i) {\n                rangeInfo = rangeInfos[i];\n                if (rangeInfo.collapsed) {\n                    removeMarkerElement(savedSelection.doc, rangeInfo.markerId);\n                } else {\n                    removeMarkerElement(savedSelection.doc, rangeInfo.startMarkerId);\n                    removeMarkerElement(savedSelection.doc, rangeInfo.endMarkerId);\n                }\n            }\n        }\n\n        api.util.extend(api, {\n            saveRange: saveRange,\n            restoreRange: restoreRange,\n            saveRanges: saveRanges,\n            restoreRanges: restoreRanges,\n            saveSelection: saveSelection,\n            restoreSelection: restoreSelection,\n            removeMarkerElement: removeMarkerElement,\n            removeMarkers: removeMarkers\n        });\n    });\n    \n}, this);;/*\n\tBase.js, version 1.1a\n\tCopyright 2006-2010, Dean Edwards\n\tLicense: http://www.opensource.org/licenses/mit-license.php\n*/\n\nvar Base = function() {\n\t// dummy\n};\n\nBase.extend = function(_instance, _static) { // subclass\n\tvar extend = Base.prototype.extend;\n\t\n\t// build the prototype\n\tBase._prototyping = true;\n\tvar proto = new this;\n\textend.call(proto, _instance);\n  proto.base = function() {\n    // call this method from any other method to invoke that method's ancestor\n  };\n\tdelete Base._prototyping;\n\t\n\t// create the wrapper for the constructor function\n\t//var constructor = proto.constructor.valueOf(); //-dean\n\tvar constructor = proto.constructor;\n\tvar klass = proto.constructor = function() {\n\t\tif (!Base._prototyping) {\n\t\t\tif (this._constructing || this.constructor == klass) { // instantiation\n\t\t\t\tthis._constructing = true;\n\t\t\t\tconstructor.apply(this, arguments);\n\t\t\t\tdelete this._constructing;\n\t\t\t} else if (arguments[0] != null) { // casting\n\t\t\t\treturn (arguments[0].extend || extend).call(arguments[0], proto);\n\t\t\t}\n\t\t}\n\t};\n\t\n\t// build the class interface\n\tklass.ancestor = this;\n\tklass.extend = this.extend;\n\tklass.forEach = this.forEach;\n\tklass.implement = this.implement;\n\tklass.prototype = proto;\n\tklass.toString = this.toString;\n\tklass.valueOf = function(type) {\n\t\t//return (type == \"object\") ? klass : constructor; //-dean\n\t\treturn (type == \"object\") ? klass : constructor.valueOf();\n\t};\n\textend.call(klass, _static);\n\t// class initialisation\n\tif (typeof klass.init == \"function\") klass.init();\n\treturn klass;\n};\n\nBase.prototype = {\t\n\textend: function(source, value) {\n\t\tif (arguments.length > 1) { // extending with a name/value pair\n\t\t\tvar ancestor = this[source];\n\t\t\tif (ancestor && (typeof value == \"function\") && // overriding a method?\n\t\t\t\t// the valueOf() comparison is to avoid circular references\n\t\t\t\t(!ancestor.valueOf || ancestor.valueOf() != value.valueOf()) &&\n\t\t\t\t/\\bbase\\b/.test(value)) {\n\t\t\t\t// get the underlying method\n\t\t\t\tvar method = value.valueOf();\n\t\t\t\t// override\n\t\t\t\tvalue = function() {\n\t\t\t\t\tvar previous = this.base || Base.prototype.base;\n\t\t\t\t\tthis.base = ancestor;\n\t\t\t\t\tvar returnValue = method.apply(this, arguments);\n\t\t\t\t\tthis.base = previous;\n\t\t\t\t\treturn returnValue;\n\t\t\t\t};\n\t\t\t\t// point to the underlying method\n\t\t\t\tvalue.valueOf = function(type) {\n\t\t\t\t\treturn (type == \"object\") ? value : method;\n\t\t\t\t};\n\t\t\t\tvalue.toString = Base.toString;\n\t\t\t}\n\t\t\tthis[source] = value;\n\t\t} else if (source) { // extending with an object literal\n\t\t\tvar extend = Base.prototype.extend;\n\t\t\t// if this object has a customised extend method then use it\n\t\t\tif (!Base._prototyping && typeof this != \"function\") {\n\t\t\t\textend = this.extend || extend;\n\t\t\t}\n\t\t\tvar proto = {toSource: null};\n\t\t\t// do the \"toString\" and other methods manually\n\t\t\tvar hidden = [\"constructor\", \"toString\", \"valueOf\"];\n\t\t\t// if we are prototyping then include the constructor\n\t\t\tvar i = Base._prototyping ? 0 : 1;\n\t\t\twhile (key = hidden[i++]) {\n\t\t\t\tif (source[key] != proto[key]) {\n\t\t\t\t\textend.call(this, key, source[key]);\n\n\t\t\t\t}\n\t\t\t}\n\t\t\t// copy each of the source object's properties to this object\n\t\t\tfor (var key in source) {\n\t\t\t\tif (!proto[key]) extend.call(this, key, source[key]);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n};\n\n// initialise\nBase = Base.extend({\n\tconstructor: function() {\n\t\tthis.extend(arguments[0]);\n\t}\n}, {\n\tancestor: Object,\n\tversion: \"1.1\",\n\t\n\tforEach: function(object, block, context) {\n\t\tfor (var key in object) {\n\t\t\tif (this.prototype[key] === undefined) {\n\t\t\t\tblock.call(context, object[key], key, object);\n\t\t\t}\n\t\t}\n\t},\n\t\t\n\timplement: function() {\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tif (typeof arguments[i] == \"function\") {\n\t\t\t\t// if it's a function, call it\n\t\t\t\targuments[i](this.prototype);\n\t\t\t} else {\n\t\t\t\t// add the interface using the extend method\n\t\t\t\tthis.prototype.extend(arguments[i]);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\t\n\ttoString: function() {\n\t\treturn String(this.valueOf());\n\t}\n});;/**\n * Detect browser support for specific features\n */\nwysihtml5.browser = (function() {\n  var userAgent   = navigator.userAgent,\n      testElement = document.createElement(\"div\"),\n      // Browser sniffing is unfortunately needed since some behaviors are impossible to feature detect\n      isGecko     = userAgent.indexOf(\"Gecko\")        !== -1 && userAgent.indexOf(\"KHTML\") === -1,\n      isWebKit    = userAgent.indexOf(\"AppleWebKit/\") !== -1,\n      isChrome    = userAgent.indexOf(\"Chrome/\")      !== -1,\n      isOpera     = userAgent.indexOf(\"Opera/\")       !== -1;\n\n  function iosVersion(userAgent) {\n    return +((/ipad|iphone|ipod/.test(userAgent) && userAgent.match(/ os (\\d+).+? like mac os x/)) || [undefined, 0])[1];\n  }\n\n  function androidVersion(userAgent) {\n    return +(userAgent.match(/android (\\d+)/) || [undefined, 0])[1];\n  }\n\n  function isIE(version, equation) {\n    var rv = -1,\n        re;\n\n    if (navigator.appName == 'Microsoft Internet Explorer') {\n      re = new RegExp(\"MSIE ([0-9]{1,}[\\.0-9]{0,})\");\n    } else if (navigator.appName == 'Netscape') {\n      re = new RegExp(\"Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})\");\n    }\n\n    if (re && re.exec(navigator.userAgent) != null) {\n      rv = parseFloat(RegExp.$1);\n    }\n\n    if (rv === -1) { return false; }\n    if (!version) { return true; }\n    if (!equation) { return version === rv; }\n    if (equation === \"<\") { return version < rv; }\n    if (equation === \">\") { return version > rv; }\n    if (equation === \"<=\") { return version <= rv; }\n    if (equation === \">=\") { return version >= rv; }\n  }\n\n  return {\n    // Static variable needed, publicly accessible, to be able override it in unit tests\n    USER_AGENT: userAgent,\n\n    /**\n     * Exclude browsers that are not capable of displaying and handling\n     * contentEditable as desired:\n     *    - iPhone, iPad (tested iOS 4.2.2) and Android (tested 2.2) refuse to make contentEditables focusable\n     *    - IE < 8 create invalid markup and crash randomly from time to time\n     *\n     * @return {Boolean}\n     */\n    supported: function() {\n      var userAgent                   = this.USER_AGENT.toLowerCase(),\n          // Essential for making html elements editable\n          hasContentEditableSupport   = \"contentEditable\" in testElement,\n          // Following methods are needed in order to interact with the contentEditable area\n          hasEditingApiSupport        = document.execCommand && document.queryCommandSupported && document.queryCommandState,\n          // document selector apis are only supported by IE 8+, Safari 4+, Chrome and Firefox 3.5+\n          hasQuerySelectorSupport     = document.querySelector && document.querySelectorAll,\n          // contentEditable is unusable in mobile browsers (tested iOS 4.2.2, Android 2.2, Opera Mobile, WebOS 3.05)\n          isIncompatibleMobileBrowser = (this.isIos() && iosVersion(userAgent) < 5) || (this.isAndroid() && androidVersion(userAgent) < 4) || userAgent.indexOf(\"opera mobi\") !== -1 || userAgent.indexOf(\"hpwos/\") !== -1;\n      return hasContentEditableSupport\n        && hasEditingApiSupport\n        && hasQuerySelectorSupport\n        && !isIncompatibleMobileBrowser;\n    },\n\n    isTouchDevice: function() {\n      return this.supportsEvent(\"touchmove\");\n    },\n\n    isIos: function() {\n      return (/ipad|iphone|ipod/i).test(this.USER_AGENT);\n    },\n\n    isAndroid: function() {\n      return this.USER_AGENT.indexOf(\"Android\") !== -1;\n    },\n\n    /**\n     * Whether the browser supports sandboxed iframes\n     * Currently only IE 6+ offers such feature <iframe security=\"restricted\">\n     *\n     * http://msdn.microsoft.com/en-us/library/ms534622(v=vs.85).aspx\n     * http://blogs.msdn.com/b/ie/archive/2008/01/18/using-frames-more-securely.aspx\n     *\n     * HTML5 sandboxed iframes are still buggy and their DOM is not reachable from the outside (except when using postMessage)\n     */\n    supportsSandboxedIframes: function() {\n      return isIE();\n    },\n\n    /**\n     * IE6+7 throw a mixed content warning when the src of an iframe\n     * is empty/unset or about:blank\n     * window.querySelector is implemented as of IE8\n     */\n    throwsMixedContentWarningWhenIframeSrcIsEmpty: function() {\n      return !(\"querySelector\" in document);\n    },\n\n    /**\n     * Whether the caret is correctly displayed in contentEditable elements\n     * Firefox sometimes shows a huge caret in the beginning after focusing\n     */\n    displaysCaretInEmptyContentEditableCorrectly: function() {\n      return isIE();\n    },\n\n    /**\n     * Opera and IE are the only browsers who offer the css value\n     * in the original unit, thx to the currentStyle object\n     * All other browsers provide the computed style in px via window.getComputedStyle\n     */\n    hasCurrentStyleProperty: function() {\n      return \"currentStyle\" in testElement;\n    },\n\n    /**\n     * Firefox on OSX navigates through history when hitting CMD + Arrow right/left\n     */\n    hasHistoryIssue: function() {\n      return isGecko && navigator.platform.substr(0, 3) === \"Mac\";\n    },\n\n    /**\n     * Whether the browser inserts a <br> when pressing enter in a contentEditable element\n     */\n    insertsLineBreaksOnReturn: function() {\n      return isGecko;\n    },\n\n    supportsPlaceholderAttributeOn: function(element) {\n      return \"placeholder\" in element;\n    },\n\n    supportsEvent: function(eventName) {\n      return \"on\" + eventName in testElement || (function() {\n        testElement.setAttribute(\"on\" + eventName, \"return;\");\n        return typeof(testElement[\"on\" + eventName]) === \"function\";\n      })();\n    },\n\n    /**\n     * Opera doesn't correctly fire focus/blur events when clicking in- and outside of iframe\n     */\n    supportsEventsInIframeCorrectly: function() {\n      return !isOpera;\n    },\n\n    /**\n     * Everything below IE9 doesn't know how to treat HTML5 tags\n     *\n     * @param {Object} context The document object on which to check HTML5 support\n     *\n     * @example\n     *    wysihtml5.browser.supportsHTML5Tags(document);\n     */\n    supportsHTML5Tags: function(context) {\n      var element = context.createElement(\"div\"),\n          html5   = \"<article>foo</article>\";\n      element.innerHTML = html5;\n      return element.innerHTML.toLowerCase() === html5;\n    },\n\n    /**\n     * Checks whether a document supports a certain queryCommand\n     * In particular, Opera needs a reference to a document that has a contentEditable in it's dom tree\n     * in oder to report correct results\n     *\n     * @param {Object} doc Document object on which to check for a query command\n     * @param {String} command The query command to check for\n     * @return {Boolean}\n     *\n     * @example\n     *    wysihtml5.browser.supportsCommand(document, \"bold\");\n     */\n    supportsCommand: (function() {\n      // Following commands are supported but contain bugs in some browsers\n      var buggyCommands = {\n        // formatBlock fails with some tags (eg. <blockquote>)\n        \"formatBlock\":          isIE(10, \"<=\"),\n         // When inserting unordered or ordered lists in Firefox, Chrome or Safari, the current selection or line gets\n         // converted into a list (<ul><li>...</li></ul>, <ol><li>...</li></ol>)\n         // IE and Opera act a bit different here as they convert the entire content of the current block element into a list\n        \"insertUnorderedList\":  isIE(),\n        \"insertOrderedList\":    isIE()\n      };\n\n      // Firefox throws errors for queryCommandSupported, so we have to build up our own object of supported commands\n      var supported = {\n        \"insertHTML\": isGecko\n      };\n\n      return function(doc, command) {\n        var isBuggy = buggyCommands[command];\n        if (!isBuggy) {\n          // Firefox throws errors when invoking queryCommandSupported or queryCommandEnabled\n          try {\n            return doc.queryCommandSupported(command);\n          } catch(e1) {}\n\n          try {\n            return doc.queryCommandEnabled(command);\n          } catch(e2) {\n            return !!supported[command];\n          }\n        }\n        return false;\n      };\n    })(),\n\n    /**\n     * IE: URLs starting with:\n     *    www., http://, https://, ftp://, gopher://, mailto:, new:, snews:, telnet:, wasis:, file://,\n     *    nntp://, newsrc:, ldap://, ldaps://, outlook:, mic:// and url:\n     * will automatically be auto-linked when either the user inserts them via copy&paste or presses the\n     * space bar when the caret is directly after such an url.\n     * This behavior cannot easily be avoided in IE < 9 since the logic is hardcoded in the mshtml.dll\n     * (related blog post on msdn\n     * http://blogs.msdn.com/b/ieinternals/archive/2009/09/17/prevent-automatic-hyperlinking-in-contenteditable-html.aspx).\n     */\n    doesAutoLinkingInContentEditable: function() {\n      return isIE();\n    },\n\n    /**\n     * As stated above, IE auto links urls typed into contentEditable elements\n     * Since IE9 it's possible to prevent this behavior\n     */\n    canDisableAutoLinking: function() {\n      return this.supportsCommand(document, \"AutoUrlDetect\");\n    },\n\n    /**\n     * IE leaves an empty paragraph in the contentEditable element after clearing it\n     * Chrome/Safari sometimes an empty <div>\n     */\n    clearsContentEditableCorrectly: function() {\n      return isGecko || isOpera || isWebKit;\n    },\n\n    /**\n     * IE gives wrong results for getAttribute\n     */\n    supportsGetAttributeCorrectly: function() {\n      var td = document.createElement(\"td\");\n      return td.getAttribute(\"rowspan\") != \"1\";\n    },\n\n    /**\n     * When clicking on images in IE, Opera and Firefox, they are selected, which makes it easy to interact with them.\n     * Chrome and Safari both don't support this\n     */\n    canSelectImagesInContentEditable: function() {\n      return isGecko || isIE() || isOpera;\n    },\n\n    /**\n     * All browsers except Safari and Chrome automatically scroll the range/caret position into view\n     */\n    autoScrollsToCaret: function() {\n      return !isWebKit;\n    },\n\n    /**\n     * Check whether the browser automatically closes tags that don't need to be opened\n     */\n    autoClosesUnclosedTags: function() {\n      var clonedTestElement = testElement.cloneNode(false),\n          returnValue,\n          innerHTML;\n\n      clonedTestElement.innerHTML = \"<p><div></div>\";\n      innerHTML                   = clonedTestElement.innerHTML.toLowerCase();\n      returnValue                 = innerHTML === \"<p></p><div></div>\" || innerHTML === \"<p><div></div></p>\";\n\n      // Cache result by overwriting current function\n      this.autoClosesUnclosedTags = function() { return returnValue; };\n\n      return returnValue;\n    },\n\n    /**\n     * Whether the browser supports the native document.getElementsByClassName which returns live NodeLists\n     */\n    supportsNativeGetElementsByClassName: function() {\n      return String(document.getElementsByClassName).indexOf(\"[native code]\") !== -1;\n    },\n\n    /**\n     * As of now (19.04.2011) only supported by Firefox 4 and Chrome\n     * See https://developer.mozilla.org/en/DOM/Selection/modify\n     */\n    supportsSelectionModify: function() {\n      return \"getSelection\" in window && \"modify\" in window.getSelection();\n    },\n\n    /**\n     * Opera needs a white space after a <br> in order to position the caret correctly\n     */\n    needsSpaceAfterLineBreak: function() {\n      return isOpera;\n    },\n\n    /**\n     * Whether the browser supports the speech api on the given element\n     * See http://mikepultz.com/2011/03/accessing-google-speech-api-chrome-11/\n     *\n     * @example\n     *    var input = document.createElement(\"input\");\n     *    if (wysihtml5.browser.supportsSpeechApiOn(input)) {\n     *      // ...\n     *    }\n     */\n    supportsSpeechApiOn: function(input) {\n      var chromeVersion = userAgent.match(/Chrome\\/(\\d+)/) || [undefined, 0];\n      return chromeVersion[1] >= 11 && (\"onwebkitspeechchange\" in input || \"speech\" in input);\n    },\n\n    /**\n     * IE9 crashes when setting a getter via Object.defineProperty on XMLHttpRequest or XDomainRequest\n     * See https://connect.microsoft.com/ie/feedback/details/650112\n     * or try the POC http://tifftiff.de/ie9_crash/\n     */\n    crashesWhenDefineProperty: function(property) {\n      return isIE(9) && (property === \"XMLHttpRequest\" || property === \"XDomainRequest\");\n    },\n\n    /**\n     * IE is the only browser who fires the \"focus\" event not immediately when .focus() is called on an element\n     */\n    doesAsyncFocus: function() {\n      return isIE();\n    },\n\n    /**\n     * In IE it's impssible for the user and for the selection library to set the caret after an <img> when it's the lastChild in the document\n     */\n    hasProblemsSettingCaretAfterImg: function() {\n      return isIE();\n    },\n\n    hasUndoInContextMenu: function() {\n      return isGecko || isChrome || isOpera;\n    },\n\n    /**\n     * Opera sometimes doesn't insert the node at the right position when range.insertNode(someNode)\n     * is used (regardless if rangy or native)\n     * This especially happens when the caret is positioned right after a <br> because then\n     * insertNode() will insert the node right before the <br>\n     */\n    hasInsertNodeIssue: function() {\n      return isOpera;\n    },\n\n    /**\n     * IE 8+9 don't fire the focus event of the <body> when the iframe gets focused (even though the caret gets set into the <body>)\n     */\n    hasIframeFocusIssue: function() {\n      return isIE();\n    },\n\n    /**\n     * Chrome + Safari create invalid nested markup after paste\n     *\n     *  <p>\n     *    foo\n     *    <p>bar</p> <!-- BOO! -->\n     *  </p>\n     */\n    createsNestedInvalidMarkupAfterPaste: function() {\n      return isWebKit;\n    },\n\n    supportsMutationEvents: function() {\n        return (\"MutationEvent\" in window);\n    },\n\n    /**\n      IE (at least up to 11) does not support clipboardData on event.\n      It is on window but cannot return text/html\n      Should actually check for clipboardData on paste event, but cannot in firefox\n    */\n    supportsModenPaste: function () {\n      return !(\"clipboardData\" in window);\n    }\n  };\n})();\n;wysihtml5.lang.array = function(arr) {\n  return {\n    /**\n     * Check whether a given object exists in an array\n     *\n     * @example\n     *    wysihtml5.lang.array([1, 2]).contains(1);\n     *    // => true\n     *\n     * Can be used to match array with array. If intersection is found true is returned\n     */\n    contains: function(needle) {\n      if (Array.isArray(needle)) {\n        for (var i = needle.length; i--;) {\n          if (wysihtml5.lang.array(arr).indexOf(needle[i]) !== -1) {\n            return true;\n          }\n        }\n        return false;\n      } else {\n        return wysihtml5.lang.array(arr).indexOf(needle) !== -1;\n      }\n    },\n\n    /**\n     * Check whether a given object exists in an array and return index\n     * If no elelemt found returns -1\n     *\n     * @example\n     *    wysihtml5.lang.array([1, 2]).indexOf(2);\n     *    // => 1\n     */\n    indexOf: function(needle) {\n        if (arr.indexOf) {\n          return arr.indexOf(needle);\n        } else {\n          for (var i=0, length=arr.length; i<length; i++) {\n            if (arr[i] === needle) { return i; }\n          }\n          return -1;\n        }\n    },\n\n    /**\n     * Substract one array from another\n     *\n     * @example\n     *    wysihtml5.lang.array([1, 2, 3, 4]).without([3, 4]);\n     *    // => [1, 2]\n     */\n    without: function(arrayToSubstract) {\n      arrayToSubstract = wysihtml5.lang.array(arrayToSubstract);\n      var newArr  = [],\n          i       = 0,\n          length  = arr.length;\n      for (; i<length; i++) {\n        if (!arrayToSubstract.contains(arr[i])) {\n          newArr.push(arr[i]);\n        }\n      }\n      return newArr;\n    },\n\n    /**\n     * Return a clean native array\n     *\n     * Following will convert a Live NodeList to a proper Array\n     * @example\n     *    var childNodes = wysihtml5.lang.array(document.body.childNodes).get();\n     */\n    get: function() {\n      var i        = 0,\n          length   = arr.length,\n          newArray = [];\n      for (; i<length; i++) {\n        newArray.push(arr[i]);\n      }\n      return newArray;\n    },\n\n    /**\n     * Creates a new array with the results of calling a provided function on every element in this array.\n     * optionally this can be provided as second argument\n     *\n     * @example\n     *    var childNodes = wysihtml5.lang.array([1,2,3,4]).map(function (value, index, array) {\n            return value * 2;\n     *    });\n     *    // => [2,4,6,8]\n     */\n    map: function(callback, thisArg) {\n      if (Array.prototype.map) {\n        return arr.map(callback, thisArg);\n      } else {\n        var len = arr.length >>> 0,\n            A = new Array(len),\n            i = 0;\n        for (; i < len; i++) {\n           A[i] = callback.call(thisArg, arr[i], i, arr);\n        }\n        return A;\n      }\n    },\n\n    /* ReturnS new array without duplicate entries\n     *\n     * @example\n     *    var uniq = wysihtml5.lang.array([1,2,3,2,1,4]).unique();\n     *    // => [1,2,3,4]\n     */\n    unique: function() {\n      var vals = [],\n          max = arr.length,\n          idx = 0;\n\n      while (idx < max) {\n        if (!wysihtml5.lang.array(vals).contains(arr[idx])) {\n          vals.push(arr[idx]);\n        }\n        idx++;\n      }\n      return vals;\n    }\n\n  };\n};\n;wysihtml5.lang.Dispatcher = Base.extend(\n  /** @scope wysihtml5.lang.Dialog.prototype */ {\n  on: function(eventName, handler) {\n    this.events = this.events || {};\n    this.events[eventName] = this.events[eventName] || [];\n    this.events[eventName].push(handler);\n    return this;\n  },\n\n  off: function(eventName, handler) {\n    this.events = this.events || {};\n    var i = 0,\n        handlers,\n        newHandlers;\n    if (eventName) {\n      handlers    = this.events[eventName] || [],\n      newHandlers = [];\n      for (; i<handlers.length; i++) {\n        if (handlers[i] !== handler && handler) {\n          newHandlers.push(handlers[i]);\n        }\n      }\n      this.events[eventName] = newHandlers;\n    } else {\n      // Clean up all events\n      this.events = {};\n    }\n    return this;\n  },\n\n  fire: function(eventName, payload) {\n    this.events = this.events || {};\n    var handlers = this.events[eventName] || [],\n        i        = 0;\n    for (; i<handlers.length; i++) {\n      handlers[i].call(this, payload);\n    }\n    return this;\n  },\n\n  // deprecated, use .on()\n  observe: function() {\n    return this.on.apply(this, arguments);\n  },\n\n  // deprecated, use .off()\n  stopObserving: function() {\n    return this.off.apply(this, arguments);\n  }\n});\n;wysihtml5.lang.object = function(obj) {\n  return {\n    /**\n     * @example\n     *    wysihtml5.lang.object({ foo: 1, bar: 1 }).merge({ bar: 2, baz: 3 }).get();\n     *    // => { foo: 1, bar: 2, baz: 3 }\n     */\n    merge: function(otherObj) {\n      for (var i in otherObj) {\n        obj[i] = otherObj[i];\n      }\n      return this;\n    },\n\n    get: function() {\n      return obj;\n    },\n\n    /**\n     * @example\n     *    wysihtml5.lang.object({ foo: 1 }).clone();\n     *    // => { foo: 1 }\n     *\n     *    v0.4.14 adds options for deep clone : wysihtml5.lang.object({ foo: 1 }).clone(true);\n     */\n    clone: function(deep) {\n      var newObj = {},\n          i;\n\n      if (obj === null || !wysihtml5.lang.object(obj).isPlainObject()) {\n        return obj;\n      }\n\n      for (i in obj) {\n        if(obj.hasOwnProperty(i)) {\n          if (deep) {\n            newObj[i] = wysihtml5.lang.object(obj[i]).clone(deep);\n          } else {\n            newObj[i] = obj[i];\n          }\n        }\n      }\n      return newObj;\n    },\n\n    /**\n     * @example\n     *    wysihtml5.lang.object([]).isArray();\n     *    // => true\n     */\n    isArray: function() {\n      return Object.prototype.toString.call(obj) === \"[object Array]\";\n    },\n\n    /**\n     * @example\n     *    wysihtml5.lang.object(function() {}).isFunction();\n     *    // => true\n     */\n    isFunction: function() {\n      return Object.prototype.toString.call(obj) === '[object Function]';\n    },\n\n    isPlainObject: function () {\n      return Object.prototype.toString.call(obj) === '[object Object]';\n    }\n  };\n};\n;(function() {\n  var WHITE_SPACE_START = /^\\s+/,\n      WHITE_SPACE_END   = /\\s+$/,\n      ENTITY_REG_EXP    = /[&<>\\t\"]/g,\n      ENTITY_MAP = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': \"&quot;\",\n        '\\t':\"&nbsp; \"\n      };\n  wysihtml5.lang.string = function(str) {\n    str = String(str);\n    return {\n      /**\n       * @example\n       *    wysihtml5.lang.string(\"   foo   \").trim();\n       *    // => \"foo\"\n       */\n      trim: function() {\n        return str.replace(WHITE_SPACE_START, \"\").replace(WHITE_SPACE_END, \"\");\n      },\n\n      /**\n       * @example\n       *    wysihtml5.lang.string(\"Hello #{name}\").interpolate({ name: \"Christopher\" });\n       *    // => \"Hello Christopher\"\n       */\n      interpolate: function(vars) {\n        for (var i in vars) {\n          str = this.replace(\"#{\" + i + \"}\").by(vars[i]);\n        }\n        return str;\n      },\n\n      /**\n       * @example\n       *    wysihtml5.lang.string(\"Hello Tom\").replace(\"Tom\").with(\"Hans\");\n       *    // => \"Hello Hans\"\n       */\n      replace: function(search) {\n        return {\n          by: function(replace) {\n            return str.split(search).join(replace);\n          }\n        };\n      },\n\n      /**\n       * @example\n       *    wysihtml5.lang.string(\"hello<br>\").escapeHTML();\n       *    // => \"hello&lt;br&gt;\"\n       */\n      escapeHTML: function(linebreaks, convertSpaces) {\n        var html = str.replace(ENTITY_REG_EXP, function(c) { return ENTITY_MAP[c]; });\n        if (linebreaks) {\n          html = html.replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n        }\n        if (convertSpaces) {\n          html = html.replace(/  /gi, \"&nbsp; \");\n        }\n        return html;\n      }\n    };\n  };\n})();\n;/**\n * Find urls in descendant text nodes of an element and auto-links them\n * Inspired by http://james.padolsey.com/javascript/find-and-replace-text-with-javascript/\n *\n * @param {Element} element Container element in which to search for urls\n *\n * @example\n *    <div id=\"text-container\">Please click here: www.google.com</div>\n *    <script>wysihtml5.dom.autoLink(document.getElementById(\"text-container\"));</script>\n */\n(function(wysihtml5) {\n  var /**\n       * Don't auto-link urls that are contained in the following elements:\n       */\n      IGNORE_URLS_IN        = wysihtml5.lang.array([\"CODE\", \"PRE\", \"A\", \"SCRIPT\", \"HEAD\", \"TITLE\", \"STYLE\"]),\n      /**\n       * revision 1:\n       *    /(\\S+\\.{1}[^\\s\\,\\.\\!]+)/g\n       *\n       * revision 2:\n       *    /(\\b(((https?|ftp):\\/\\/)|(www\\.))[-A-Z0-9+&@#\\/%?=~_|!:,.;\\[\\]]*[-A-Z0-9+&@#\\/%=~_|])/gim\n       *\n       * put this in the beginning if you don't wan't to match within a word\n       *    (^|[\\>\\(\\{\\[\\s\\>])\n       */\n      URL_REG_EXP           = /((https?:\\/\\/|www\\.)[^\\s<]{3,})/gi,\n      TRAILING_CHAR_REG_EXP = /([^\\w\\/\\-](,?))$/i,\n      MAX_DISPLAY_LENGTH    = 100,\n      BRACKETS              = { \")\": \"(\", \"]\": \"[\", \"}\": \"{\" };\n\n  function autoLink(element, ignoreInClasses) {\n    if (_hasParentThatShouldBeIgnored(element, ignoreInClasses)) {\n      return element;\n    }\n\n    if (element === element.ownerDocument.documentElement) {\n      element = element.ownerDocument.body;\n    }\n\n    return _parseNode(element, ignoreInClasses);\n  }\n\n  /**\n   * This is basically a rebuild of\n   * the rails auto_link_urls text helper\n   */\n  function _convertUrlsToLinks(str) {\n    return str.replace(URL_REG_EXP, function(match, url) {\n      var punctuation = (url.match(TRAILING_CHAR_REG_EXP) || [])[1] || \"\",\n          opening     = BRACKETS[punctuation];\n      url = url.replace(TRAILING_CHAR_REG_EXP, \"\");\n\n      if (url.split(opening).length > url.split(punctuation).length) {\n        url = url + punctuation;\n        punctuation = \"\";\n      }\n      var realUrl    = url,\n          displayUrl = url;\n      if (url.length > MAX_DISPLAY_LENGTH) {\n        displayUrl = displayUrl.substr(0, MAX_DISPLAY_LENGTH) + \"...\";\n      }\n      // Add http prefix if necessary\n      if (realUrl.substr(0, 4) === \"www.\") {\n        realUrl = \"http://\" + realUrl;\n      }\n\n      return '<a href=\"' + realUrl + '\">' + displayUrl + '</a>' + punctuation;\n    });\n  }\n\n  /**\n   * Creates or (if already cached) returns a temp element\n   * for the given document object\n   */\n  function _getTempElement(context) {\n    var tempElement = context._wysihtml5_tempElement;\n    if (!tempElement) {\n      tempElement = context._wysihtml5_tempElement = context.createElement(\"div\");\n    }\n    return tempElement;\n  }\n\n  /**\n   * Replaces the original text nodes with the newly auto-linked dom tree\n   */\n  function _wrapMatchesInNode(textNode) {\n    var parentNode  = textNode.parentNode,\n        nodeValue   = wysihtml5.lang.string(textNode.data).escapeHTML(),\n        tempElement = _getTempElement(parentNode.ownerDocument);\n\n    // We need to insert an empty/temporary <span /> to fix IE quirks\n    // Elsewise IE would strip white space in the beginning\n    tempElement.innerHTML = \"<span></span>\" + _convertUrlsToLinks(nodeValue);\n    tempElement.removeChild(tempElement.firstChild);\n\n    while (tempElement.firstChild) {\n      // inserts tempElement.firstChild before textNode\n      parentNode.insertBefore(tempElement.firstChild, textNode);\n    }\n    parentNode.removeChild(textNode);\n  }\n\n  function _hasParentThatShouldBeIgnored(node, ignoreInClasses) {\n    var nodeName;\n    while (node.parentNode) {\n      node = node.parentNode;\n      nodeName = node.nodeName;\n      if (node.className && wysihtml5.lang.array(node.className.split(' ')).contains(ignoreInClasses)) {\n        return true;\n      }\n      if (IGNORE_URLS_IN.contains(nodeName)) {\n        return true;\n      } else if (nodeName === \"body\") {\n        return false;\n      }\n    }\n    return false;\n  }\n\n  function _parseNode(element, ignoreInClasses) {\n    if (IGNORE_URLS_IN.contains(element.nodeName)) {\n      return;\n    }\n\n    if (element.className && wysihtml5.lang.array(element.className.split(' ')).contains(ignoreInClasses)) {\n      return;\n    }\n\n    if (element.nodeType === wysihtml5.TEXT_NODE && element.data.match(URL_REG_EXP)) {\n      _wrapMatchesInNode(element);\n      return;\n    }\n\n    var childNodes        = wysihtml5.lang.array(element.childNodes).get(),\n        childNodesLength  = childNodes.length,\n        i                 = 0;\n\n    for (; i<childNodesLength; i++) {\n      _parseNode(childNodes[i], ignoreInClasses);\n    }\n\n    return element;\n  }\n\n  wysihtml5.dom.autoLink = autoLink;\n\n  // Reveal url reg exp to the outside\n  wysihtml5.dom.autoLink.URL_REG_EXP = URL_REG_EXP;\n})(wysihtml5);\n;(function(wysihtml5) {\n  var api = wysihtml5.dom;\n\n  api.addClass = function(element, className) {\n    var classList = element.classList;\n    if (classList) {\n      return classList.add(className);\n    }\n    if (api.hasClass(element, className)) {\n      return;\n    }\n    element.className += \" \" + className;\n  };\n\n  api.removeClass = function(element, className) {\n    var classList = element.classList;\n    if (classList) {\n      return classList.remove(className);\n    }\n\n    element.className = element.className.replace(new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\"), \" \");\n  };\n\n  api.hasClass = function(element, className) {\n    var classList = element.classList;\n    if (classList) {\n      return classList.contains(className);\n    }\n\n    var elementClassName = element.className;\n    return (elementClassName.length > 0 && (elementClassName == className || new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\").test(elementClassName)));\n  };\n})(wysihtml5);\n;wysihtml5.dom.contains = (function() {\n  var documentElement = document.documentElement;\n  if (documentElement.contains) {\n    return function(container, element) {\n      if (element.nodeType !== wysihtml5.ELEMENT_NODE) {\n        element = element.parentNode;\n      }\n      return container !== element && container.contains(element);\n    };\n  } else if (documentElement.compareDocumentPosition) {\n    return function(container, element) {\n      // https://developer.mozilla.org/en/DOM/Node.compareDocumentPosition\n      return !!(container.compareDocumentPosition(element) & 16);\n    };\n  }\n})();\n;/**\n * Converts an HTML fragment/element into a unordered/ordered list\n *\n * @param {Element} element The element which should be turned into a list\n * @param {String} listType The list type in which to convert the tree (either \"ul\" or \"ol\")\n * @return {Element} The created list\n *\n * @example\n *    <!-- Assume the following dom: -->\n *    <span id=\"pseudo-list\">\n *      eminem<br>\n *      dr. dre\n *      <div>50 Cent</div>\n *    </span>\n *\n *    <script>\n *      wysihtml5.dom.convertToList(document.getElementById(\"pseudo-list\"), \"ul\");\n *    </script>\n *\n *    <!-- Will result in: -->\n *    <ul>\n *      <li>eminem</li>\n *      <li>dr. dre</li>\n *      <li>50 Cent</li>\n *    </ul>\n */\nwysihtml5.dom.convertToList = (function() {\n  function _createListItem(doc, list) {\n    var listItem = doc.createElement(\"li\");\n    list.appendChild(listItem);\n    return listItem;\n  }\n\n  function _createList(doc, type) {\n    return doc.createElement(type);\n  }\n\n  function convertToList(element, listType, uneditableClass) {\n    if (element.nodeName === \"UL\" || element.nodeName === \"OL\" || element.nodeName === \"MENU\") {\n      // Already a list\n      return element;\n    }\n\n    var doc               = element.ownerDocument,\n        list              = _createList(doc, listType),\n        lineBreaks        = element.querySelectorAll(\"br\"),\n        lineBreaksLength  = lineBreaks.length,\n        childNodes,\n        childNodesLength,\n        childNode,\n        lineBreak,\n        parentNode,\n        isBlockElement,\n        isLineBreak,\n        currentListItem,\n        i;\n\n    // First find <br> at the end of inline elements and move them behind them\n    for (i=0; i<lineBreaksLength; i++) {\n      lineBreak = lineBreaks[i];\n      while ((parentNode = lineBreak.parentNode) && parentNode !== element && parentNode.lastChild === lineBreak) {\n        if (wysihtml5.dom.getStyle(\"display\").from(parentNode) === \"block\") {\n          parentNode.removeChild(lineBreak);\n          break;\n        }\n        wysihtml5.dom.insert(lineBreak).after(lineBreak.parentNode);\n      }\n    }\n\n    childNodes        = wysihtml5.lang.array(element.childNodes).get();\n    childNodesLength  = childNodes.length;\n\n    for (i=0; i<childNodesLength; i++) {\n      currentListItem   = currentListItem || _createListItem(doc, list);\n      childNode         = childNodes[i];\n      isBlockElement    = wysihtml5.dom.getStyle(\"display\").from(childNode) === \"block\";\n      isLineBreak       = childNode.nodeName === \"BR\";\n\n      // consider uneditable as an inline element\n      if (isBlockElement && (!uneditableClass || !wysihtml5.dom.hasClass(childNode, uneditableClass))) {\n        // Append blockElement to current <li> if empty, otherwise create a new one\n        currentListItem = currentListItem.firstChild ? _createListItem(doc, list) : currentListItem;\n        currentListItem.appendChild(childNode);\n        currentListItem = null;\n        continue;\n      }\n\n      if (isLineBreak) {\n        // Only create a new list item in the next iteration when the current one has already content\n        currentListItem = currentListItem.firstChild ? null : currentListItem;\n        continue;\n      }\n\n      currentListItem.appendChild(childNode);\n    }\n\n    if (childNodes.length === 0) {\n      _createListItem(doc, list);\n    }\n\n    element.parentNode.replaceChild(list, element);\n    return list;\n  }\n\n  return convertToList;\n})();\n;/**\n * Copy a set of attributes from one element to another\n *\n * @param {Array} attributesToCopy List of attributes which should be copied\n * @return {Object} Returns an object which offers the \"from\" method which can be invoked with the element where to\n *    copy the attributes from., this again returns an object which provides a method named \"to\" which can be invoked\n *    with the element where to copy the attributes to (see example)\n *\n * @example\n *    var textarea    = document.querySelector(\"textarea\"),\n *        div         = document.querySelector(\"div[contenteditable=true]\"),\n *        anotherDiv  = document.querySelector(\"div.preview\");\n *    wysihtml5.dom.copyAttributes([\"spellcheck\", \"value\", \"placeholder\"]).from(textarea).to(div).andTo(anotherDiv);\n *\n */\nwysihtml5.dom.copyAttributes = function(attributesToCopy) {\n  return {\n    from: function(elementToCopyFrom) {\n      return {\n        to: function(elementToCopyTo) {\n          var attribute,\n              i         = 0,\n              length    = attributesToCopy.length;\n          for (; i<length; i++) {\n            attribute = attributesToCopy[i];\n            if (typeof(elementToCopyFrom[attribute]) !== \"undefined\" && elementToCopyFrom[attribute] !== \"\") {\n              elementToCopyTo[attribute] = elementToCopyFrom[attribute];\n            }\n          }\n          return { andTo: arguments.callee };\n        }\n      };\n    }\n  };\n};\n;/**\n * Copy a set of styles from one element to another\n * Please note that this only works properly across browsers when the element from which to copy the styles\n * is in the dom\n *\n * Interesting article on how to copy styles\n *\n * @param {Array} stylesToCopy List of styles which should be copied\n * @return {Object} Returns an object which offers the \"from\" method which can be invoked with the element where to\n *    copy the styles from., this again returns an object which provides a method named \"to\" which can be invoked\n *    with the element where to copy the styles to (see example)\n *\n * @example\n *    var textarea    = document.querySelector(\"textarea\"),\n *        div         = document.querySelector(\"div[contenteditable=true]\"),\n *        anotherDiv  = document.querySelector(\"div.preview\");\n *    wysihtml5.dom.copyStyles([\"overflow-y\", \"width\", \"height\"]).from(textarea).to(div).andTo(anotherDiv);\n *\n */\n(function(dom) {\n\n  /**\n   * Mozilla, WebKit and Opera recalculate the computed width when box-sizing: boder-box; is set\n   * So if an element has \"width: 200px; -moz-box-sizing: border-box; border: 1px;\" then\n   * its computed css width will be 198px\n   *\n   * See https://bugzilla.mozilla.org/show_bug.cgi?id=520992\n   */\n  var BOX_SIZING_PROPERTIES = [\"-webkit-box-sizing\", \"-moz-box-sizing\", \"-ms-box-sizing\", \"box-sizing\"];\n\n  var shouldIgnoreBoxSizingBorderBox = function(element) {\n    if (hasBoxSizingBorderBox(element)) {\n       return parseInt(dom.getStyle(\"width\").from(element), 10) < element.offsetWidth;\n    }\n    return false;\n  };\n\n  var hasBoxSizingBorderBox = function(element) {\n    var i       = 0,\n        length  = BOX_SIZING_PROPERTIES.length;\n    for (; i<length; i++) {\n      if (dom.getStyle(BOX_SIZING_PROPERTIES[i]).from(element) === \"border-box\") {\n        return BOX_SIZING_PROPERTIES[i];\n      }\n    }\n  };\n\n  dom.copyStyles = function(stylesToCopy) {\n    return {\n      from: function(element) {\n        if (shouldIgnoreBoxSizingBorderBox(element)) {\n          stylesToCopy = wysihtml5.lang.array(stylesToCopy).without(BOX_SIZING_PROPERTIES);\n        }\n\n        var cssText = \"\",\n            length  = stylesToCopy.length,\n            i       = 0,\n            property;\n        for (; i<length; i++) {\n          property = stylesToCopy[i];\n          cssText += property + \":\" + dom.getStyle(property).from(element) + \";\";\n        }\n\n        return {\n          to: function(element) {\n            dom.setStyles(cssText).on(element);\n            return { andTo: arguments.callee };\n          }\n        };\n      }\n    };\n  };\n})(wysihtml5.dom);\n;/**\n * Event Delegation\n *\n * @example\n *    wysihtml5.dom.delegate(document.body, \"a\", \"click\", function() {\n *      // foo\n *    });\n */\n(function(wysihtml5) {\n\n  wysihtml5.dom.delegate = function(container, selector, eventName, handler) {\n    return wysihtml5.dom.observe(container, eventName, function(event) {\n      var target    = event.target,\n          match     = wysihtml5.lang.array(container.querySelectorAll(selector));\n\n      while (target && target !== container) {\n        if (match.contains(target)) {\n          handler.call(target, event);\n          break;\n        }\n        target = target.parentNode;\n      }\n    });\n  };\n\n})(wysihtml5);\n;// TODO: Refactor dom tree traversing here\n(function(wysihtml5) {\n  wysihtml5.dom.domNode = function(node) {\n    var defaultNodeTypes = [wysihtml5.ELEMENT_NODE, wysihtml5.TEXT_NODE];\n\n    var _isBlankText = function(node) {\n      return node.nodeType === wysihtml5.TEXT_NODE && (/^\\s*$/g).test(node.data);\n    };\n\n    return {\n\n      // var node = wysihtml5.dom.domNode(element).prev({nodeTypes: [1,3], ignoreBlankTexts: true});\n      prev: function(options) {\n        var prevNode = node.previousSibling,\n            types = (options && options.nodeTypes) ? options.nodeTypes : defaultNodeTypes;\n        \n        if (!prevNode) {\n          return null;\n        }\n\n        if (\n          (!wysihtml5.lang.array(types).contains(prevNode.nodeType)) || // nodeTypes check.\n          (options && options.ignoreBlankTexts && _isBlankText(prevNode)) // Blank text nodes bypassed if set\n        ) {\n          return wysihtml5.dom.domNode(prevNode).prev(options);\n        }\n        \n        return prevNode;\n      },\n\n      // var node = wysihtml5.dom.domNode(element).next({nodeTypes: [1,3], ignoreBlankTexts: true});\n      next: function(options) {\n        var nextNode = node.nextSibling,\n            types = (options && options.nodeTypes) ? options.nodeTypes : defaultNodeTypes;\n        \n        if (!nextNode) {\n          return null;\n        }\n\n        if (\n          (!wysihtml5.lang.array(types).contains(nextNode.nodeType)) || // nodeTypes check.\n          (options && options.ignoreBlankTexts && _isBlankText(nextNode)) // blank text nodes bypassed if set\n        ) {\n          return wysihtml5.dom.domNode(nextNode).next(options);\n        }\n        \n        return nextNode;\n      }\n\n\n\n    };\n  };\n})(wysihtml5);;/**\n * Returns the given html wrapped in a div element\n *\n * Fixing IE's inability to treat unknown elements (HTML5 section, article, ...) correctly\n * when inserted via innerHTML\n *\n * @param {String} html The html which should be wrapped in a dom element\n * @param {Obejct} [context] Document object of the context the html belongs to\n *\n * @example\n *    wysihtml5.dom.getAsDom(\"<article>foo</article>\");\n */\nwysihtml5.dom.getAsDom = (function() {\n\n  var _innerHTMLShiv = function(html, context) {\n    var tempElement = context.createElement(\"div\");\n    tempElement.style.display = \"none\";\n    context.body.appendChild(tempElement);\n    // IE throws an exception when trying to insert <frameset></frameset> via innerHTML\n    try { tempElement.innerHTML = html; } catch(e) {}\n    context.body.removeChild(tempElement);\n    return tempElement;\n  };\n\n  /**\n   * Make sure IE supports HTML5 tags, which is accomplished by simply creating one instance of each element\n   */\n  var _ensureHTML5Compatibility = function(context) {\n    if (context._wysihtml5_supportsHTML5Tags) {\n      return;\n    }\n    for (var i=0, length=HTML5_ELEMENTS.length; i<length; i++) {\n      context.createElement(HTML5_ELEMENTS[i]);\n    }\n    context._wysihtml5_supportsHTML5Tags = true;\n  };\n\n\n  /**\n   * List of html5 tags\n   * taken from http://simon.html5.org/html5-elements\n   */\n  var HTML5_ELEMENTS = [\n    \"abbr\", \"article\", \"aside\", \"audio\", \"bdi\", \"canvas\", \"command\", \"datalist\", \"details\", \"figcaption\",\n    \"figure\", \"footer\", \"header\", \"hgroup\", \"keygen\", \"mark\", \"meter\", \"nav\", \"output\", \"progress\",\n    \"rp\", \"rt\", \"ruby\", \"svg\", \"section\", \"source\", \"summary\", \"time\", \"track\", \"video\", \"wbr\"\n  ];\n\n  return function(html, context) {\n    context = context || document;\n    var tempElement;\n    if (typeof(html) === \"object\" && html.nodeType) {\n      tempElement = context.createElement(\"div\");\n      tempElement.appendChild(html);\n    } else if (wysihtml5.browser.supportsHTML5Tags(context)) {\n      tempElement = context.createElement(\"div\");\n      tempElement.innerHTML = html;\n    } else {\n      _ensureHTML5Compatibility(context);\n      tempElement = _innerHTMLShiv(html, context);\n    }\n    return tempElement;\n  };\n})();\n;/**\n * Walks the dom tree from the given node up until it finds a match\n * Designed for optimal performance.\n *\n * @param {Element} node The from which to check the parent nodes\n * @param {Object} matchingSet Object to match against (possible properties: nodeName, className, classRegExp)\n * @param {Number} [levels] How many parents should the function check up from the current node (defaults to 50)\n * @return {null|Element} Returns the first element that matched the desiredNodeName(s)\n * @example\n *    var listElement = wysihtml5.dom.getParentElement(document.querySelector(\"li\"), { nodeName: [\"MENU\", \"UL\", \"OL\"] });\n *    // ... or ...\n *    var unorderedListElement = wysihtml5.dom.getParentElement(document.querySelector(\"li\"), { nodeName: \"UL\" });\n *    // ... or ...\n *    var coloredElement = wysihtml5.dom.getParentElement(myTextNode, { nodeName: \"SPAN\", className: \"wysiwyg-color-red\", classRegExp: /wysiwyg-color-[a-z]/g });\n */\nwysihtml5.dom.getParentElement = (function() {\n\n  function _isSameNodeName(nodeName, desiredNodeNames) {\n    if (!desiredNodeNames || !desiredNodeNames.length) {\n      return true;\n    }\n\n    if (typeof(desiredNodeNames) === \"string\") {\n      return nodeName === desiredNodeNames;\n    } else {\n      return wysihtml5.lang.array(desiredNodeNames).contains(nodeName);\n    }\n  }\n\n  function _isElement(node) {\n    return node.nodeType === wysihtml5.ELEMENT_NODE;\n  }\n\n  function _hasClassName(element, className, classRegExp) {\n    var classNames = (element.className || \"\").match(classRegExp) || [];\n    if (!className) {\n      return !!classNames.length;\n    }\n    return classNames[classNames.length - 1] === className;\n  }\n\n  function _hasStyle(element, cssStyle, styleRegExp) {\n    var styles = (element.getAttribute('style') || \"\").match(styleRegExp) || [];\n    if (!cssStyle) {\n      return !!styles.length;\n    }\n    return styles[styles.length - 1] === cssStyle;\n  }\n\n  return function(node, matchingSet, levels, container) {\n    var findByStyle = (matchingSet.cssStyle || matchingSet.styleRegExp),\n        findByClass = (matchingSet.className || matchingSet.classRegExp);\n\n    levels = levels || 50; // Go max 50 nodes upwards from current node\n\n    while (levels-- && node && node.nodeName !== \"BODY\" && (!container || node !== container)) {\n      if (_isElement(node) && _isSameNodeName(node.nodeName, matchingSet.nodeName) &&\n          (!findByStyle || _hasStyle(node, matchingSet.cssStyle, matchingSet.styleRegExp)) &&\n          (!findByClass || _hasClassName(node, matchingSet.className, matchingSet.classRegExp))\n      ) {\n        return node;\n      }\n      node = node.parentNode;\n    }\n    return null;\n  };\n})();\n;/**\n * Get element's style for a specific css property\n *\n * @param {Element} element The element on which to retrieve the style\n * @param {String} property The CSS property to retrieve (\"float\", \"display\", \"text-align\", ...)\n *\n * @example\n *    wysihtml5.dom.getStyle(\"display\").from(document.body);\n *    // => \"block\"\n */\nwysihtml5.dom.getStyle = (function() {\n  var stylePropertyMapping = {\n        \"float\": (\"styleFloat\" in document.createElement(\"div\").style) ? \"styleFloat\" : \"cssFloat\"\n      },\n      REG_EXP_CAMELIZE = /\\-[a-z]/g;\n\n  function camelize(str) {\n    return str.replace(REG_EXP_CAMELIZE, function(match) {\n      return match.charAt(1).toUpperCase();\n    });\n  }\n\n  return function(property) {\n    return {\n      from: function(element) {\n        if (element.nodeType !== wysihtml5.ELEMENT_NODE) {\n          return;\n        }\n\n        var doc               = element.ownerDocument,\n            camelizedProperty = stylePropertyMapping[property] || camelize(property),\n            style             = element.style,\n            currentStyle      = element.currentStyle,\n            styleValue        = style[camelizedProperty];\n        if (styleValue) {\n          return styleValue;\n        }\n\n        // currentStyle is no standard and only supported by Opera and IE but it has one important advantage over the standard-compliant\n        // window.getComputedStyle, since it returns css property values in their original unit:\n        // If you set an elements width to \"50%\", window.getComputedStyle will give you it's current width in px while currentStyle\n        // gives you the original \"50%\".\n        // Opera supports both, currentStyle and window.getComputedStyle, that's why checking for currentStyle should have higher prio\n        if (currentStyle) {\n          try {\n            return currentStyle[camelizedProperty];\n          } catch(e) {\n            //ie will occasionally fail for unknown reasons. swallowing exception\n          }\n        }\n\n        var win                 = doc.defaultView || doc.parentWindow,\n            needsOverflowReset  = (property === \"height\" || property === \"width\") && element.nodeName === \"TEXTAREA\",\n            originalOverflow,\n            returnValue;\n\n        if (win.getComputedStyle) {\n          // Chrome and Safari both calculate a wrong width and height for textareas when they have scroll bars\n          // therfore we remove and restore the scrollbar and calculate the value in between\n          if (needsOverflowReset) {\n            originalOverflow = style.overflow;\n            style.overflow = \"hidden\";\n          }\n          returnValue = win.getComputedStyle(element, null).getPropertyValue(property);\n          if (needsOverflowReset) {\n            style.overflow = originalOverflow || \"\";\n          }\n          return returnValue;\n        }\n      }\n    };\n  };\n})();\n;wysihtml5.dom.getTextNodes = function(node, ingoreEmpty){\n  var all = [];\n  for (node=node.firstChild;node;node=node.nextSibling){\n    if (node.nodeType == 3) {\n      if (!ingoreEmpty || !(/^\\s*$/).test(node.innerText || node.textContent)) {\n        all.push(node);\n      }\n    } else {\n      all = all.concat(wysihtml5.dom.getTextNodes(node, ingoreEmpty));\n    }\n  }\n  return all;\n};;/**\n * High performant way to check whether an element with a specific tag name is in the given document\n * Optimized for being heavily executed\n * Unleashes the power of live node lists\n *\n * @param {Object} doc The document object of the context where to check\n * @param {String} tagName Upper cased tag name\n * @example\n *    wysihtml5.dom.hasElementWithTagName(document, \"IMG\");\n */\nwysihtml5.dom.hasElementWithTagName = (function() {\n  var LIVE_CACHE          = {},\n      DOCUMENT_IDENTIFIER = 1;\n\n  function _getDocumentIdentifier(doc) {\n    return doc._wysihtml5_identifier || (doc._wysihtml5_identifier = DOCUMENT_IDENTIFIER++);\n  }\n\n  return function(doc, tagName) {\n    var key         = _getDocumentIdentifier(doc) + \":\" + tagName,\n        cacheEntry  = LIVE_CACHE[key];\n    if (!cacheEntry) {\n      cacheEntry = LIVE_CACHE[key] = doc.getElementsByTagName(tagName);\n    }\n\n    return cacheEntry.length > 0;\n  };\n})();\n;/**\n * High performant way to check whether an element with a specific class name is in the given document\n * Optimized for being heavily executed\n * Unleashes the power of live node lists\n *\n * @param {Object} doc The document object of the context where to check\n * @param {String} tagName Upper cased tag name\n * @example\n *    wysihtml5.dom.hasElementWithClassName(document, \"foobar\");\n */\n(function(wysihtml5) {\n  var LIVE_CACHE          = {},\n      DOCUMENT_IDENTIFIER = 1;\n\n  function _getDocumentIdentifier(doc) {\n    return doc._wysihtml5_identifier || (doc._wysihtml5_identifier = DOCUMENT_IDENTIFIER++);\n  }\n\n  wysihtml5.dom.hasElementWithClassName = function(doc, className) {\n    // getElementsByClassName is not supported by IE<9\n    // but is sometimes mocked via library code (which then doesn't return live node lists)\n    if (!wysihtml5.browser.supportsNativeGetElementsByClassName()) {\n      return !!doc.querySelector(\".\" + className);\n    }\n\n    var key         = _getDocumentIdentifier(doc) + \":\" + className,\n        cacheEntry  = LIVE_CACHE[key];\n    if (!cacheEntry) {\n      cacheEntry = LIVE_CACHE[key] = doc.getElementsByClassName(className);\n    }\n\n    return cacheEntry.length > 0;\n  };\n})(wysihtml5);\n;wysihtml5.dom.insert = function(elementToInsert) {\n  return {\n    after: function(element) {\n      element.parentNode.insertBefore(elementToInsert, element.nextSibling);\n    },\n\n    before: function(element) {\n      element.parentNode.insertBefore(elementToInsert, element);\n    },\n\n    into: function(element) {\n      element.appendChild(elementToInsert);\n    }\n  };\n};\n;wysihtml5.dom.insertCSS = function(rules) {\n  rules = rules.join(\"\\n\");\n\n  return {\n    into: function(doc) {\n      var styleElement = doc.createElement(\"style\");\n      styleElement.type = \"text/css\";\n\n      if (styleElement.styleSheet) {\n        styleElement.styleSheet.cssText = rules;\n      } else {\n        styleElement.appendChild(doc.createTextNode(rules));\n      }\n\n      var link = doc.querySelector(\"head link\");\n      if (link) {\n        link.parentNode.insertBefore(styleElement, link);\n        return;\n      } else {\n        var head = doc.querySelector(\"head\");\n        if (head) {\n          head.appendChild(styleElement);\n        }\n      }\n    }\n  };\n};\n;// TODO: Refactor dom tree traversing here\n(function(wysihtml5) {\n  wysihtml5.dom.lineBreaks = function(node) {\n\n    function _isLineBreak(n) {\n      return n.nodeName === \"BR\";\n    }\n\n    /**\n     * Checks whether the elment causes a visual line break\n     * (<br> or block elements)\n     */\n    function _isLineBreakOrBlockElement(element) {\n      if (_isLineBreak(element)) {\n        return true;\n      }\n\n      if (wysihtml5.dom.getStyle(\"display\").from(element) === \"block\") {\n        return true;\n      }\n\n      return false;\n    }\n\n    return {\n\n      /* wysihtml5.dom.lineBreaks(element).add();\n       *\n       * Adds line breaks before and after the given node if the previous and next siblings\n       * aren't already causing a visual line break (block element or <br>)\n       */\n      add: function(options) {\n        var doc             = node.ownerDocument,\n          nextSibling     = wysihtml5.dom.domNode(node).next({ignoreBlankTexts: true}),\n          previousSibling = wysihtml5.dom.domNode(node).prev({ignoreBlankTexts: true});\n\n        if (nextSibling && !_isLineBreakOrBlockElement(nextSibling)) {\n          wysihtml5.dom.insert(doc.createElement(\"br\")).after(node);\n        }\n        if (previousSibling && !_isLineBreakOrBlockElement(previousSibling)) {\n          wysihtml5.dom.insert(doc.createElement(\"br\")).before(node);\n        }\n      },\n\n      /* wysihtml5.dom.lineBreaks(element).remove();\n       *\n       * Removes line breaks before and after the given node\n       */\n      remove: function(options) {\n        var nextSibling     = wysihtml5.dom.domNode(node).next({ignoreBlankTexts: true}),\n            previousSibling = wysihtml5.dom.domNode(node).prev({ignoreBlankTexts: true});\n\n        if (nextSibling && _isLineBreak(nextSibling)) {\n          nextSibling.parentNode.removeChild(nextSibling);\n        }\n        if (previousSibling && _isLineBreak(previousSibling)) {\n          previousSibling.parentNode.removeChild(previousSibling);\n        }\n      }\n    };\n  };\n})(wysihtml5);;/**\n * Method to set dom events\n *\n * @example\n *    wysihtml5.dom.observe(iframe.contentWindow.document.body, [\"focus\", \"blur\"], function() { ... });\n */\nwysihtml5.dom.observe = function(element, eventNames, handler) {\n  eventNames = typeof(eventNames) === \"string\" ? [eventNames] : eventNames;\n\n  var handlerWrapper,\n      eventName,\n      i       = 0,\n      length  = eventNames.length;\n\n  for (; i<length; i++) {\n    eventName = eventNames[i];\n    if (element.addEventListener) {\n      element.addEventListener(eventName, handler, false);\n    } else {\n      handlerWrapper = function(event) {\n        if (!(\"target\" in event)) {\n          event.target = event.srcElement;\n        }\n        event.preventDefault = event.preventDefault || function() {\n          this.returnValue = false;\n        };\n        event.stopPropagation = event.stopPropagation || function() {\n          this.cancelBubble = true;\n        };\n        handler.call(element, event);\n      };\n      element.attachEvent(\"on\" + eventName, handlerWrapper);\n    }\n  }\n\n  return {\n    stop: function() {\n      var eventName,\n          i       = 0,\n          length  = eventNames.length;\n      for (; i<length; i++) {\n        eventName = eventNames[i];\n        if (element.removeEventListener) {\n          element.removeEventListener(eventName, handler, false);\n        } else {\n          element.detachEvent(\"on\" + eventName, handlerWrapper);\n        }\n      }\n    }\n  };\n};\n;/**\n * HTML Sanitizer\n * Rewrites the HTML based on given rules\n *\n * @param {Element|String} elementOrHtml HTML String to be sanitized OR element whose content should be sanitized\n * @param {Object} [rules] List of rules for rewriting the HTML, if there's no rule for an element it will\n *    be converted to a \"span\". Each rule is a key/value pair where key is the tag to convert, and value the\n *    desired substitution.\n * @param {Object} context Document object in which to parse the html, needed to sandbox the parsing\n *\n * @return {Element|String} Depends on the elementOrHtml parameter. When html then the sanitized html as string elsewise the element.\n *\n * @example\n *    var userHTML = '<div id=\"foo\" onclick=\"alert(1);\"><p><font color=\"red\">foo</font><script>alert(1);</script></p></div>';\n *    wysihtml5.dom.parse(userHTML, {\n *      tags {\n *        p:      \"div\",      // Rename p tags to div tags\n *        font:   \"span\"      // Rename font tags to span tags\n *        div:    true,       // Keep them, also possible (same result when passing: \"div\" or true)\n *        script: undefined   // Remove script elements\n *      }\n *    });\n *    // => <div><div><span>foo bar</span></div></div>\n *\n *    var userHTML = '<table><tbody><tr><td>I'm a table!</td></tr></tbody></table>';\n *    wysihtml5.dom.parse(userHTML);\n *    // => '<span><span><span><span>I'm a table!</span></span></span></span>'\n *\n *    var userHTML = '<div>foobar<br>foobar</div>';\n *    wysihtml5.dom.parse(userHTML, {\n *      tags: {\n *        div: undefined,\n *        br:  true\n *      }\n *    });\n *    // => ''\n *\n *    var userHTML = '<div class=\"red\">foo</div><div class=\"pink\">bar</div>';\n *    wysihtml5.dom.parse(userHTML, {\n *      classes: {\n *        red:    1,\n *        green:  1\n *      },\n *      tags: {\n *        div: {\n *          rename_tag:     \"p\"\n *        }\n *      }\n *    });\n *    // => '<p class=\"red\">foo</p><p>bar</p>'\n */\n\nwysihtml5.dom.parse = function(elementOrHtml_current, config_current) {\n  /* TODO: Currently escaped module pattern as otherwise folloowing default swill be shared among multiple editors.\n   * Refactor whole code as this method while workind is kind of awkward too */\n\n  /**\n   * It's not possible to use a XMLParser/DOMParser as HTML5 is not always well-formed XML\n   * new DOMParser().parseFromString('<img src=\"foo.gif\">') will cause a parseError since the\n   * node isn't closed\n   *\n   * Therefore we've to use the browser's ordinary HTML parser invoked by setting innerHTML.\n   */\n  var NODE_TYPE_MAPPING = {\n        \"1\": _handleElement,\n        \"3\": _handleText,\n        \"8\": _handleComment\n      },\n      // Rename unknown tags to this\n      DEFAULT_NODE_NAME   = \"span\",\n      WHITE_SPACE_REG_EXP = /\\s+/,\n      defaultRules        = { tags: {}, classes: {} },\n      currentRules        = {};\n\n  /**\n   * Iterates over all childs of the element, recreates them, appends them into a document fragment\n   * which later replaces the entire body content\n   */\n   function parse(elementOrHtml, config) {\n    wysihtml5.lang.object(currentRules).merge(defaultRules).merge(config.rules).get();\n\n    var context       = config.context || elementOrHtml.ownerDocument || document,\n        fragment      = context.createDocumentFragment(),\n        isString      = typeof(elementOrHtml) === \"string\",\n        clearInternals = false,\n        element,\n        newNode,\n        firstChild;\n\n    if (config.clearInternals === true) {\n      clearInternals = true;\n    }\n\n    if (isString) {\n      element = wysihtml5.dom.getAsDom(elementOrHtml, context);\n    } else {\n      element = elementOrHtml;\n    }\n\n    if (currentRules.selectors) {\n      _applySelectorRules(element, currentRules.selectors);\n    }\n\n    while (element.firstChild) {\n      firstChild = element.firstChild;\n      newNode = _convert(firstChild, config.cleanUp, clearInternals, config.uneditableClass);\n      if (newNode) {\n        fragment.appendChild(newNode);\n      }\n      if (firstChild !== newNode) {\n        element.removeChild(firstChild);\n      }\n    }\n\n    if (config.unjoinNbsps) {\n      // replace joined non-breakable spaces with unjoined\n      var txtnodes = wysihtml5.dom.getTextNodes(fragment);\n      for (var n = txtnodes.length; n--;) {\n        txtnodes[n].nodeValue = txtnodes[n].nodeValue.replace(/([\\S\\u00A0])\\u00A0/gi, \"$1 \");\n      }\n    }\n\n    // Clear element contents\n    element.innerHTML = \"\";\n\n    // Insert new DOM tree\n    element.appendChild(fragment);\n\n    return isString ? wysihtml5.quirks.getCorrectInnerHTML(element) : element;\n  }\n\n  function _convert(oldNode, cleanUp, clearInternals, uneditableClass) {\n    var oldNodeType     = oldNode.nodeType,\n        oldChilds       = oldNode.childNodes,\n        oldChildsLength = oldChilds.length,\n        method          = NODE_TYPE_MAPPING[oldNodeType],\n        i               = 0,\n        fragment,\n        newNode,\n        newChild;\n\n    // Passes directly elemets with uneditable class\n    if (uneditableClass && oldNodeType === 1 && wysihtml5.dom.hasClass(oldNode, uneditableClass)) {\n        return oldNode;\n    }\n\n    newNode = method && method(oldNode, clearInternals);\n\n    // Remove or unwrap node in case of return value null or false\n    if (!newNode) {\n        if (newNode === false) {\n            // false defines that tag should be removed but contents should remain (unwrap)\n            fragment = oldNode.ownerDocument.createDocumentFragment();\n\n            for (i = oldChildsLength; i--;) {\n              if (oldChilds[i]) {\n                newChild = _convert(oldChilds[i], cleanUp, clearInternals, uneditableClass);\n                if (newChild) {\n                  if (oldChilds[i] === newChild) {\n                    i--;\n                  }\n                  fragment.insertBefore(newChild, fragment.firstChild);\n                }\n              }\n            }\n\n            if (wysihtml5.dom.getStyle(\"display\").from(oldNode) === \"block\") {\n              fragment.appendChild(oldNode.ownerDocument.createElement(\"br\"));\n            }\n\n            // TODO: try to minimize surplus spaces\n            if (wysihtml5.lang.array([\n                \"div\", \"pre\", \"p\",\n                \"table\", \"td\", \"th\",\n                \"ul\", \"ol\", \"li\",\n                \"dd\", \"dl\",\n                \"footer\", \"header\", \"section\",\n                \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"\n            ]).contains(oldNode.nodeName.toLowerCase()) && oldNode.parentNode.lastChild !== oldNode) {\n                // add space at first when unwraping non-textflow elements\n                if (!oldNode.nextSibling || oldNode.nextSibling.nodeType !== 3 || !(/^\\s/).test(oldNode.nextSibling.nodeValue)) {\n                  fragment.appendChild(oldNode.ownerDocument.createTextNode(\" \"));\n                }\n            }\n\n            if (fragment.normalize) {\n              fragment.normalize();\n            }\n            return fragment;\n        } else {\n          // Remove\n          return null;\n        }\n    }\n\n    // Converts all childnodes\n    for (i=0; i<oldChildsLength; i++) {\n      if (oldChilds[i]) {\n        newChild = _convert(oldChilds[i], cleanUp, clearInternals, uneditableClass);\n        if (newChild) {\n          if (oldChilds[i] === newChild) {\n            i--;\n          }\n          newNode.appendChild(newChild);\n        }\n      }\n    }\n\n    // Cleanup senseless <span> elements\n    if (cleanUp &&\n        newNode.nodeName.toLowerCase() === DEFAULT_NODE_NAME &&\n        (!newNode.childNodes.length ||\n         ((/^\\s*$/gi).test(newNode.innerHTML) && (clearInternals || (oldNode.className !== \"_wysihtml5-temp-placeholder\" && oldNode.className !== \"rangySelectionBoundary\"))) ||\n         !newNode.attributes.length)\n        ) {\n      fragment = newNode.ownerDocument.createDocumentFragment();\n      while (newNode.firstChild) {\n        fragment.appendChild(newNode.firstChild);\n      }\n      if (fragment.normalize) {\n        fragment.normalize();\n      }\n      return fragment;\n    }\n\n    if (newNode.normalize) {\n      newNode.normalize();\n    }\n    return newNode;\n  }\n\n  function _applySelectorRules (element, selectorRules) {\n    var sel, method, els;\n\n    for (sel in selectorRules) {\n      if (selectorRules.hasOwnProperty(sel)) {\n        if (wysihtml5.lang.object(selectorRules[sel]).isFunction()) {\n          method = selectorRules[sel];\n        } else if (typeof(selectorRules[sel]) === \"string\" && elementHandlingMethods[selectorRules[sel]]) {\n          method = elementHandlingMethods[selectorRules[sel]];\n        }\n        els = element.querySelectorAll(sel);\n        for (var i = els.length; i--;) {\n          method(els[i]);\n        }\n      }\n    }\n  }\n\n  function _handleElement(oldNode, clearInternals) {\n    var rule,\n        newNode,\n        tagRules    = currentRules.tags,\n        nodeName    = oldNode.nodeName.toLowerCase(),\n        scopeName   = oldNode.scopeName,\n        renameTag;\n\n    /**\n     * We already parsed that element\n     * ignore it! (yes, this sometimes happens in IE8 when the html is invalid)\n     */\n    if (oldNode._wysihtml5) {\n      return null;\n    }\n    oldNode._wysihtml5 = 1;\n\n    if (oldNode.className === \"wysihtml5-temp\") {\n      return null;\n    }\n\n    /**\n     * IE is the only browser who doesn't include the namespace in the\n     * nodeName, that's why we have to prepend it by ourselves\n     * scopeName is a proprietary IE feature\n     * read more here http://msdn.microsoft.com/en-us/library/ms534388(v=vs.85).aspx\n     */\n    if (scopeName && scopeName != \"HTML\") {\n      nodeName = scopeName + \":\" + nodeName;\n    }\n    /**\n     * Repair node\n     * IE is a bit bitchy when it comes to invalid nested markup which includes unclosed tags\n     * A <p> doesn't need to be closed according HTML4-5 spec, we simply replace it with a <div> to preserve its content and layout\n     */\n    if (\"outerHTML\" in oldNode) {\n      if (!wysihtml5.browser.autoClosesUnclosedTags() &&\n          oldNode.nodeName === \"P\" &&\n          oldNode.outerHTML.slice(-4).toLowerCase() !== \"</p>\") {\n        nodeName = \"div\";\n      }\n    }\n\n    if (nodeName in tagRules) {\n      rule = tagRules[nodeName];\n      if (!rule || rule.remove) {\n        return null;\n      } else if (rule.unwrap) {\n        return false;\n      }\n      rule = typeof(rule) === \"string\" ? { rename_tag: rule } : rule;\n    } else if (oldNode.firstChild) {\n      rule = { rename_tag: DEFAULT_NODE_NAME };\n    } else {\n      // Remove empty unknown elements\n      return null;\n    }\n\n    // tests if type condition is met or node should be removed/unwrapped/renamed\n    if (rule.one_of_type && !_testTypes(oldNode, currentRules, rule.one_of_type, clearInternals)) {\n      if (rule.remove_action) {\n        if (rule.remove_action === \"unwrap\") {\n          return false;\n        } else if (rule.remove_action === \"rename\") {\n          renameTag = rule.remove_action_rename_to || DEFAULT_NODE_NAME;\n        } else {\n          return null;\n        }\n      } else {\n        return null;\n      }\n    }\n\n    newNode = oldNode.ownerDocument.createElement(renameTag || rule.rename_tag || nodeName);\n    _handleAttributes(oldNode, newNode, rule, clearInternals);\n    _handleStyles(oldNode, newNode, rule);\n\n    oldNode = null;\n\n    if (newNode.normalize) { newNode.normalize(); }\n    return newNode;\n  }\n\n  function _testTypes(oldNode, rules, types, clearInternals) {\n    var definition, type;\n\n    // do not interfere with placeholder span or pasting caret position is not maintained\n    if (oldNode.nodeName === \"SPAN\" && !clearInternals && (oldNode.className === \"_wysihtml5-temp-placeholder\" || oldNode.className === \"rangySelectionBoundary\")) {\n      return true;\n    }\n\n    for (type in types) {\n      if (types.hasOwnProperty(type) && rules.type_definitions && rules.type_definitions[type]) {\n        definition = rules.type_definitions[type];\n        if (_testType(oldNode, definition)) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  function array_contains(a, obj) {\n      var i = a.length;\n      while (i--) {\n         if (a[i] === obj) {\n             return true;\n         }\n      }\n      return false;\n  }\n\n  function _testType(oldNode, definition) {\n\n    var nodeClasses = oldNode.getAttribute(\"class\"),\n        nodeStyles =  oldNode.getAttribute(\"style\"),\n        classesLength, s, s_corrected, a, attr, currentClass, styleProp;\n\n    // test for methods\n    if (definition.methods) {\n      for (var m in definition.methods) {\n        if (definition.methods.hasOwnProperty(m) && typeCeckMethods[m]) {\n\n          if (typeCeckMethods[m](oldNode)) {\n            return true;\n          }\n        }\n      }\n    }\n\n    // test for classes, if one found return true\n    if (nodeClasses && definition.classes) {\n      nodeClasses = nodeClasses.replace(/^\\s+/g, '').replace(/\\s+$/g, '').split(WHITE_SPACE_REG_EXP);\n      classesLength = nodeClasses.length;\n      for (var i = 0; i < classesLength; i++) {\n        if (definition.classes[nodeClasses[i]]) {\n          return true;\n        }\n      }\n    }\n\n    // test for styles, if one found return true\n    if (nodeStyles && definition.styles) {\n\n      nodeStyles = nodeStyles.split(';');\n      for (s in definition.styles) {\n        if (definition.styles.hasOwnProperty(s)) {\n          for (var sp = nodeStyles.length; sp--;) {\n            styleProp = nodeStyles[sp].split(':');\n\n            if (styleProp[0].replace(/\\s/g, '').toLowerCase() === s) {\n              if (definition.styles[s] === true || definition.styles[s] === 1 || wysihtml5.lang.array(definition.styles[s]).contains(styleProp[1].replace(/\\s/g, '').toLowerCase()) ) {\n                return true;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    // test for attributes in general against regex match\n    if (definition.attrs) {\n        for (a in definition.attrs) {\n            if (definition.attrs.hasOwnProperty(a)) {\n                attr = wysihtml5.dom.getAttribute(oldNode, a);\n                if (typeof(attr) === \"string\") {\n                    if (attr.search(definition.attrs[a]) > -1) {\n                        return true;\n                    }\n                }\n            }\n        }\n    }\n    return false;\n  }\n\n  function _handleStyles(oldNode, newNode, rule) {\n    var s, v;\n    if(rule && rule.keep_styles) {\n      for (s in rule.keep_styles) {\n        if (rule.keep_styles.hasOwnProperty(s)) {\n          v = (s === \"float\") ? oldNode.style.styleFloat || oldNode.style.cssFloat : oldNode.style[s];\n          // value can be regex and if so should match or style skipped\n          if (rule.keep_styles[s] instanceof RegExp && !(rule.keep_styles[s].test(v))) {\n            continue;\n          }\n          if (s === \"float\") {\n            // IE compability\n            newNode.style[(oldNode.style.styleFloat) ? 'styleFloat': 'cssFloat'] = v;\n           } else if (oldNode.style[s]) {\n             newNode.style[s] = v;\n           }\n        }\n      }\n    }\n  };\n\n  function _getAttributesBeginningWith(beginning, attributes) {\n    var returnAttributes = [];\n    for (var attr in attributes) {\n      if (attributes.hasOwnProperty(attr) && attr.indexOf(beginning) === 0) {\n        returnAttributes.push(attr);\n      }\n    }\n    return returnAttributes;\n  }\n\n  function _checkAttribute(attributeName, attributeValue, methodName, nodeName) {\n    var method = attributeCheckMethods[methodName],\n        newAttributeValue;\n\n    if (method) {\n      if (attributeValue || (attributeName === \"alt\" && nodeName == \"IMG\")) {\n        newAttributeValue = method(attributeValue);\n        if (typeof(newAttributeValue) === \"string\") {\n          return newAttributeValue;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  function _checkAttributes(oldNode, local_attributes) {\n    var globalAttributes  = wysihtml5.lang.object(currentRules.attributes || {}).clone(), // global values for check/convert values of attributes\n        checkAttributes   = wysihtml5.lang.object(globalAttributes).merge( wysihtml5.lang.object(local_attributes || {}).clone()).get(),\n        attributes        = {},\n        oldAttributes     = wysihtml5.dom.getAttributes(oldNode),\n        attributeName, newValue, matchingAttributes;\n\n    for (attributeName in checkAttributes) {\n      if ((/\\*$/).test(attributeName)) {\n\n        matchingAttributes = _getAttributesBeginningWith(attributeName.slice(0,-1), oldAttributes);\n        for (var i = 0, imax = matchingAttributes.length; i < imax; i++) {\n\n          newValue = _checkAttribute(matchingAttributes[i], oldAttributes[matchingAttributes[i]], checkAttributes[attributeName], oldNode.nodeName);\n          if (newValue !== false) {\n            attributes[matchingAttributes[i]] = newValue;\n          }\n        }\n      } else {\n        newValue = _checkAttribute(attributeName, oldAttributes[attributeName], checkAttributes[attributeName], oldNode.nodeName);\n        if (newValue !== false) {\n          attributes[attributeName] = newValue;\n        }\n      }\n    }\n\n    return attributes;\n  }\n\n  // TODO: refactor. Too long to read\n  function _handleAttributes(oldNode, newNode, rule, clearInternals) {\n    var attributes          = {},                         // fresh new set of attributes to set on newNode\n        setClass            = rule.set_class,             // classes to set\n        addClass            = rule.add_class,             // add classes based on existing attributes\n        addStyle            = rule.add_style,             // add styles based on existing attributes\n        setAttributes       = rule.set_attributes,        // attributes to set on the current node\n        allowedClasses      = currentRules.classes,\n        i                   = 0,\n        classes             = [],\n        styles              = [],\n        newClasses          = [],\n        oldClasses          = [],\n        classesLength,\n        newClassesLength,\n        currentClass,\n        newClass,\n        attributeName,\n        method;\n\n    if (setAttributes) {\n      attributes = wysihtml5.lang.object(setAttributes).clone();\n    }\n\n    // check/convert values of attributes\n    attributes = wysihtml5.lang.object(attributes).merge(_checkAttributes(oldNode,  rule.check_attributes)).get();\n\n    if (setClass) {\n      classes.push(setClass);\n    }\n\n    if (addClass) {\n      for (attributeName in addClass) {\n        method = addClassMethods[addClass[attributeName]];\n        if (!method) {\n          continue;\n        }\n        newClass = method(wysihtml5.dom.getAttribute(oldNode, attributeName));\n        if (typeof(newClass) === \"string\") {\n          classes.push(newClass);\n        }\n      }\n    }\n\n    if (addStyle) {\n      for (attributeName in addStyle) {\n        method = addStyleMethods[addStyle[attributeName]];\n        if (!method) {\n          continue;\n        }\n\n        newStyle = method(wysihtml5.dom.getAttribute(oldNode, attributeName));\n        if (typeof(newStyle) === \"string\") {\n          styles.push(newStyle);\n        }\n      }\n    }\n\n\n    if (typeof(allowedClasses) === \"string\" && allowedClasses === \"any\" && oldNode.getAttribute(\"class\")) {\n      if (currentRules.classes_blacklist) {\n        oldClasses = oldNode.getAttribute(\"class\");\n        if (oldClasses) {\n          classes = classes.concat(oldClasses.split(WHITE_SPACE_REG_EXP));\n        }\n\n        classesLength = classes.length;\n        for (; i<classesLength; i++) {\n          currentClass = classes[i];\n          if (!currentRules.classes_blacklist[currentClass]) {\n            newClasses.push(currentClass);\n          }\n        }\n\n        if (newClasses.length) {\n          attributes[\"class\"] = wysihtml5.lang.array(newClasses).unique().join(\" \");\n        }\n\n      } else {\n        attributes[\"class\"] = oldNode.getAttribute(\"class\");\n      }\n    } else {\n      // make sure that wysihtml5 temp class doesn't get stripped out\n      if (!clearInternals) {\n        allowedClasses[\"_wysihtml5-temp-placeholder\"] = 1;\n        allowedClasses[\"_rangySelectionBoundary\"] = 1;\n        allowedClasses[\"wysiwyg-tmp-selected-cell\"] = 1;\n      }\n\n      // add old classes last\n      oldClasses = oldNode.getAttribute(\"class\");\n      if (oldClasses) {\n        classes = classes.concat(oldClasses.split(WHITE_SPACE_REG_EXP));\n      }\n      classesLength = classes.length;\n      for (; i<classesLength; i++) {\n        currentClass = classes[i];\n        if (allowedClasses[currentClass]) {\n          newClasses.push(currentClass);\n        }\n      }\n\n      if (newClasses.length) {\n        attributes[\"class\"] = wysihtml5.lang.array(newClasses).unique().join(\" \");\n      }\n    }\n\n    // remove table selection class if present\n    if (attributes[\"class\"] && clearInternals) {\n      attributes[\"class\"] = attributes[\"class\"].replace(\"wysiwyg-tmp-selected-cell\", \"\");\n      if ((/^\\s*$/g).test(attributes[\"class\"])) {\n        delete attributes[\"class\"];\n      }\n    }\n\n    if (styles.length) {\n      attributes[\"style\"] = wysihtml5.lang.array(styles).unique().join(\" \");\n    }\n\n    // set attributes on newNode\n    for (attributeName in attributes) {\n      // Setting attributes can cause a js error in IE under certain circumstances\n      // eg. on a <img> under https when it's new attribute value is non-https\n      // TODO: Investigate this further and check for smarter handling\n      try {\n        newNode.setAttribute(attributeName, attributes[attributeName]);\n      } catch(e) {}\n    }\n\n    // IE8 sometimes loses the width/height attributes when those are set before the \"src\"\n    // so we make sure to set them again\n    if (attributes.src) {\n      if (typeof(attributes.width) !== \"undefined\") {\n        newNode.setAttribute(\"width\", attributes.width);\n      }\n      if (typeof(attributes.height) !== \"undefined\") {\n        newNode.setAttribute(\"height\", attributes.height);\n      }\n    }\n  }\n\n  var INVISIBLE_SPACE_REG_EXP = /\\uFEFF/g;\n  function _handleText(oldNode) {\n    var nextSibling = oldNode.nextSibling;\n    if (nextSibling && nextSibling.nodeType === wysihtml5.TEXT_NODE) {\n      // Concatenate text nodes\n      nextSibling.data = oldNode.data.replace(INVISIBLE_SPACE_REG_EXP, \"\") + nextSibling.data.replace(INVISIBLE_SPACE_REG_EXP, \"\");\n    } else {\n      // \\uFEFF = wysihtml5.INVISIBLE_SPACE (used as a hack in certain rich text editing situations)\n      var data = oldNode.data.replace(INVISIBLE_SPACE_REG_EXP, \"\");\n      return oldNode.ownerDocument.createTextNode(data);\n    }\n  }\n\n  function _handleComment(oldNode) {\n    if (currentRules.comments) {\n      return oldNode.ownerDocument.createComment(oldNode.nodeValue);\n    }\n  }\n\n  // ------------ attribute checks ------------ \\\\\n  var attributeCheckMethods = {\n    url: (function() {\n      var REG_EXP = /^https?:\\/\\//i;\n      return function(attributeValue) {\n        if (!attributeValue || !attributeValue.match(REG_EXP)) {\n          return null;\n        }\n        return attributeValue.replace(REG_EXP, function(match) {\n          return match.toLowerCase();\n        });\n      };\n    })(),\n\n    src: (function() {\n      var REG_EXP = /^(\\/|https?:\\/\\/)/i;\n      return function(attributeValue) {\n        if (!attributeValue || !attributeValue.match(REG_EXP)) {\n          return null;\n        }\n        return attributeValue.replace(REG_EXP, function(match) {\n          return match.toLowerCase();\n        });\n      };\n    })(),\n\n    href: (function() {\n      var REG_EXP = /^(#|\\/|https?:\\/\\/|mailto:)/i;\n      return function(attributeValue) {\n        if (!attributeValue || !attributeValue.match(REG_EXP)) {\n          return null;\n        }\n        return attributeValue.replace(REG_EXP, function(match) {\n          return match.toLowerCase();\n        });\n      };\n    })(),\n\n    alt: (function() {\n      var REG_EXP = /[^ a-z0-9_\\-]/gi;\n      return function(attributeValue) {\n        if (!attributeValue) {\n          return \"\";\n        }\n        return attributeValue.replace(REG_EXP, \"\");\n      };\n    })(),\n\n    numbers: (function() {\n      var REG_EXP = /\\D/g;\n      return function(attributeValue) {\n        attributeValue = (attributeValue || \"\").replace(REG_EXP, \"\");\n        return attributeValue || null;\n      };\n    })(),\n\n    any: (function() {\n      return function(attributeValue) {\n        return attributeValue;\n      };\n    })()\n  };\n\n  // ------------ style converter (converts an html attribute to a style) ------------ \\\\\n  var addStyleMethods = {\n    align_text: (function() {\n      var mapping = {\n        left:     \"text-align: left;\",\n        right:    \"text-align: right;\",\n        center:   \"text-align: center;\"\n      };\n      return function(attributeValue) {\n        return mapping[String(attributeValue).toLowerCase()];\n      };\n    })(),\n  };\n\n  // ------------ class converter (converts an html attribute to a class name) ------------ \\\\\n  var addClassMethods = {\n    align_img: (function() {\n      var mapping = {\n        left:   \"wysiwyg-float-left\",\n        right:  \"wysiwyg-float-right\"\n      };\n      return function(attributeValue) {\n        return mapping[String(attributeValue).toLowerCase()];\n      };\n    })(),\n\n    align_text: (function() {\n      var mapping = {\n        left:     \"wysiwyg-text-align-left\",\n        right:    \"wysiwyg-text-align-right\",\n        center:   \"wysiwyg-text-align-center\",\n        justify:  \"wysiwyg-text-align-justify\"\n      };\n      return function(attributeValue) {\n        return mapping[String(attributeValue).toLowerCase()];\n      };\n    })(),\n\n    clear_br: (function() {\n      var mapping = {\n        left:   \"wysiwyg-clear-left\",\n        right:  \"wysiwyg-clear-right\",\n        both:   \"wysiwyg-clear-both\",\n        all:    \"wysiwyg-clear-both\"\n      };\n      return function(attributeValue) {\n        return mapping[String(attributeValue).toLowerCase()];\n      };\n    })(),\n\n    size_font: (function() {\n      var mapping = {\n        \"1\": \"wysiwyg-font-size-xx-small\",\n        \"2\": \"wysiwyg-font-size-small\",\n        \"3\": \"wysiwyg-font-size-medium\",\n        \"4\": \"wysiwyg-font-size-large\",\n        \"5\": \"wysiwyg-font-size-x-large\",\n        \"6\": \"wysiwyg-font-size-xx-large\",\n        \"7\": \"wysiwyg-font-size-xx-large\",\n        \"-\": \"wysiwyg-font-size-smaller\",\n        \"+\": \"wysiwyg-font-size-larger\"\n      };\n      return function(attributeValue) {\n        return mapping[String(attributeValue).charAt(0)];\n      };\n    })()\n  };\n\n  // checks if element is possibly visible\n  var typeCeckMethods = {\n    has_visible_contet: (function() {\n      var txt,\n          isVisible = false,\n          visibleElements = ['img', 'video', 'picture', 'br', 'script', 'noscript',\n                             'style', 'table', 'iframe', 'object', 'embed', 'audio',\n                             'svg', 'input', 'button', 'select','textarea', 'canvas'];\n\n      return function(el) {\n\n        // has visible innertext. so is visible\n        txt = (el.innerText || el.textContent).replace(/\\s/g, '');\n        if (txt && txt.length > 0) {\n          return true;\n        }\n\n        // matches list of visible dimensioned elements\n        for (var i = visibleElements.length; i--;) {\n          if (el.querySelector(visibleElements[i])) {\n            return true;\n          }\n        }\n\n        // try to measure dimesions in last resort. (can find only of elements in dom)\n        if (el.offsetWidth && el.offsetWidth > 0 && el.offsetHeight && el.offsetHeight > 0) {\n          return true;\n        }\n\n        return false;\n      };\n    })()\n  };\n\n  var elementHandlingMethods = {\n    unwrap: function (element) {\n      wysihtml5.dom.unwrap(element);\n    },\n\n    remove: function (element) {\n      element.parentNode.removeChild(element);\n    }\n  };\n\n  return parse(elementOrHtml_current, config_current);\n};\n;/**\n * Checks for empty text node childs and removes them\n *\n * @param {Element} node The element in which to cleanup\n * @example\n *    wysihtml5.dom.removeEmptyTextNodes(element);\n */\nwysihtml5.dom.removeEmptyTextNodes = function(node) {\n  var childNode,\n      childNodes        = wysihtml5.lang.array(node.childNodes).get(),\n      childNodesLength  = childNodes.length,\n      i                 = 0;\n  for (; i<childNodesLength; i++) {\n    childNode = childNodes[i];\n    if (childNode.nodeType === wysihtml5.TEXT_NODE && childNode.data === \"\") {\n      childNode.parentNode.removeChild(childNode);\n    }\n  }\n};\n;/**\n * Renames an element (eg. a <div> to a <p>) and keeps its childs\n *\n * @param {Element} element The list element which should be renamed\n * @param {Element} newNodeName The desired tag name\n *\n * @example\n *    <!-- Assume the following dom: -->\n *    <ul id=\"list\">\n *      <li>eminem</li>\n *      <li>dr. dre</li>\n *      <li>50 Cent</li>\n *    </ul>\n *\n *    <script>\n *      wysihtml5.dom.renameElement(document.getElementById(\"list\"), \"ol\");\n *    </script>\n *\n *    <!-- Will result in: -->\n *    <ol>\n *      <li>eminem</li>\n *      <li>dr. dre</li>\n *      <li>50 Cent</li>\n *    </ol>\n */\nwysihtml5.dom.renameElement = function(element, newNodeName) {\n  var newElement = element.ownerDocument.createElement(newNodeName),\n      firstChild;\n  while (firstChild = element.firstChild) {\n    newElement.appendChild(firstChild);\n  }\n  wysihtml5.dom.copyAttributes([\"align\", \"className\"]).from(element).to(newElement);\n  element.parentNode.replaceChild(newElement, element);\n  return newElement;\n};\n;/**\n * Takes an element, removes it and replaces it with it's childs\n *\n * @param {Object} node The node which to replace with it's child nodes\n * @example\n *    <div id=\"foo\">\n *      <span>hello</span>\n *    </div>\n *    <script>\n *      // Remove #foo and replace with it's children\n *      wysihtml5.dom.replaceWithChildNodes(document.getElementById(\"foo\"));\n *    </script>\n */\nwysihtml5.dom.replaceWithChildNodes = function(node) {\n  if (!node.parentNode) {\n    return;\n  }\n\n  if (!node.firstChild) {\n    node.parentNode.removeChild(node);\n    return;\n  }\n\n  var fragment = node.ownerDocument.createDocumentFragment();\n  while (node.firstChild) {\n    fragment.appendChild(node.firstChild);\n  }\n  node.parentNode.replaceChild(fragment, node);\n  node = fragment = null;\n};\n;/**\n * Unwraps an unordered/ordered list\n *\n * @param {Element} element The list element which should be unwrapped\n *\n * @example\n *    <!-- Assume the following dom: -->\n *    <ul id=\"list\">\n *      <li>eminem</li>\n *      <li>dr. dre</li>\n *      <li>50 Cent</li>\n *    </ul>\n *\n *    <script>\n *      wysihtml5.dom.resolveList(document.getElementById(\"list\"));\n *    </script>\n *\n *    <!-- Will result in: -->\n *    eminem<br>\n *    dr. dre<br>\n *    50 Cent<br>\n */\n(function(dom) {\n  function _isBlockElement(node) {\n    return dom.getStyle(\"display\").from(node) === \"block\";\n  }\n\n  function _isLineBreak(node) {\n    return node.nodeName === \"BR\";\n  }\n\n  function _appendLineBreak(element) {\n    var lineBreak = element.ownerDocument.createElement(\"br\");\n    element.appendChild(lineBreak);\n  }\n\n  function resolveList(list, useLineBreaks) {\n    if (!list.nodeName.match(/^(MENU|UL|OL)$/)) {\n      return;\n    }\n\n    var doc             = list.ownerDocument,\n        fragment        = doc.createDocumentFragment(),\n        previousSibling = wysihtml5.dom.domNode(list).prev({ignoreBlankTexts: true}),\n        firstChild,\n        lastChild,\n        isLastChild,\n        shouldAppendLineBreak,\n        paragraph,\n        listItem;\n\n    if (useLineBreaks) {\n      // Insert line break if list is after a non-block element\n      if (previousSibling && !_isBlockElement(previousSibling) && !_isLineBreak(previousSibling)) {\n        _appendLineBreak(fragment);\n      }\n\n      while (listItem = (list.firstElementChild || list.firstChild)) {\n        lastChild = listItem.lastChild;\n        while (firstChild = listItem.firstChild) {\n          isLastChild           = firstChild === lastChild;\n          // This needs to be done before appending it to the fragment, as it otherwise will lose style information\n          shouldAppendLineBreak = isLastChild && !_isBlockElement(firstChild) && !_isLineBreak(firstChild);\n          fragment.appendChild(firstChild);\n          if (shouldAppendLineBreak) {\n            _appendLineBreak(fragment);\n          }\n        }\n\n        listItem.parentNode.removeChild(listItem);\n      }\n    } else {\n      while (listItem = (list.firstElementChild || list.firstChild)) {\n        if (listItem.querySelector && listItem.querySelector(\"div, p, ul, ol, menu, blockquote, h1, h2, h3, h4, h5, h6\")) {\n          while (firstChild = listItem.firstChild) {\n            fragment.appendChild(firstChild);\n          }\n        } else {\n          paragraph = doc.createElement(\"p\");\n          while (firstChild = listItem.firstChild) {\n            paragraph.appendChild(firstChild);\n          }\n          fragment.appendChild(paragraph);\n        }\n        listItem.parentNode.removeChild(listItem);\n      }\n    }\n\n    list.parentNode.replaceChild(fragment, list);\n  }\n\n  dom.resolveList = resolveList;\n})(wysihtml5.dom);\n;/**\n * Sandbox for executing javascript, parsing css styles and doing dom operations in a secure way\n *\n * Browser Compatibility:\n *  - Secure in MSIE 6+, but only when the user hasn't made changes to his security level \"restricted\"\n *  - Partially secure in other browsers (Firefox, Opera, Safari, Chrome, ...)\n *\n * Please note that this class can't benefit from the HTML5 sandbox attribute for the following reasons:\n *    - sandboxing doesn't work correctly with inlined content (src=\"javascript:'<html>...</html>'\")\n *    - sandboxing of physical documents causes that the dom isn't accessible anymore from the outside (iframe.contentWindow, ...)\n *    - setting the \"allow-same-origin\" flag would fix that, but then still javascript and dom events refuse to fire\n *    - therefore the \"allow-scripts\" flag is needed, which then would deactivate any security, as the js executed inside the iframe\n *      can do anything as if the sandbox attribute wasn't set\n *\n * @param {Function} [readyCallback] Method that gets invoked when the sandbox is ready\n * @param {Object} [config] Optional parameters\n *\n * @example\n *    new wysihtml5.dom.Sandbox(function(sandbox) {\n *      sandbox.getWindow().document.body.innerHTML = '<img src=foo.gif onerror=\"alert(document.cookie)\">';\n *    });\n */\n(function(wysihtml5) {\n  var /**\n       * Default configuration\n       */\n      doc                 = document,\n      /**\n       * Properties to unset/protect on the window object\n       */\n      windowProperties    = [\n        \"parent\", \"top\", \"opener\", \"frameElement\", \"frames\",\n        \"localStorage\", \"globalStorage\", \"sessionStorage\", \"indexedDB\"\n      ],\n      /**\n       * Properties on the window object which are set to an empty function\n       */\n      windowProperties2   = [\n        \"open\", \"close\", \"openDialog\", \"showModalDialog\",\n        \"alert\", \"confirm\", \"prompt\",\n        \"openDatabase\", \"postMessage\",\n        \"XMLHttpRequest\", \"XDomainRequest\"\n      ],\n      /**\n       * Properties to unset/protect on the document object\n       */\n      documentProperties  = [\n        \"referrer\",\n        \"write\", \"open\", \"close\"\n      ];\n\n  wysihtml5.dom.Sandbox = Base.extend(\n    /** @scope wysihtml5.dom.Sandbox.prototype */ {\n\n    constructor: function(readyCallback, config) {\n      this.callback = readyCallback || wysihtml5.EMPTY_FUNCTION;\n      this.config   = wysihtml5.lang.object({}).merge(config).get();\n      this.editableArea   = this._createIframe();\n    },\n\n    insertInto: function(element) {\n      if (typeof(element) === \"string\") {\n        element = doc.getElementById(element);\n      }\n\n      element.appendChild(this.editableArea);\n    },\n\n    getIframe: function() {\n      return this.editableArea;\n    },\n\n    getWindow: function() {\n      this._readyError();\n    },\n\n    getDocument: function() {\n      this._readyError();\n    },\n\n    destroy: function() {\n      var iframe = this.getIframe();\n      iframe.parentNode.removeChild(iframe);\n    },\n\n    _readyError: function() {\n      throw new Error(\"wysihtml5.Sandbox: Sandbox iframe isn't loaded yet\");\n    },\n\n    /**\n     * Creates the sandbox iframe\n     *\n     * Some important notes:\n     *  - We can't use HTML5 sandbox for now:\n     *    setting it causes that the iframe's dom can't be accessed from the outside\n     *    Therefore we need to set the \"allow-same-origin\" flag which enables accessing the iframe's dom\n     *    But then there's another problem, DOM events (focus, blur, change, keypress, ...) aren't fired.\n     *    In order to make this happen we need to set the \"allow-scripts\" flag.\n     *    A combination of allow-scripts and allow-same-origin is almost the same as setting no sandbox attribute at all.\n     *  - Chrome & Safari, doesn't seem to support sandboxing correctly when the iframe's html is inlined (no physical document)\n     *  - IE needs to have the security=\"restricted\" attribute set before the iframe is\n     *    inserted into the dom tree\n     *  - Believe it or not but in IE \"security\" in document.createElement(\"iframe\") is false, even\n     *    though it supports it\n     *  - When an iframe has security=\"restricted\", in IE eval() & execScript() don't work anymore\n     *  - IE doesn't fire the onload event when the content is inlined in the src attribute, therefore we rely\n     *    on the onreadystatechange event\n     */\n    _createIframe: function() {\n      var that   = this,\n          iframe = doc.createElement(\"iframe\");\n      iframe.className = \"wysihtml5-sandbox\";\n      wysihtml5.dom.setAttributes({\n        \"security\":           \"restricted\",\n        \"allowtransparency\":  \"true\",\n        \"frameborder\":        0,\n        \"width\":              0,\n        \"height\":             0,\n        \"marginwidth\":        0,\n        \"marginheight\":       0\n      }).on(iframe);\n\n      // Setting the src like this prevents ssl warnings in IE6\n      if (wysihtml5.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()) {\n        iframe.src = \"javascript:'<html></html>'\";\n      }\n\n      iframe.onload = function() {\n        iframe.onreadystatechange = iframe.onload = null;\n        that._onLoadIframe(iframe);\n      };\n\n      iframe.onreadystatechange = function() {\n        if (/loaded|complete/.test(iframe.readyState)) {\n          iframe.onreadystatechange = iframe.onload = null;\n          that._onLoadIframe(iframe);\n        }\n      };\n\n      return iframe;\n    },\n\n    /**\n     * Callback for when the iframe has finished loading\n     */\n    _onLoadIframe: function(iframe) {\n      // don't resume when the iframe got unloaded (eg. by removing it from the dom)\n      if (!wysihtml5.dom.contains(doc.documentElement, iframe)) {\n        return;\n      }\n\n      var that           = this,\n          iframeWindow   = iframe.contentWindow,\n          iframeDocument = iframe.contentWindow.document,\n          charset        = doc.characterSet || doc.charset || \"utf-8\",\n          sandboxHtml    = this._getHtml({\n            charset:      charset,\n            stylesheets:  this.config.stylesheets\n          });\n\n      // Create the basic dom tree including proper DOCTYPE and charset\n      iframeDocument.open(\"text/html\", \"replace\");\n      iframeDocument.write(sandboxHtml);\n      iframeDocument.close();\n\n      this.getWindow = function() { return iframe.contentWindow; };\n      this.getDocument = function() { return iframe.contentWindow.document; };\n\n      // Catch js errors and pass them to the parent's onerror event\n      // addEventListener(\"error\") doesn't work properly in some browsers\n      // TODO: apparently this doesn't work in IE9!\n      iframeWindow.onerror = function(errorMessage, fileName, lineNumber) {\n        throw new Error(\"wysihtml5.Sandbox: \" + errorMessage, fileName, lineNumber);\n      };\n\n      if (!wysihtml5.browser.supportsSandboxedIframes()) {\n        // Unset a bunch of sensitive variables\n        // Please note: This isn't hack safe!\n        // It more or less just takes care of basic attacks and prevents accidental theft of sensitive information\n        // IE is secure though, which is the most important thing, since IE is the only browser, who\n        // takes over scripts & styles into contentEditable elements when copied from external websites\n        // or applications (Microsoft Word, ...)\n        var i, length;\n        for (i=0, length=windowProperties.length; i<length; i++) {\n          this._unset(iframeWindow, windowProperties[i]);\n        }\n        for (i=0, length=windowProperties2.length; i<length; i++) {\n          this._unset(iframeWindow, windowProperties2[i], wysihtml5.EMPTY_FUNCTION);\n        }\n        for (i=0, length=documentProperties.length; i<length; i++) {\n          this._unset(iframeDocument, documentProperties[i]);\n        }\n        // This doesn't work in Safari 5\n        // See http://stackoverflow.com/questions/992461/is-it-possible-to-override-document-cookie-in-webkit\n        this._unset(iframeDocument, \"cookie\", \"\", true);\n      }\n\n      this.loaded = true;\n\n      // Trigger the callback\n      setTimeout(function() { that.callback(that); }, 0);\n    },\n\n    _getHtml: function(templateVars) {\n      var stylesheets = templateVars.stylesheets,\n          html        = \"\",\n          i           = 0,\n          length;\n      stylesheets = typeof(stylesheets) === \"string\" ? [stylesheets] : stylesheets;\n      if (stylesheets) {\n        length = stylesheets.length;\n        for (; i<length; i++) {\n          html += '<link rel=\"stylesheet\" href=\"' + stylesheets[i] + '\">';\n        }\n      }\n      templateVars.stylesheets = html;\n\n      return wysihtml5.lang.string(\n        '<!DOCTYPE html><html><head>'\n        + '<meta charset=\"#{charset}\">#{stylesheets}</head>'\n        + '<body></body></html>'\n      ).interpolate(templateVars);\n    },\n\n    /**\n     * Method to unset/override existing variables\n     * @example\n     *    // Make cookie unreadable and unwritable\n     *    this._unset(document, \"cookie\", \"\", true);\n     */\n    _unset: function(object, property, value, setter) {\n      try { object[property] = value; } catch(e) {}\n\n      try { object.__defineGetter__(property, function() { return value; }); } catch(e) {}\n      if (setter) {\n        try { object.__defineSetter__(property, function() {}); } catch(e) {}\n      }\n\n      if (!wysihtml5.browser.crashesWhenDefineProperty(property)) {\n        try {\n          var config = {\n            get: function() { return value; }\n          };\n          if (setter) {\n            config.set = function() {};\n          }\n          Object.defineProperty(object, property, config);\n        } catch(e) {}\n      }\n    }\n  });\n})(wysihtml5);\n;(function(wysihtml5) {\n  var doc = document;\n  wysihtml5.dom.ContentEditableArea = Base.extend({\n      getContentEditable: function() {\n        return this.element;\n      },\n\n      getWindow: function() {\n        return this.element.ownerDocument.defaultView;\n      },\n\n      getDocument: function() {\n        return this.element.ownerDocument;\n      },\n\n      constructor: function(readyCallback, config, contentEditable) {\n        this.callback = readyCallback || wysihtml5.EMPTY_FUNCTION;\n        this.config   = wysihtml5.lang.object({}).merge(config).get();\n        if (contentEditable) {\n            this.element = this._bindElement(contentEditable);\n        } else {\n            this.element = this._createElement();\n        }\n      },\n\n      // creates a new contenteditable and initiates it\n      _createElement: function() {\n        var element = doc.createElement(\"div\");\n        element.className = \"wysihtml5-sandbox\";\n        this._loadElement(element);\n        return element;\n      },\n\n      // initiates an allready existent contenteditable\n      _bindElement: function(contentEditable) {\n        contentEditable.className = (contentEditable.className && contentEditable.className != '') ? contentEditable.className + \" wysihtml5-sandbox\" : \"wysihtml5-sandbox\";\n        this._loadElement(contentEditable, true);\n        return contentEditable;\n      },\n\n      _loadElement: function(element, contentExists) {\n          var that = this;\n        if (!contentExists) {\n            var sandboxHtml = this._getHtml();\n            element.innerHTML = sandboxHtml;\n        }\n\n        this.getWindow = function() { return element.ownerDocument.defaultView; };\n        this.getDocument = function() { return element.ownerDocument; };\n\n        // Catch js errors and pass them to the parent's onerror event\n        // addEventListener(\"error\") doesn't work properly in some browsers\n        // TODO: apparently this doesn't work in IE9!\n        // TODO: figure out and bind the errors logic for contenteditble mode\n        /*iframeWindow.onerror = function(errorMessage, fileName, lineNumber) {\n          throw new Error(\"wysihtml5.Sandbox: \" + errorMessage, fileName, lineNumber);\n        }\n        */\n        this.loaded = true;\n        // Trigger the callback\n        setTimeout(function() { that.callback(that); }, 0);\n      },\n\n      _getHtml: function(templateVars) {\n        return '';\n      }\n\n  });\n})(wysihtml5);\n;(function() {\n  var mapping = {\n    \"className\": \"class\"\n  };\n  wysihtml5.dom.setAttributes = function(attributes) {\n    return {\n      on: function(element) {\n        for (var i in attributes) {\n          element.setAttribute(mapping[i] || i, attributes[i]);\n        }\n      }\n    };\n  };\n})();\n;wysihtml5.dom.setStyles = function(styles) {\n  return {\n    on: function(element) {\n      var style = element.style;\n      if (typeof(styles) === \"string\") {\n        style.cssText += \";\" + styles;\n        return;\n      }\n      for (var i in styles) {\n        if (i === \"float\") {\n          style.cssFloat = styles[i];\n          style.styleFloat = styles[i];\n        } else {\n          style[i] = styles[i];\n        }\n      }\n    }\n  };\n};\n;/**\n * Simulate HTML5 placeholder attribute\n *\n * Needed since\n *    - div[contentEditable] elements don't support it\n *    - older browsers (such as IE8 and Firefox 3.6) don't support it at all\n *\n * @param {Object} parent Instance of main wysihtml5.Editor class\n * @param {Element} view Instance of wysihtml5.views.* class\n * @param {String} placeholderText\n *\n * @example\n *    wysihtml.dom.simulatePlaceholder(this, composer, \"Foobar\");\n */\n(function(dom) {\n  dom.simulatePlaceholder = function(editor, view, placeholderText) {\n    var CLASS_NAME = \"placeholder\",\n        unset = function() {\n          var composerIsVisible   = view.element.offsetWidth > 0 && view.element.offsetHeight > 0;\n          if (view.hasPlaceholderSet()) {\n            view.clear();\n            view.element.focus();\n            if (composerIsVisible ) {\n              setTimeout(function() {\n                var sel = view.selection.getSelection();\n                if (!sel.focusNode || !sel.anchorNode) {\n                  view.selection.selectNode(view.element.firstChild || view.element);\n                }\n              }, 0);\n            }\n          }\n          view.placeholderSet = false;\n          dom.removeClass(view.element, CLASS_NAME);\n        },\n        set = function() {\n          if (view.isEmpty()) {\n            view.placeholderSet = true;\n            view.setValue(placeholderText);\n            dom.addClass(view.element, CLASS_NAME);\n          }\n        };\n\n    editor\n      .on(\"set_placeholder\", set)\n      .on(\"unset_placeholder\", unset)\n      .on(\"focus:composer\", unset)\n      .on(\"paste:composer\", unset)\n      .on(\"blur:composer\", set);\n\n    set();\n  };\n})(wysihtml5.dom);\n;(function(dom) {\n  var documentElement = document.documentElement;\n  if (\"textContent\" in documentElement) {\n    dom.setTextContent = function(element, text) {\n      element.textContent = text;\n    };\n\n    dom.getTextContent = function(element) {\n      return element.textContent;\n    };\n  } else if (\"innerText\" in documentElement) {\n    dom.setTextContent = function(element, text) {\n      element.innerText = text;\n    };\n\n    dom.getTextContent = function(element) {\n      return element.innerText;\n    };\n  } else {\n    dom.setTextContent = function(element, text) {\n      element.nodeValue = text;\n    };\n\n    dom.getTextContent = function(element) {\n      return element.nodeValue;\n    };\n  }\n})(wysihtml5.dom);\n\n;/**\n * Get a set of attribute from one element\n *\n * IE gives wrong results for hasAttribute/getAttribute, for example:\n *    var td = document.createElement(\"td\");\n *    td.getAttribute(\"rowspan\"); // => \"1\" in IE\n *\n * Therefore we have to check the element's outerHTML for the attribute\n*/\n\nwysihtml5.dom.getAttribute = function(node, attributeName) {\n  var HAS_GET_ATTRIBUTE_BUG = !wysihtml5.browser.supportsGetAttributeCorrectly();\n  attributeName = attributeName.toLowerCase();\n  var nodeName = node.nodeName;\n  if (nodeName == \"IMG\" && attributeName == \"src\" && wysihtml5.dom.isLoadedImage(node) === true) {\n    // Get 'src' attribute value via object property since this will always contain the\n    // full absolute url (http://...)\n    // this fixes a very annoying bug in firefox (ver 3.6 & 4) and IE 8 where images copied from the same host\n    // will have relative paths, which the sanitizer strips out (see attributeCheckMethods.url)\n    return node.src;\n  } else if (HAS_GET_ATTRIBUTE_BUG && \"outerHTML\" in node) {\n    // Don't trust getAttribute/hasAttribute in IE 6-8, instead check the element's outerHTML\n    var outerHTML      = node.outerHTML.toLowerCase(),\n        // TODO: This might not work for attributes without value: <input disabled>\n        hasAttribute   = outerHTML.indexOf(\" \" + attributeName +  \"=\") != -1;\n\n    return hasAttribute ? node.getAttribute(attributeName) : null;\n  } else{\n    return node.getAttribute(attributeName);\n  }\n};\n;/**\n * Get all attributes of an element\n *\n * IE gives wrong results for hasAttribute/getAttribute, for example:\n *    var td = document.createElement(\"td\");\n *    td.getAttribute(\"rowspan\"); // => \"1\" in IE\n *\n * Therefore we have to check the element's outerHTML for the attribute\n*/\n\nwysihtml5.dom.getAttributes = function(node) {\n  var HAS_GET_ATTRIBUTE_BUG = !wysihtml5.browser.supportsGetAttributeCorrectly(),\n      nodeName = node.nodeName,\n      attributes = [],\n      attr;\n\n  for (attr in node.attributes) {\n    if ((node.attributes.hasOwnProperty && node.attributes.hasOwnProperty(attr)) || (!node.attributes.hasOwnProperty && Object.prototype.hasOwnProperty.call(node.attributes, attr)))  {\n      if (node.attributes[attr].specified) {\n        if (nodeName == \"IMG\" && node.attributes[attr].name.toLowerCase() == \"src\" && wysihtml5.dom.isLoadedImage(node) === true) {\n          attributes['src'] = node.src;\n        } else if (wysihtml5.lang.array(['rowspan', 'colspan']).contains(node.attributes[attr].name.toLowerCase()) && HAS_GET_ATTRIBUTE_BUG) {\n          if (node.attributes[attr].value !== 1) {\n            attributes[node.attributes[attr].name] = node.attributes[attr].value;\n          }\n        } else {\n          attributes[node.attributes[attr].name] = node.attributes[attr].value;\n        }\n      }\n    }\n  }\n  return attributes;\n};;/**\n   * Check whether the given node is a proper loaded image\n   * FIXME: Returns undefined when unknown (Chrome, Safari)\n*/\n\nwysihtml5.dom.isLoadedImage = function (node) {\n  try {\n    return node.complete && !node.mozMatchesSelector(\":-moz-broken\");\n  } catch(e) {\n    if (node.complete && node.readyState === \"complete\") {\n      return true;\n    }\n  }\n};\n;(function(wysihtml5) {\n\n    var api = wysihtml5.dom;\n\n    var MapCell = function(cell) {\n      this.el = cell;\n      this.isColspan= false;\n      this.isRowspan= false;\n      this.firstCol= true;\n      this.lastCol= true;\n      this.firstRow= true;\n      this.lastRow= true;\n      this.isReal= true;\n      this.spanCollection= [];\n      this.modified = false;\n    };\n\n    var TableModifyerByCell = function (cell, table) {\n        if (cell) {\n            this.cell = cell;\n            this.table = api.getParentElement(cell, { nodeName: [\"TABLE\"] });\n        } else if (table) {\n            this.table = table;\n            this.cell = this.table.querySelectorAll('th, td')[0];\n        }\n    };\n\n    function queryInList(list, query) {\n        var ret = [],\n            q;\n        for (var e = 0, len = list.length; e < len; e++) {\n            q = list[e].querySelectorAll(query);\n            if (q) {\n                for(var i = q.length; i--; ret.unshift(q[i]));\n            }\n        }\n        return ret;\n    }\n\n    function removeElement(el) {\n        el.parentNode.removeChild(el);\n    }\n\n    function insertAfter(referenceNode, newNode) {\n        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    }\n\n    function nextNode(node, tag) {\n        var element = node.nextSibling;\n        while (element.nodeType !=1) {\n            element = element.nextSibling;\n            if (!tag || tag == element.tagName.toLowerCase()) {\n                return element;\n            }\n        }\n        return null;\n    }\n\n    TableModifyerByCell.prototype = {\n\n        addSpannedCellToMap: function(cell, map, r, c, cspan, rspan) {\n            var spanCollect = [],\n                rmax = r + ((rspan) ? parseInt(rspan, 10) - 1 : 0),\n                cmax = c + ((cspan) ? parseInt(cspan, 10) - 1 : 0);\n\n            for (var rr = r; rr <= rmax; rr++) {\n                if (typeof map[rr] == \"undefined\") { map[rr] = []; }\n                for (var cc = c; cc <= cmax; cc++) {\n                    map[rr][cc] = new MapCell(cell);\n                    map[rr][cc].isColspan = (cspan && parseInt(cspan, 10) > 1);\n                    map[rr][cc].isRowspan = (rspan && parseInt(rspan, 10) > 1);\n                    map[rr][cc].firstCol = cc == c;\n                    map[rr][cc].lastCol = cc == cmax;\n                    map[rr][cc].firstRow = rr == r;\n                    map[rr][cc].lastRow = rr == rmax;\n                    map[rr][cc].isReal = cc == c && rr == r;\n                    map[rr][cc].spanCollection = spanCollect;\n\n                    spanCollect.push(map[rr][cc]);\n                }\n            }\n        },\n\n        setCellAsModified: function(cell) {\n            cell.modified = true;\n            if (cell.spanCollection.length > 0) {\n              for (var s = 0, smax = cell.spanCollection.length; s < smax; s++) {\n                cell.spanCollection[s].modified = true;\n              }\n            }\n        },\n\n        setTableMap: function() {\n            var map = [];\n            var tableRows = this.getTableRows(),\n                ridx, row, cells, cidx, cell,\n                c,\n                cspan, rspan;\n\n            for (ridx = 0; ridx < tableRows.length; ridx++) {\n                row = tableRows[ridx];\n                cells = this.getRowCells(row);\n                c = 0;\n                if (typeof map[ridx] == \"undefined\") { map[ridx] = []; }\n                for (cidx = 0; cidx < cells.length; cidx++) {\n                    cell = cells[cidx];\n\n                    // If cell allready set means it is set by col or rowspan,\n                    // so increase cols index until free col is found\n                    while (typeof map[ridx][c] != \"undefined\") { c++; }\n\n                    cspan = api.getAttribute(cell, 'colspan');\n                    rspan = api.getAttribute(cell, 'rowspan');\n\n                    if (cspan || rspan) {\n                        this.addSpannedCellToMap(cell, map, ridx, c, cspan, rspan);\n                        c = c + ((cspan) ? parseInt(cspan, 10) : 1);\n                    } else {\n                        map[ridx][c] = new MapCell(cell);\n                        c++;\n                    }\n                }\n            }\n            this.map = map;\n            return map;\n        },\n\n        getRowCells: function(row) {\n            var inlineTables = this.table.querySelectorAll('table'),\n                inlineCells = (inlineTables) ? queryInList(inlineTables, 'th, td') : [],\n                allCells = row.querySelectorAll('th, td'),\n                tableCells = (inlineCells.length > 0) ? wysihtml5.lang.array(allCells).without(inlineCells) : allCells;\n\n            return tableCells;\n        },\n\n        getTableRows: function() {\n          var inlineTables = this.table.querySelectorAll('table'),\n              inlineRows = (inlineTables) ? queryInList(inlineTables, 'tr') : [],\n              allRows = this.table.querySelectorAll('tr'),\n              tableRows = (inlineRows.length > 0) ? wysihtml5.lang.array(allRows).without(inlineRows) : allRows;\n\n          return tableRows;\n        },\n\n        getMapIndex: function(cell) {\n          var r_length = this.map.length,\n              c_length = (this.map && this.map[0]) ? this.map[0].length : 0;\n\n          for (var r_idx = 0;r_idx < r_length; r_idx++) {\n              for (var c_idx = 0;c_idx < c_length; c_idx++) {\n                  if (this.map[r_idx][c_idx].el === cell) {\n                      return {'row': r_idx, 'col': c_idx};\n                  }\n              }\n          }\n          return false;\n        },\n\n        getElementAtIndex: function(idx) {\n            this.setTableMap();\n            if (this.map[idx.row] && this.map[idx.row][idx.col] && this.map[idx.row][idx.col].el) {\n                return this.map[idx.row][idx.col].el;\n            }\n            return null;\n        },\n\n        getMapElsTo: function(to_cell) {\n            var els = [];\n            this.setTableMap();\n            this.idx_start = this.getMapIndex(this.cell);\n            this.idx_end = this.getMapIndex(to_cell);\n\n            // switch indexes if start is bigger than end\n            if (this.idx_start.row > this.idx_end.row || (this.idx_start.row == this.idx_end.row && this.idx_start.col > this.idx_end.col)) {\n                var temp_idx = this.idx_start;\n                this.idx_start = this.idx_end;\n                this.idx_end = temp_idx;\n            }\n            if (this.idx_start.col > this.idx_end.col) {\n                var temp_cidx = this.idx_start.col;\n                this.idx_start.col = this.idx_end.col;\n                this.idx_end.col = temp_cidx;\n            }\n\n            if (this.idx_start != null && this.idx_end != null) {\n                for (var row = this.idx_start.row, maxr = this.idx_end.row; row <= maxr; row++) {\n                    for (var col = this.idx_start.col, maxc = this.idx_end.col; col <= maxc; col++) {\n                        els.push(this.map[row][col].el);\n                    }\n                }\n            }\n            return els;\n        },\n\n        orderSelectionEnds: function(secondcell) {\n            this.setTableMap();\n            this.idx_start = this.getMapIndex(this.cell);\n            this.idx_end = this.getMapIndex(secondcell);\n\n            // switch indexes if start is bigger than end\n            if (this.idx_start.row > this.idx_end.row || (this.idx_start.row == this.idx_end.row && this.idx_start.col > this.idx_end.col)) {\n                var temp_idx = this.idx_start;\n                this.idx_start = this.idx_end;\n                this.idx_end = temp_idx;\n            }\n            if (this.idx_start.col > this.idx_end.col) {\n                var temp_cidx = this.idx_start.col;\n                this.idx_start.col = this.idx_end.col;\n                this.idx_end.col = temp_cidx;\n            }\n\n            return {\n                \"start\": this.map[this.idx_start.row][this.idx_start.col].el,\n                \"end\": this.map[this.idx_end.row][this.idx_end.col].el\n            };\n        },\n\n        createCells: function(tag, nr, attrs) {\n            var doc = this.table.ownerDocument,\n                frag = doc.createDocumentFragment(),\n                cell;\n            for (var i = 0; i < nr; i++) {\n                cell = doc.createElement(tag);\n\n                if (attrs) {\n                    for (var attr in attrs) {\n                        if (attrs.hasOwnProperty(attr)) {\n                            cell.setAttribute(attr, attrs[attr]);\n                        }\n                    }\n                }\n\n                // add non breaking space\n                cell.appendChild(document.createTextNode(\"\\u00a0\"));\n\n                frag.appendChild(cell);\n            }\n            return frag;\n        },\n\n        // Returns next real cell (not part of spanned cell unless first) on row if selected index is not real. I no real cells -1 will be returned\n        correctColIndexForUnreals: function(col, row) {\n            var r = this.map[row],\n                corrIdx = -1;\n            for (var i = 0, max = col; i < col; i++) {\n                if (r[i].isReal){\n                    corrIdx++;\n                }\n            }\n            return corrIdx;\n        },\n\n        getLastNewCellOnRow: function(row, rowLimit) {\n            var cells = this.getRowCells(row),\n                cell, idx;\n\n            for (var cidx = 0, cmax = cells.length; cidx < cmax; cidx++) {\n                cell = cells[cidx];\n                idx = this.getMapIndex(cell);\n                if (idx === false || (typeof rowLimit != \"undefined\" && idx.row != rowLimit)) {\n                    return cell;\n                }\n            }\n            return null;\n        },\n\n        removeEmptyTable: function() {\n            var cells = this.table.querySelectorAll('td, th');\n            if (!cells || cells.length == 0) {\n                removeElement(this.table);\n                return true;\n            } else {\n                return false;\n            }\n        },\n\n        // Splits merged cell on row to unique cells\n        splitRowToCells: function(cell) {\n            if (cell.isColspan) {\n                var colspan = parseInt(api.getAttribute(cell.el, 'colspan') || 1, 10),\n                    cType = cell.el.tagName.toLowerCase();\n                if (colspan > 1) {\n                    var newCells = this.createCells(cType, colspan -1);\n                    insertAfter(cell.el, newCells);\n                }\n                cell.el.removeAttribute('colspan');\n            }\n        },\n\n        getRealRowEl: function(force, idx) {\n            var r = null,\n                c = null;\n\n            idx = idx || this.idx;\n\n            for (var cidx = 0, cmax = this.map[idx.row].length; cidx < cmax; cidx++) {\n                c = this.map[idx.row][cidx];\n                if (c.isReal) {\n                    r = api.getParentElement(c.el, { nodeName: [\"TR\"] });\n                    if (r) {\n                        return r;\n                    }\n                }\n            }\n\n            if (r === null && force) {\n                r = api.getParentElement(this.map[idx.row][idx.col].el, { nodeName: [\"TR\"] }) || null;\n            }\n\n            return r;\n        },\n\n        injectRowAt: function(row, col, colspan, cType, c) {\n            var r = this.getRealRowEl(false, {'row': row, 'col': col}),\n                new_cells = this.createCells(cType, colspan);\n\n            if (r) {\n                var n_cidx = this.correctColIndexForUnreals(col, row);\n                if (n_cidx >= 0) {\n                    insertAfter(this.getRowCells(r)[n_cidx], new_cells);\n                } else {\n                    r.insertBefore(new_cells, r.firstChild);\n                }\n            } else {\n                var rr = this.table.ownerDocument.createElement('tr');\n                rr.appendChild(new_cells);\n                insertAfter(api.getParentElement(c.el, { nodeName: [\"TR\"] }), rr);\n            }\n        },\n\n        canMerge: function(to) {\n            this.to = to;\n            this.setTableMap();\n            this.idx_start = this.getMapIndex(this.cell);\n            this.idx_end = this.getMapIndex(this.to);\n\n            // switch indexes if start is bigger than end\n            if (this.idx_start.row > this.idx_end.row || (this.idx_start.row == this.idx_end.row && this.idx_start.col > this.idx_end.col)) {\n                var temp_idx = this.idx_start;\n                this.idx_start = this.idx_end;\n                this.idx_end = temp_idx;\n            }\n            if (this.idx_start.col > this.idx_end.col) {\n                var temp_cidx = this.idx_start.col;\n                this.idx_start.col = this.idx_end.col;\n                this.idx_end.col = temp_cidx;\n            }\n\n            for (var row = this.idx_start.row, maxr = this.idx_end.row; row <= maxr; row++) {\n                for (var col = this.idx_start.col, maxc = this.idx_end.col; col <= maxc; col++) {\n                    if (this.map[row][col].isColspan || this.map[row][col].isRowspan) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        },\n\n        decreaseCellSpan: function(cell, span) {\n            var nr = parseInt(api.getAttribute(cell.el, span), 10) - 1;\n            if (nr >= 1) {\n                cell.el.setAttribute(span, nr);\n            } else {\n                cell.el.removeAttribute(span);\n                if (span == 'colspan') {\n                    cell.isColspan = false;\n                }\n                if (span == 'rowspan') {\n                    cell.isRowspan = false;\n                }\n                cell.firstCol = true;\n                cell.lastCol = true;\n                cell.firstRow = true;\n                cell.lastRow = true;\n                cell.isReal = true;\n            }\n        },\n\n        removeSurplusLines: function() {\n            var row, cell, ridx, rmax, cidx, cmax, allRowspan;\n\n            this.setTableMap();\n            if (this.map) {\n                ridx = 0;\n                rmax = this.map.length;\n                for (;ridx < rmax; ridx++) {\n                    row = this.map[ridx];\n                    allRowspan = true;\n                    cidx = 0;\n                    cmax = row.length;\n                    for (; cidx < cmax; cidx++) {\n                        cell = row[cidx];\n                        if (!(api.getAttribute(cell.el, \"rowspan\") && parseInt(api.getAttribute(cell.el, \"rowspan\"), 10) > 1 && cell.firstRow !== true)) {\n                            allRowspan = false;\n                            break;\n                        }\n                    }\n                    if (allRowspan) {\n                        cidx = 0;\n                        for (; cidx < cmax; cidx++) {\n                            this.decreaseCellSpan(row[cidx], 'rowspan');\n                        }\n                    }\n                }\n\n                // remove rows without cells\n                var tableRows = this.getTableRows();\n                ridx = 0;\n                rmax = tableRows.length;\n                for (;ridx < rmax; ridx++) {\n                    row = tableRows[ridx];\n                    if (row.childNodes.length == 0 && (/^\\s*$/.test(row.textContent || row.innerText))) {\n                        removeElement(row);\n                    }\n                }\n            }\n        },\n\n        fillMissingCells: function() {\n            var r_max = 0,\n                c_max = 0,\n                prevcell = null;\n\n            this.setTableMap();\n            if (this.map) {\n\n                // find maximal dimensions of broken table\n                r_max = this.map.length;\n                for (var ridx = 0; ridx < r_max; ridx++) {\n                    if (this.map[ridx].length > c_max) { c_max = this.map[ridx].length; }\n                }\n\n                for (var row = 0; row < r_max; row++) {\n                    for (var col = 0; col < c_max; col++) {\n                        if (this.map[row] && !this.map[row][col]) {\n                            if (col > 0) {\n                                this.map[row][col] = new MapCell(this.createCells('td', 1));\n                                prevcell = this.map[row][col-1];\n                                if (prevcell && prevcell.el && prevcell.el.parent) { // if parent does not exist element is removed from dom\n                                    insertAfter(this.map[row][col-1].el, this.map[row][col].el);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        },\n\n        rectify: function() {\n            if (!this.removeEmptyTable()) {\n                this.removeSurplusLines();\n                this.fillMissingCells();\n                return true;\n            } else {\n                return false;\n            }\n        },\n\n        unmerge: function() {\n            if (this.rectify()) {\n                this.setTableMap();\n                this.idx = this.getMapIndex(this.cell);\n\n                if (this.idx) {\n                    var thisCell = this.map[this.idx.row][this.idx.col],\n                        colspan = (api.getAttribute(thisCell.el, \"colspan\")) ? parseInt(api.getAttribute(thisCell.el, \"colspan\"), 10) : 1,\n                        cType = thisCell.el.tagName.toLowerCase();\n\n                    if (thisCell.isRowspan) {\n                        var rowspan = parseInt(api.getAttribute(thisCell.el, \"rowspan\"), 10);\n                        if (rowspan > 1) {\n                            for (var nr = 1, maxr = rowspan - 1; nr <= maxr; nr++){\n                                this.injectRowAt(this.idx.row + nr, this.idx.col, colspan, cType, thisCell);\n                            }\n                        }\n                        thisCell.el.removeAttribute('rowspan');\n                    }\n                    this.splitRowToCells(thisCell);\n                }\n            }\n        },\n\n        // merges cells from start cell (defined in creating obj) to \"to\" cell\n        merge: function(to) {\n            if (this.rectify()) {\n                if (this.canMerge(to)) {\n                    var rowspan = this.idx_end.row - this.idx_start.row + 1,\n                        colspan = this.idx_end.col - this.idx_start.col + 1;\n\n                    for (var row = this.idx_start.row, maxr = this.idx_end.row; row <= maxr; row++) {\n                        for (var col = this.idx_start.col, maxc = this.idx_end.col; col <= maxc; col++) {\n\n                            if (row == this.idx_start.row && col == this.idx_start.col) {\n                                if (rowspan > 1) {\n                                    this.map[row][col].el.setAttribute('rowspan', rowspan);\n                                }\n                                if (colspan > 1) {\n                                    this.map[row][col].el.setAttribute('colspan', colspan);\n                                }\n                            } else {\n                                // transfer content\n                                if (!(/^\\s*<br\\/?>\\s*$/.test(this.map[row][col].el.innerHTML.toLowerCase()))) {\n                                    this.map[this.idx_start.row][this.idx_start.col].el.innerHTML += ' ' + this.map[row][col].el.innerHTML;\n                                }\n                                removeElement(this.map[row][col].el);\n                            }\n                        }\n                    }\n                    this.rectify();\n                } else {\n                    if (window.console) {\n                        console.log('Do not know how to merge allready merged cells.');\n                    }\n                }\n            }\n        },\n\n        // Decreases rowspan of a cell if it is done on first cell of rowspan row (real cell)\n        // Cell is moved to next row (if it is real)\n        collapseCellToNextRow: function(cell) {\n            var cellIdx = this.getMapIndex(cell.el),\n                newRowIdx = cellIdx.row + 1,\n                newIdx = {'row': newRowIdx, 'col': cellIdx.col};\n\n            if (newRowIdx < this.map.length) {\n\n                var row = this.getRealRowEl(false, newIdx);\n                if (row !== null) {\n                    var n_cidx = this.correctColIndexForUnreals(newIdx.col, newIdx.row);\n                    if (n_cidx >= 0) {\n                        insertAfter(this.getRowCells(row)[n_cidx], cell.el);\n                    } else {\n                        var lastCell = this.getLastNewCellOnRow(row, newRowIdx);\n                        if (lastCell !== null) {\n                            insertAfter(lastCell, cell.el);\n                        } else {\n                            row.insertBefore(cell.el, row.firstChild);\n                        }\n                    }\n                    if (parseInt(api.getAttribute(cell.el, 'rowspan'), 10) > 2) {\n                        cell.el.setAttribute('rowspan', parseInt(api.getAttribute(cell.el, 'rowspan'), 10) - 1);\n                    } else {\n                        cell.el.removeAttribute('rowspan');\n                    }\n                }\n            }\n        },\n\n        // Removes a cell when removing a row\n        // If is rowspan cell then decreases the rowspan\n        // and moves cell to next row if needed (is first cell of rowspan)\n        removeRowCell: function(cell) {\n            if (cell.isReal) {\n               if (cell.isRowspan) {\n                   this.collapseCellToNextRow(cell);\n               } else {\n                   removeElement(cell.el);\n               }\n            } else {\n                if (parseInt(api.getAttribute(cell.el, 'rowspan'), 10) > 2) {\n                    cell.el.setAttribute('rowspan', parseInt(api.getAttribute(cell.el, 'rowspan'), 10) - 1);\n                } else {\n                    cell.el.removeAttribute('rowspan');\n                }\n            }\n        },\n\n        getRowElementsByCell: function() {\n            var cells = [];\n            this.setTableMap();\n            this.idx = this.getMapIndex(this.cell);\n            if (this.idx !== false) {\n                var modRow = this.map[this.idx.row];\n                for (var cidx = 0, cmax = modRow.length; cidx < cmax; cidx++) {\n                    if (modRow[cidx].isReal) {\n                        cells.push(modRow[cidx].el);\n                    }\n                }\n            }\n            return cells;\n        },\n\n        getColumnElementsByCell: function() {\n            var cells = [];\n            this.setTableMap();\n            this.idx = this.getMapIndex(this.cell);\n            if (this.idx !== false) {\n                for (var ridx = 0, rmax = this.map.length; ridx < rmax; ridx++) {\n                    if (this.map[ridx][this.idx.col] && this.map[ridx][this.idx.col].isReal) {\n                        cells.push(this.map[ridx][this.idx.col].el);\n                    }\n                }\n            }\n            return cells;\n        },\n\n        // Removes the row of selected cell\n        removeRow: function() {\n            var oldRow = api.getParentElement(this.cell, { nodeName: [\"TR\"] });\n            if (oldRow) {\n                this.setTableMap();\n                this.idx = this.getMapIndex(this.cell);\n                if (this.idx !== false) {\n                    var modRow = this.map[this.idx.row];\n                    for (var cidx = 0, cmax = modRow.length; cidx < cmax; cidx++) {\n                        if (!modRow[cidx].modified) {\n                            this.setCellAsModified(modRow[cidx]);\n                            this.removeRowCell(modRow[cidx]);\n                        }\n                    }\n                }\n                removeElement(oldRow);\n            }\n        },\n\n        removeColCell: function(cell) {\n            if (cell.isColspan) {\n                if (parseInt(api.getAttribute(cell.el, 'colspan'), 10) > 2) {\n                    cell.el.setAttribute('colspan', parseInt(api.getAttribute(cell.el, 'colspan'), 10) - 1);\n                } else {\n                    cell.el.removeAttribute('colspan');\n                }\n            } else if (cell.isReal) {\n                removeElement(cell.el);\n            }\n        },\n\n        removeColumn: function() {\n            this.setTableMap();\n            this.idx = this.getMapIndex(this.cell);\n            if (this.idx !== false) {\n                for (var ridx = 0, rmax = this.map.length; ridx < rmax; ridx++) {\n                    if (!this.map[ridx][this.idx.col].modified) {\n                        this.setCellAsModified(this.map[ridx][this.idx.col]);\n                        this.removeColCell(this.map[ridx][this.idx.col]);\n                    }\n                }\n            }\n        },\n\n        // removes row or column by selected cell element\n        remove: function(what) {\n            if (this.rectify()) {\n                switch (what) {\n                    case 'row':\n                        this.removeRow();\n                    break;\n                    case 'column':\n                        this.removeColumn();\n                    break;\n                }\n                this.rectify();\n            }\n        },\n\n        addRow: function(where) {\n            var doc = this.table.ownerDocument;\n\n            this.setTableMap();\n            this.idx = this.getMapIndex(this.cell);\n            if (where == \"below\" && api.getAttribute(this.cell, 'rowspan')) {\n                this.idx.row = this.idx.row + parseInt(api.getAttribute(this.cell, 'rowspan'), 10) - 1;\n            }\n\n            if (this.idx !== false) {\n                var modRow = this.map[this.idx.row],\n                    newRow = doc.createElement('tr');\n\n                for (var ridx = 0, rmax = modRow.length; ridx < rmax; ridx++) {\n                    if (!modRow[ridx].modified) {\n                        this.setCellAsModified(modRow[ridx]);\n                        this.addRowCell(modRow[ridx], newRow, where);\n                    }\n                }\n\n                switch (where) {\n                    case 'below':\n                        insertAfter(this.getRealRowEl(true), newRow);\n                    break;\n                    case 'above':\n                        var cr = api.getParentElement(this.map[this.idx.row][this.idx.col].el, { nodeName: [\"TR\"] });\n                        if (cr) {\n                            cr.parentNode.insertBefore(newRow, cr);\n                        }\n                    break;\n                }\n            }\n        },\n\n        addRowCell: function(cell, row, where) {\n            var colSpanAttr = (cell.isColspan) ? {\"colspan\" : api.getAttribute(cell.el, 'colspan')} : null;\n            if (cell.isReal) {\n                if (where != 'above' && cell.isRowspan) {\n                    cell.el.setAttribute('rowspan', parseInt(api.getAttribute(cell.el,'rowspan'), 10) + 1);\n                } else {\n                    row.appendChild(this.createCells('td', 1, colSpanAttr));\n                }\n            } else {\n                if (where != 'above' && cell.isRowspan && cell.lastRow) {\n                    row.appendChild(this.createCells('td', 1, colSpanAttr));\n                } else if (c.isRowspan) {\n                    cell.el.attr('rowspan', parseInt(api.getAttribute(cell.el, 'rowspan'), 10) + 1);\n                }\n            }\n        },\n\n        add: function(where) {\n            if (this.rectify()) {\n                if (where == 'below' || where == 'above') {\n                    this.addRow(where);\n                }\n                if (where == 'before' || where == 'after') {\n                    this.addColumn(where);\n                }\n            }\n        },\n\n        addColCell: function (cell, ridx, where) {\n            var doAdd,\n                cType = cell.el.tagName.toLowerCase();\n\n            // defines add cell vs expand cell conditions\n            // true means add\n            switch (where) {\n                case \"before\":\n                    doAdd = (!cell.isColspan || cell.firstCol);\n                break;\n                case \"after\":\n                    doAdd = (!cell.isColspan || cell.lastCol || (cell.isColspan && c.el == this.cell));\n                break;\n            }\n\n            if (doAdd){\n                // adds a cell before or after current cell element\n                switch (where) {\n                    case \"before\":\n                        cell.el.parentNode.insertBefore(this.createCells(cType, 1), cell.el);\n                    break;\n                    case \"after\":\n                        insertAfter(cell.el, this.createCells(cType, 1));\n                    break;\n                }\n\n                // handles if cell has rowspan\n                if (cell.isRowspan) {\n                    this.handleCellAddWithRowspan(cell, ridx+1, where);\n                }\n\n            } else {\n                // expands cell\n                cell.el.setAttribute('colspan',  parseInt(api.getAttribute(cell.el, 'colspan'), 10) + 1);\n            }\n        },\n\n        addColumn: function(where) {\n            var row, modCell;\n\n            this.setTableMap();\n            this.idx = this.getMapIndex(this.cell);\n            if (where == \"after\" && api.getAttribute(this.cell, 'colspan')) {\n              this.idx.col = this.idx.col + parseInt(api.getAttribute(this.cell, 'colspan'), 10) - 1;\n            }\n\n            if (this.idx !== false) {\n                for (var ridx = 0, rmax = this.map.length; ridx < rmax; ridx++ ) {\n                    row = this.map[ridx];\n                    if (row[this.idx.col]) {\n                        modCell = row[this.idx.col];\n                        if (!modCell.modified) {\n                            this.setCellAsModified(modCell);\n                            this.addColCell(modCell, ridx , where);\n                        }\n                    }\n                }\n            }\n        },\n\n        handleCellAddWithRowspan: function (cell, ridx, where) {\n            var addRowsNr = parseInt(api.getAttribute(this.cell, 'rowspan'), 10) - 1,\n                crow = api.getParentElement(cell.el, { nodeName: [\"TR\"] }),\n                cType = cell.el.tagName.toLowerCase(),\n                cidx, temp_r_cells,\n                doc = this.table.ownerDocument,\n                nrow;\n\n            for (var i = 0; i < addRowsNr; i++) {\n                cidx = this.correctColIndexForUnreals(this.idx.col, (ridx + i));\n                crow = nextNode(crow, 'tr');\n                if (crow) {\n                    if (cidx > 0) {\n                        switch (where) {\n                            case \"before\":\n                                temp_r_cells = this.getRowCells(crow);\n                                if (cidx > 0 && this.map[ridx + i][this.idx.col].el != temp_r_cells[cidx] && cidx == temp_r_cells.length - 1) {\n                                     insertAfter(temp_r_cells[cidx], this.createCells(cType, 1));\n                                } else {\n                                    temp_r_cells[cidx].parentNode.insertBefore(this.createCells(cType, 1), temp_r_cells[cidx]);\n                                }\n\n                            break;\n                            case \"after\":\n                                insertAfter(this.getRowCells(crow)[cidx], this.createCells(cType, 1));\n                            break;\n                        }\n                    } else {\n                        crow.insertBefore(this.createCells(cType, 1), crow.firstChild);\n                    }\n                } else {\n                    nrow = doc.createElement('tr');\n                    nrow.appendChild(this.createCells(cType, 1));\n                    this.table.appendChild(nrow);\n                }\n            }\n        }\n    };\n\n    api.table = {\n        getCellsBetween: function(cell1, cell2) {\n            var c1 = new TableModifyerByCell(cell1);\n            return c1.getMapElsTo(cell2);\n        },\n\n        addCells: function(cell, where) {\n            var c = new TableModifyerByCell(cell);\n            c.add(where);\n        },\n\n        removeCells: function(cell, what) {\n            var c = new TableModifyerByCell(cell);\n            c.remove(what);\n        },\n\n        mergeCellsBetween: function(cell1, cell2) {\n            var c1 = new TableModifyerByCell(cell1);\n            c1.merge(cell2);\n        },\n\n        unmergeCell: function(cell) {\n            var c = new TableModifyerByCell(cell);\n            c.unmerge();\n        },\n\n        orderSelectionEnds: function(cell, cell2) {\n            var c = new TableModifyerByCell(cell);\n            return c.orderSelectionEnds(cell2);\n        },\n\n        indexOf: function(cell) {\n            var c = new TableModifyerByCell(cell);\n            c.setTableMap();\n            return c.getMapIndex(cell);\n        },\n\n        findCell: function(table, idx) {\n            var c = new TableModifyerByCell(null, table);\n            return c.getElementAtIndex(idx);\n        },\n\n        findRowByCell: function(cell) {\n            var c = new TableModifyerByCell(cell);\n            return c.getRowElementsByCell();\n        },\n\n        findColumnByCell: function(cell) {\n            var c = new TableModifyerByCell(cell);\n            return c.getColumnElementsByCell();\n        },\n\n        canMerge: function(cell1, cell2) {\n            var c = new TableModifyerByCell(cell1);\n            return c.canMerge(cell2);\n        }\n    };\n\n\n\n})(wysihtml5);\n;// does a selector query on element or array of elements\n\nwysihtml5.dom.query = function(elements, query) {\n    var ret = [],\n        q;\n\n    if (elements.nodeType) {\n        elements = [elements];\n    }\n\n    for (var e = 0, len = elements.length; e < len; e++) {\n        q = elements[e].querySelectorAll(query);\n        if (q) {\n            for(var i = q.length; i--; ret.unshift(q[i]));\n        }\n    }\n    return ret;\n};\n;wysihtml5.dom.compareDocumentPosition = (function() {\n  var documentElement = document.documentElement;\n  if (documentElement.compareDocumentPosition) {\n    return function(container, element) {\n      return container.compareDocumentPosition(element);\n    };\n  } else {\n    return function( container, element ) {\n      // implementation borrowed from https://github.com/tmpvar/jsdom/blob/681a8524b663281a0f58348c6129c8c184efc62c/lib/jsdom/level3/core.js // MIT license\n      var thisOwner, otherOwner;\n\n      if( container.nodeType === 9) // Node.DOCUMENT_NODE\n        thisOwner = container;\n      else\n        thisOwner = container.ownerDocument;\n\n      if( element.nodeType === 9) // Node.DOCUMENT_NODE\n        otherOwner = element;\n      else\n        otherOwner = element.ownerDocument;\n\n      if( container === element ) return 0;\n      if( container === element.ownerDocument ) return 4 + 16; //Node.DOCUMENT_POSITION_FOLLOWING + Node.DOCUMENT_POSITION_CONTAINED_BY;\n      if( container.ownerDocument === element ) return 2 + 8;  //Node.DOCUMENT_POSITION_PRECEDING + Node.DOCUMENT_POSITION_CONTAINS;\n      if( thisOwner !== otherOwner ) return 1; // Node.DOCUMENT_POSITION_DISCONNECTED;\n\n      // Text nodes for attributes does not have a _parentNode. So we need to find them as attribute child.\n      if( container.nodeType === 2 /*Node.ATTRIBUTE_NODE*/ && container.childNodes && wysihtml5.lang.array(container.childNodes).indexOf( element ) !== -1)\n        return 4 + 16; //Node.DOCUMENT_POSITION_FOLLOWING + Node.DOCUMENT_POSITION_CONTAINED_BY;\n\n      if( element.nodeType === 2 /*Node.ATTRIBUTE_NODE*/ && element.childNodes && wysihtml5.lang.array(element.childNodes).indexOf( container ) !== -1)\n        return 2 + 8; //Node.DOCUMENT_POSITION_PRECEDING + Node.DOCUMENT_POSITION_CONTAINS;\n\n      var point = container;\n      var parents = [ ];\n      var previous = null;\n      while( point ) {\n        if( point == element ) return 2 + 8; //Node.DOCUMENT_POSITION_PRECEDING + Node.DOCUMENT_POSITION_CONTAINS;\n        parents.push( point );\n        point = point.parentNode;\n      }\n      point = element;\n      previous = null;\n      while( point ) {\n        if( point == container ) return 4 + 16; //Node.DOCUMENT_POSITION_FOLLOWING + Node.DOCUMENT_POSITION_CONTAINED_BY;\n        var location_index = wysihtml5.lang.array(parents).indexOf( point );\n        if( location_index !== -1) {\n         var smallest_common_ancestor = parents[ location_index ];\n         var this_index = wysihtml5.lang.array(smallest_common_ancestor.childNodes).indexOf( parents[location_index - 1]);//smallest_common_ancestor.childNodes.toArray().indexOf( parents[location_index - 1] );\n         var other_index = wysihtml5.lang.array(smallest_common_ancestor.childNodes).indexOf( previous ); //smallest_common_ancestor.childNodes.toArray().indexOf( previous );\n         if( this_index > other_index ) {\n               return 2; //Node.DOCUMENT_POSITION_PRECEDING;\n         }\n         else {\n           return 4; //Node.DOCUMENT_POSITION_FOLLOWING;\n         }\n        }\n        previous = point;\n        point = point.parentNode;\n      }\n      return 1; //Node.DOCUMENT_POSITION_DISCONNECTED;\n    };\n  }\n})();\n;wysihtml5.dom.unwrap = function(node) {\n  if (node.parentNode) {\n    while (node.lastChild) {\n      wysihtml5.dom.insert(node.lastChild).after(node);\n    }\n    node.parentNode.removeChild(node);\n  }\n};;/* \n * Methods for fetching pasted html before it gets inserted into content\n**/\n\n/* Modern event.clipboardData driven approach.\n * Advantage is that it does not have to loose selection or modify dom to catch the data. \n * IE does not support though.\n**/\nwysihtml5.dom.getPastedHtml = function(event) {\n  var html;\n  if (event.clipboardData) {\n    if (wysihtml5.lang.array(event.clipboardData.types).contains('text/html')) {\n      html = event.clipboardData.getData('text/html');\n    } else if (wysihtml5.lang.array(event.clipboardData.types).contains('text/plain')) {\n      html = wysihtml5.lang.string(event.clipboardData.getData('text/plain')).escapeHTML(true, true);\n    }\n  }\n  return html;\n};\n\n/* Older temprorary contenteditable as paste source catcher method for fallbacks */\nwysihtml5.dom.getPastedHtmlWithDiv = function (composer, f) {\n  var selBookmark = composer.selection.getBookmark(),\n      doc = composer.element.ownerDocument,\n      cleanerDiv = doc.createElement('DIV');\n  \n  doc.body.appendChild(cleanerDiv);\n\n  cleanerDiv.style.width = \"1px\";\n  cleanerDiv.style.height = \"1px\";\n  cleanerDiv.style.overflow = \"hidden\";\n\n  cleanerDiv.setAttribute('contenteditable', 'true');\n  cleanerDiv.focus();\n\n  setTimeout(function () {\n    composer.selection.setBookmark(selBookmark);\n    f(cleanerDiv.innerHTML);\n    cleanerDiv.parentNode.removeChild(cleanerDiv);\n  }, 0);\n};;/**\n * Fix most common html formatting misbehaviors of browsers implementation when inserting\n * content via copy & paste contentEditable\n *\n * @author Christopher Blum\n */\nwysihtml5.quirks.cleanPastedHTML = (function() {\n\n  var styleToRegex = function (styleStr) {\n    var trimmedStr = wysihtml5.lang.string(styleStr).trim(),\n        escapedStr = trimmedStr.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n\n    return new RegExp(\"^((?!^\" + escapedStr + \"$).)*$\", \"i\");\n  };\n\n  var extendRulesWithStyleExceptions = function (rules, exceptStyles) {\n    var newRules = wysihtml5.lang.object(rules).clone(true),\n        tag, style;\n\n    for (tag in newRules.tags) {\n\n      if (newRules.tags.hasOwnProperty(tag)) {\n        if (newRules.tags[tag].keep_styles) {\n          for (style in newRules.tags[tag].keep_styles) {\n            if (newRules.tags[tag].keep_styles.hasOwnProperty(style)) {\n              if (exceptStyles[style]) {\n                newRules.tags[tag].keep_styles[style] = styleToRegex(exceptStyles[style]);\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return newRules;\n  };\n\n  var pickRuleset = function(ruleset, html) {\n    var pickedSet, defaultSet;\n\n    if (!ruleset) {\n      return null;\n    }\n\n    for (var i = 0, max = ruleset.length; i < max; i++) {\n      if (!ruleset[i].condition) {\n        defaultSet = ruleset[i].set;\n      }\n      if (ruleset[i].condition && ruleset[i].condition.test(html)) {\n        return ruleset[i].set;\n      }\n    }\n\n    return defaultSet;\n  };\n\n  return function(html, options) {\n    var exceptStyles = {\n          'color': wysihtml5.dom.getStyle(\"color\").from(options.referenceNode),\n          'fontSize': wysihtml5.dom.getStyle(\"font-size\").from(options.referenceNode)\n        },\n        rules = extendRulesWithStyleExceptions(pickRuleset(options.rules, html) || {}, exceptStyles),\n        newHtml;\n\n    newHtml = wysihtml5.dom.parse(html, {\n      \"rules\": rules,\n      \"cleanUp\": true, // <span> elements, empty or without attributes, should be removed/replaced with their content\n      \"context\": options.referenceNode.ownerDocument,\n      \"uneditableClass\": options.uneditableClass,\n      \"clearInternals\" : true, // don't paste temprorary selection and other markings\n      \"unjoinNbsps\" : true\n    });\n\n    return newHtml;\n  };\n\n})();;/**\n * IE and Opera leave an empty paragraph in the contentEditable element after clearing it\n *\n * @param {Object} contentEditableElement The contentEditable element to observe for clearing events\n * @exaple\n *    wysihtml5.quirks.ensureProperClearing(myContentEditableElement);\n */\nwysihtml5.quirks.ensureProperClearing = (function() {\n  var clearIfNecessary = function() {\n    var element = this;\n    setTimeout(function() {\n      var innerHTML = element.innerHTML.toLowerCase();\n      if (innerHTML == \"<p>&nbsp;</p>\" ||\n          innerHTML == \"<p>&nbsp;</p><p>&nbsp;</p>\") {\n        element.innerHTML = \"\";\n      }\n    }, 0);\n  };\n\n  return function(composer) {\n    wysihtml5.dom.observe(composer.element, [\"cut\", \"keydown\"], clearIfNecessary);\n  };\n})();\n;// See https://bugzilla.mozilla.org/show_bug.cgi?id=664398\n//\n// In Firefox this:\n//      var d = document.createElement(\"div\");\n//      d.innerHTML ='<a href=\"~\"></a>';\n//      d.innerHTML;\n// will result in:\n//      <a href=\"%7E\"></a>\n// which is wrong\n(function(wysihtml5) {\n  var TILDE_ESCAPED = \"%7E\";\n  wysihtml5.quirks.getCorrectInnerHTML = function(element) {\n    var innerHTML = element.innerHTML;\n    if (innerHTML.indexOf(TILDE_ESCAPED) === -1) {\n      return innerHTML;\n    }\n\n    var elementsWithTilde = element.querySelectorAll(\"[href*='~'], [src*='~']\"),\n        url,\n        urlToSearch,\n        length,\n        i;\n    for (i=0, length=elementsWithTilde.length; i<length; i++) {\n      url         = elementsWithTilde[i].href || elementsWithTilde[i].src;\n      urlToSearch = wysihtml5.lang.string(url).replace(\"~\").by(TILDE_ESCAPED);\n      innerHTML   = wysihtml5.lang.string(innerHTML).replace(urlToSearch).by(url);\n    }\n    return innerHTML;\n  };\n})(wysihtml5);\n;/**\n * Force rerendering of a given element\n * Needed to fix display misbehaviors of IE\n *\n * @param {Element} element The element object which needs to be rerendered\n * @example\n *    wysihtml5.quirks.redraw(document.body);\n */\n(function(wysihtml5) {\n  var CLASS_NAME = \"wysihtml5-quirks-redraw\";\n\n  wysihtml5.quirks.redraw = function(element) {\n    wysihtml5.dom.addClass(element, CLASS_NAME);\n    wysihtml5.dom.removeClass(element, CLASS_NAME);\n\n    // Following hack is needed for firefox to make sure that image resize handles are properly removed\n    try {\n      var doc = element.ownerDocument;\n      doc.execCommand(\"italic\", false, null);\n      doc.execCommand(\"italic\", false, null);\n    } catch(e) {}\n  };\n})(wysihtml5);\n;wysihtml5.quirks.tableCellsSelection = function(editable, editor) {\n\n    var dom = wysihtml5.dom,\n        select = {\n            table: null,\n            start: null,\n            end: null,\n            cells: null,\n            select: selectCells\n        },\n        selection_class = \"wysiwyg-tmp-selected-cell\",\n        moveHandler = null,\n        upHandler = null;\n\n    function init () {\n\n        dom.observe(editable, \"mousedown\", function(event) {\n          var target = wysihtml5.dom.getParentElement(event.target, { nodeName: [\"TD\", \"TH\"] });\n          if (target) {\n              handleSelectionMousedown(target);\n          }\n        });\n\n        return select;\n    }\n\n    function handleSelectionMousedown (target) {\n      select.start = target;\n      select.end = target;\n      select.cells = [target];\n      select.table = dom.getParentElement(select.start, { nodeName: [\"TABLE\"] });\n\n      if (select.table) {\n        removeCellSelections();\n        dom.addClass(target, selection_class);\n        moveHandler = dom.observe(editable, \"mousemove\", handleMouseMove);\n        upHandler = dom.observe(editable, \"mouseup\", handleMouseUp);\n        editor.fire(\"tableselectstart\").fire(\"tableselectstart:composer\");\n      }\n    }\n\n    // remove all selection classes\n    function removeCellSelections () {\n        if (editable) {\n            var selectedCells = editable.querySelectorAll('.' + selection_class);\n            if (selectedCells.length > 0) {\n              for (var i = 0; i < selectedCells.length; i++) {\n                  dom.removeClass(selectedCells[i], selection_class);\n              }\n            }\n        }\n    }\n\n    function addSelections (cells) {\n      for (var i = 0; i < cells.length; i++) {\n        dom.addClass(cells[i], selection_class);\n      }\n    }\n\n    function handleMouseMove (event) {\n      var curTable = null,\n          cell = dom.getParentElement(event.target, { nodeName: [\"TD\",\"TH\"] }),\n          oldEnd;\n\n      if (cell && select.table && select.start) {\n        curTable =  dom.getParentElement(cell, { nodeName: [\"TABLE\"] });\n        if (curTable && curTable === select.table) {\n          removeCellSelections();\n          oldEnd = select.end;\n          select.end = cell;\n          select.cells = dom.table.getCellsBetween(select.start, cell);\n          if (select.cells.length > 1) {\n            editor.composer.selection.deselect();\n          }\n          addSelections(select.cells);\n          if (select.end !== oldEnd) {\n            editor.fire(\"tableselectchange\").fire(\"tableselectchange:composer\");\n          }\n        }\n      }\n    }\n\n    function handleMouseUp (event) {\n      moveHandler.stop();\n      upHandler.stop();\n      editor.fire(\"tableselect\").fire(\"tableselect:composer\");\n      setTimeout(function() {\n        bindSideclick();\n      },0);\n    }\n\n    function bindSideclick () {\n        var sideClickHandler = dom.observe(editable.ownerDocument, \"click\", function(event) {\n          sideClickHandler.stop();\n          if (dom.getParentElement(event.target, { nodeName: [\"TABLE\"] }) != select.table) {\n              removeCellSelections();\n              select.table = null;\n              select.start = null;\n              select.end = null;\n              editor.fire(\"tableunselect\").fire(\"tableunselect:composer\");\n          }\n        });\n    }\n\n    function selectCells (start, end) {\n        select.start = start;\n        select.end = end;\n        select.table = dom.getParentElement(select.start, { nodeName: [\"TABLE\"] });\n        selectedCells = dom.table.getCellsBetween(select.start, select.end);\n        addSelections(selectedCells);\n        bindSideclick();\n        editor.fire(\"tableselect\").fire(\"tableselect:composer\");\n    }\n\n    return init();\n\n};\n;(function(wysihtml5) {\n  var RGBA_REGEX     = /^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*([\\d\\.]+)\\s*\\)/i,\n      RGB_REGEX      = /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)/i,\n      HEX6_REGEX     = /^#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])/i,\n      HEX3_REGEX     = /^#([0-9a-f])([0-9a-f])([0-9a-f])/i;\n\n  var param_REGX = function (p) {\n    return new RegExp(\"(^|\\\\s|;)\" + p + \"\\\\s*:\\\\s*[^;$]+\" , \"gi\");\n  };\n\n  wysihtml5.quirks.styleParser = {\n\n    parseColor: function(stylesStr, paramName) {\n      var paramRegex = param_REGX(paramName),\n          params = stylesStr.match(paramRegex),\n          radix = 10,\n          str, colorMatch;\n\n      if (params) {\n        for (var i = params.length; i--;) {\n          params[i] = wysihtml5.lang.string(params[i].split(':')[1]).trim();\n        }\n        str = params[params.length-1];\n\n        if (RGBA_REGEX.test(str)) {\n          colorMatch = str.match(RGBA_REGEX);\n        } else if (RGB_REGEX.test(str)) {\n          colorMatch = str.match(RGB_REGEX);\n        } else if (HEX6_REGEX.test(str)) {\n          colorMatch = str.match(HEX6_REGEX);\n          radix = 16;\n        } else if (HEX3_REGEX.test(str)) {\n          colorMatch = str.match(HEX3_REGEX);\n          colorMatch.shift();\n          colorMatch.push(1);\n          return wysihtml5.lang.array(colorMatch).map(function(d, idx) {\n            return (idx < 3) ? (parseInt(d, 16) * 16) + parseInt(d, 16): parseFloat(d);\n          });\n        }\n\n        if (colorMatch) {\n          colorMatch.shift();\n          if (!colorMatch[3]) {\n            colorMatch.push(1);\n          }\n          return wysihtml5.lang.array(colorMatch).map(function(d, idx) {\n            return (idx < 3) ? parseInt(d, radix): parseFloat(d);\n          });\n        }\n      }\n      return false;\n    },\n\n    unparseColor: function(val, props) {\n      if (props) {\n        if (props == \"hex\") {\n          return (val[0].toString(16).toUpperCase()) + (val[1].toString(16).toUpperCase()) + (val[2].toString(16).toUpperCase());\n        } else if (props == \"hash\") {\n          return \"#\" + (val[0].toString(16).toUpperCase()) + (val[1].toString(16).toUpperCase()) + (val[2].toString(16).toUpperCase());\n        } else if (props == \"rgb\") {\n          return \"rgb(\" + val[0] + \",\" + val[1] + \",\" + val[2] + \")\";\n        } else if (props == \"rgba\") {\n          return \"rgba(\" + val[0] + \",\" + val[1] + \",\" + val[2] + \",\" + val[3] + \")\";\n        } else if (props == \"csv\") {\n          return  val[0] + \",\" + val[1] + \",\" + val[2] + \",\" + val[3];\n        }\n      }\n\n      if (val[3] && val[3] !== 1) {\n        return \"rgba(\" + val[0] + \",\" + val[1] + \",\" + val[2] + \",\" + val[3] + \")\";\n      } else {\n        return \"rgb(\" + val[0] + \",\" + val[1] + \",\" + val[2] + \")\";\n      }\n    },\n\n    parseFontSize: function(stylesStr) {\n      var params = stylesStr.match(param_REGX('font-size'));\n      if (params) {\n        return wysihtml5.lang.string(params[params.length - 1].split(':')[1]).trim();\n      }\n      return false;\n    }\n  };\n\n})(wysihtml5);\n;/**\n * Selection API\n *\n * @example\n *    var selection = new wysihtml5.Selection(editor);\n */\n(function(wysihtml5) {\n  var dom = wysihtml5.dom;\n\n  function _getCumulativeOffsetTop(element) {\n    var top = 0;\n    if (element.parentNode) {\n      do {\n        top += element.offsetTop || 0;\n        element = element.offsetParent;\n      } while (element);\n    }\n    return top;\n  }\n\n  // Provides the depth of ``descendant`` relative to ``ancestor``\n  function getDepth(ancestor, descendant) {\n      var ret = 0;\n      while (descendant !== ancestor) {\n          ret++;\n          descendant = descendant.parentNode;\n          if (!descendant)\n              throw new Error(\"not a descendant of ancestor!\");\n      }\n      return ret;\n  }\n\n  // Should fix the obtained ranges that cannot surrond contents normally to apply changes upon\n  // Being considerate to firefox that sets range start start out of span and end inside on doubleclick initiated selection\n  function expandRangeToSurround(range) {\n      if (range.canSurroundContents()) return;\n\n      var common = range.commonAncestorContainer,\n          start_depth = getDepth(common, range.startContainer),\n          end_depth = getDepth(common, range.endContainer);\n\n      while(!range.canSurroundContents()) {\n        // In the following branches, we cannot just decrement the depth variables because the setStartBefore/setEndAfter may move the start or end of the range more than one level relative to ``common``. So we need to recompute the depth.\n        if (start_depth > end_depth) {\n            range.setStartBefore(range.startContainer);\n            start_depth = getDepth(common, range.startContainer);\n        }\n        else {\n            range.setEndAfter(range.endContainer);\n            end_depth = getDepth(common, range.endContainer);\n        }\n      }\n  }\n\n  wysihtml5.Selection = Base.extend(\n    /** @scope wysihtml5.Selection.prototype */ {\n    constructor: function(editor, contain, unselectableClass) {\n      // Make sure that our external range library is initialized\n      window.rangy.init();\n\n      this.editor   = editor;\n      this.composer = editor.composer;\n      this.doc      = this.composer.doc;\n      this.contain = contain;\n      this.unselectableClass = unselectableClass || false;\n    },\n\n    /**\n     * Get the current selection as a bookmark to be able to later restore it\n     *\n     * @return {Object} An object that represents the current selection\n     */\n    getBookmark: function() {\n      var range = this.getRange();\n      if (range) expandRangeToSurround(range);\n      return range && range.cloneRange();\n    },\n\n    /**\n     * Restore a selection retrieved via wysihtml5.Selection.prototype.getBookmark\n     *\n     * @param {Object} bookmark An object that represents the current selection\n     */\n    setBookmark: function(bookmark) {\n      if (!bookmark) {\n        return;\n      }\n\n      this.setSelection(bookmark);\n    },\n\n    /**\n     * Set the caret in front of the given node\n     *\n     * @param {Object} node The element or text node where to position the caret in front of\n     * @example\n     *    selection.setBefore(myElement);\n     */\n    setBefore: function(node) {\n      var range = rangy.createRange(this.doc);\n      range.setStartBefore(node);\n      range.setEndBefore(node);\n      return this.setSelection(range);\n    },\n\n    /**\n     * Set the caret after the given node\n     *\n     * @param {Object} node The element or text node where to position the caret in front of\n     * @example\n     *    selection.setBefore(myElement);\n     */\n    setAfter: function(node) {\n      var range = rangy.createRange(this.doc);\n\n      range.setStartAfter(node);\n      range.setEndAfter(node);\n      return this.setSelection(range);\n    },\n\n    /**\n     * Ability to select/mark nodes\n     *\n     * @param {Element} node The node/element to select\n     * @example\n     *    selection.selectNode(document.getElementById(\"my-image\"));\n     */\n    selectNode: function(node, avoidInvisibleSpace) {\n      var range           = rangy.createRange(this.doc),\n          isElement       = node.nodeType === wysihtml5.ELEMENT_NODE,\n          canHaveHTML     = \"canHaveHTML\" in node ? node.canHaveHTML : (node.nodeName !== \"IMG\"),\n          content         = isElement ? node.innerHTML : node.data,\n          isEmpty         = (content === \"\" || content === wysihtml5.INVISIBLE_SPACE),\n          displayStyle    = dom.getStyle(\"display\").from(node),\n          isBlockElement  = (displayStyle === \"block\" || displayStyle === \"list-item\");\n\n      if (isEmpty && isElement && canHaveHTML && !avoidInvisibleSpace) {\n        // Make sure that caret is visible in node by inserting a zero width no breaking space\n        try { node.innerHTML = wysihtml5.INVISIBLE_SPACE; } catch(e) {}\n      }\n\n      if (canHaveHTML) {\n        range.selectNodeContents(node);\n      } else {\n        range.selectNode(node);\n      }\n\n      if (canHaveHTML && isEmpty && isElement) {\n        range.collapse(isBlockElement);\n      } else if (canHaveHTML && isEmpty) {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n\n      this.setSelection(range);\n    },\n\n    /**\n     * Get the node which contains the selection\n     *\n     * @param {Boolean} [controlRange] (only IE) Whether it should return the selected ControlRange element when the selection type is a \"ControlRange\"\n     * @return {Object} The node that contains the caret\n     * @example\n     *    var nodeThatContainsCaret = selection.getSelectedNode();\n     */\n    getSelectedNode: function(controlRange) {\n      var selection,\n          range;\n\n      if (controlRange && this.doc.selection && this.doc.selection.type === \"Control\") {\n        range = this.doc.selection.createRange();\n        if (range && range.length) {\n          return range.item(0);\n        }\n      }\n\n      selection = this.getSelection(this.doc);\n      if (selection.focusNode === selection.anchorNode) {\n        return selection.focusNode;\n      } else {\n        range = this.getRange(this.doc);\n        return range ? range.commonAncestorContainer : this.doc.body;\n      }\n    },\n\n    fixSelBorders: function() {\n      var range = this.getRange();\n      expandRangeToSurround(range);\n      this.setSelection(range);\n    },\n\n    getSelectedOwnNodes: function(controlRange) {\n      var selection,\n          ranges = this.getOwnRanges(),\n          ownNodes = [];\n\n      for (var i = 0, maxi = ranges.length; i < maxi; i++) {\n          ownNodes.push(ranges[i].commonAncestorContainer || this.doc.body);\n      }\n      return ownNodes;\n    },\n\n    findNodesInSelection: function(nodeTypes) {\n      var ranges = this.getOwnRanges(),\n          nodes = [], curNodes;\n      for (var i = 0, maxi = ranges.length; i < maxi; i++) {\n        curNodes = ranges[i].getNodes([1], function(node) {\n            return wysihtml5.lang.array(nodeTypes).contains(node.nodeName);\n        });\n        nodes = nodes.concat(curNodes);\n      }\n      return nodes;\n    },\n\n    containsUneditable: function() {\n      var uneditables = this.getOwnUneditables(),\n          selection = this.getSelection();\n\n      for (var i = 0, maxi = uneditables.length; i < maxi; i++) {\n        if (selection.containsNode(uneditables[i])) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    deleteContents: function()  {\n      var ranges = this.getOwnRanges();\n      for (var i = ranges.length; i--;) {\n        ranges[i].deleteContents();\n      }\n      this.setSelection(ranges[0]);\n    },\n\n    getPreviousNode: function(node, ignoreEmpty) {\n      if (!node) {\n        var selection = this.getSelection();\n        node = selection.anchorNode;\n      }\n\n      if (node === this.contain) {\n          return false;\n      }\n\n      var ret = node.previousSibling,\n          parent;\n\n      if (ret === this.contain) {\n          return false;\n      }\n\n      if (ret && ret.nodeType !== 3 && ret.nodeType !== 1) {\n         // do not count comments and other node types\n         ret = this.getPreviousNode(ret, ignoreEmpty);\n      } else if (ret && ret.nodeType === 3 && (/^\\s*$/).test(ret.textContent)) {\n        // do not count empty textnodes as previus nodes\n        ret = this.getPreviousNode(ret, ignoreEmpty);\n      } else if (ignoreEmpty && ret && ret.nodeType === 1 && !wysihtml5.lang.array([\"BR\", \"HR\", \"IMG\"]).contains(ret.nodeName) && (/^[\\s]*$/).test(ret.innerHTML)) {\n        // Do not count empty nodes if param set.\n        // Contenteditable tends to bypass and delete these silently when deleting with caret\n        ret = this.getPreviousNode(ret, ignoreEmpty);\n      } else if (!ret && node !== this.contain) {\n        parent = node.parentNode;\n        if (parent !== this.contain) {\n            ret = this.getPreviousNode(parent, ignoreEmpty);\n        }\n      }\n\n      return (ret !== this.contain) ? ret : false;\n    },\n\n    getSelectionParentsByTag: function(tagName) {\n      var nodes = this.getSelectedOwnNodes(),\n          curEl, parents = [];\n\n      for (var i = 0, maxi = nodes.length; i < maxi; i++) {\n        curEl = (nodes[i].nodeName &&  nodes[i].nodeName === 'LI') ? nodes[i] : wysihtml5.dom.getParentElement(nodes[i], { nodeName: ['LI']}, false, this.contain);\n        if (curEl) {\n          parents.push(curEl);\n        }\n      }\n      return (parents.length) ? parents : null;\n    },\n\n    getRangeToNodeEnd: function() {\n      if (this.isCollapsed()) {\n        var range = this.getRange(),\n            sNode = range.startContainer,\n            pos = range.startOffset,\n            lastR = rangy.createRange(this.doc);\n\n        lastR.selectNodeContents(sNode);\n        lastR.setStart(sNode, pos);\n        return lastR;\n      }\n    },\n\n    caretIsLastInSelection: function() {\n      var r = rangy.createRange(this.doc),\n          s = this.getSelection(),\n          endc = this.getRangeToNodeEnd().cloneContents(),\n          endtxt = endc.textContent;\n\n      return (/^\\s*$/).test(endtxt);\n    },\n\n    caretIsFirstInSelection: function() {\n      var r = rangy.createRange(this.doc),\n          s = this.getSelection(),\n          range = this.getRange(),\n          startNode = range.startContainer;\n      \n      if (startNode.nodeType === wysihtml5.TEXT_NODE) {\n        return this.isCollapsed() && (startNode.nodeType === wysihtml5.TEXT_NODE && (/^\\s*$/).test(startNode.data.substr(0,range.startOffset)));\n      } else {\n        r.selectNodeContents(this.getRange().commonAncestorContainer);\n        r.collapse(true);\n        return (this.isCollapsed() && (r.startContainer === s.anchorNode || r.endContainer === s.anchorNode) && r.startOffset === s.anchorOffset);\n      }\n    },\n\n    caretIsInTheBeginnig: function(ofNode) {\n        var selection = this.getSelection(),\n            node = selection.anchorNode,\n            offset = selection.anchorOffset;\n        if (ofNode) {\n          return (offset === 0 && (node.nodeName && node.nodeName === ofNode.toUpperCase() || wysihtml5.dom.getParentElement(node.parentNode, { nodeName: ofNode }, 1)));\n        } else {\n          return (offset === 0 && !this.getPreviousNode(node, true));\n        }\n    },\n\n    caretIsBeforeUneditable: function() {\n      var selection = this.getSelection(),\n          node = selection.anchorNode,\n          offset = selection.anchorOffset;\n\n      if (offset === 0) {\n        var prevNode = this.getPreviousNode(node, true);\n        if (prevNode) {\n          var uneditables = this.getOwnUneditables();\n          for (var i = 0, maxi = uneditables.length; i < maxi; i++) {\n            if (prevNode === uneditables[i]) {\n              return uneditables[i];\n            }\n          }\n        }\n      }\n      return false;\n    },\n\n    // TODO: Figure out a method from following 2 that would work universally\n    executeAndRestoreRangy: function(method, restoreScrollPosition) {\n      var win = this.doc.defaultView || this.doc.parentWindow,\n          sel = rangy.saveSelection(win);\n\n      if (!sel) {\n        method();\n      } else {\n        try {\n          method();\n        } catch(e) {\n          setTimeout(function() { throw e; }, 0);\n        }\n      }\n      rangy.restoreSelection(sel);\n    },\n\n    // TODO: has problems in chrome 12. investigate block level and uneditable area inbetween\n    executeAndRestore: function(method, restoreScrollPosition) {\n      var body                  = this.doc.body,\n          oldScrollTop          = restoreScrollPosition && body.scrollTop,\n          oldScrollLeft         = restoreScrollPosition && body.scrollLeft,\n          className             = \"_wysihtml5-temp-placeholder\",\n          placeholderHtml       = '<span class=\"' + className + '\">' + wysihtml5.INVISIBLE_SPACE + '</span>',\n          range                 = this.getRange(true),\n          caretPlaceholder,\n          newCaretPlaceholder,\n          nextSibling, prevSibling,\n          node, node2, range2,\n          newRange;\n\n      // Nothing selected, execute and say goodbye\n      if (!range) {\n        method(body, body);\n        return;\n      }\n\n      if (!range.collapsed) {\n        range2 = range.cloneRange();\n        node2 = range2.createContextualFragment(placeholderHtml);\n        range2.collapse(false);\n        range2.insertNode(node2);\n        range2.detach();\n      }\n\n      node = range.createContextualFragment(placeholderHtml);\n      range.insertNode(node);\n\n      if (node2) {\n        caretPlaceholder = this.contain.querySelectorAll(\".\" + className);\n        range.setStartBefore(caretPlaceholder[0]);\n        range.setEndAfter(caretPlaceholder[caretPlaceholder.length -1]);\n      }\n      this.setSelection(range);\n\n      // Make sure that a potential error doesn't cause our placeholder element to be left as a placeholder\n      try {\n        method(range.startContainer, range.endContainer);\n      } catch(e) {\n        setTimeout(function() { throw e; }, 0);\n      }\n      caretPlaceholder = this.contain.querySelectorAll(\".\" + className);\n      if (caretPlaceholder && caretPlaceholder.length) {\n        newRange = rangy.createRange(this.doc);\n        nextSibling = caretPlaceholder[0].nextSibling;\n        if (caretPlaceholder.length > 1) {\n          prevSibling = caretPlaceholder[caretPlaceholder.length -1].previousSibling;\n        }\n        if (prevSibling && nextSibling) {\n          newRange.setStartBefore(nextSibling);\n          newRange.setEndAfter(prevSibling);\n        } else {\n          newCaretPlaceholder = this.doc.createTextNode(wysihtml5.INVISIBLE_SPACE);\n          dom.insert(newCaretPlaceholder).after(caretPlaceholder[0]);\n          newRange.setStartBefore(newCaretPlaceholder);\n          newRange.setEndAfter(newCaretPlaceholder);\n        }\n        this.setSelection(newRange);\n        for (var i = caretPlaceholder.length; i--;) {\n         caretPlaceholder[i].parentNode.removeChild(caretPlaceholder[i]);\n        }\n\n      } else {\n        // fallback for when all hell breaks loose\n        this.contain.focus();\n      }\n\n      if (restoreScrollPosition) {\n        body.scrollTop  = oldScrollTop;\n        body.scrollLeft = oldScrollLeft;\n      }\n\n      // Remove it again, just to make sure that the placeholder is definitely out of the dom tree\n      try {\n        caretPlaceholder.parentNode.removeChild(caretPlaceholder);\n      } catch(e2) {}\n    },\n\n    set: function(node, offset) {\n      var newRange = rangy.createRange(this.doc);\n      newRange.setStart(node, offset || 0);\n      this.setSelection(newRange);\n    },\n\n    /**\n     * Insert html at the caret position and move the cursor after the inserted html\n     *\n     * @param {String} html HTML string to insert\n     * @example\n     *    selection.insertHTML(\"<p>foobar</p>\");\n     */\n    insertHTML: function(html) {\n      var range     = rangy.createRange(this.doc),\n          node = this.doc.createElement('DIV'),\n          fragment = this.doc.createDocumentFragment(),\n          lastChild;\n\n      node.innerHTML = html;\n      lastChild = node.lastChild;\n\n      while (node.firstChild) {\n        fragment.appendChild(node.firstChild);\n      }\n      this.insertNode(fragment);\n\n      if (lastChild) {\n        this.setAfter(lastChild);\n      }\n    },\n\n    /**\n     * Insert a node at the caret position and move the cursor behind it\n     *\n     * @param {Object} node HTML string to insert\n     * @example\n     *    selection.insertNode(document.createTextNode(\"foobar\"));\n     */\n    insertNode: function(node) {\n      var range = this.getRange();\n      if (range) {\n        range.insertNode(node);\n      }\n    },\n\n    /**\n     * Wraps current selection with the given node\n     *\n     * @param {Object} node The node to surround the selected elements with\n     */\n    surround: function(nodeOptions) {\n      var ranges = this.getOwnRanges(),\n          node, nodes = [];\n      if (ranges.length == 0) {\n        return nodes;\n      }\n\n      for (var i = ranges.length; i--;) {\n        node = this.doc.createElement(nodeOptions.nodeName);\n        nodes.push(node);\n        if (nodeOptions.className) {\n          node.className = nodeOptions.className;\n        }\n        if (nodeOptions.cssStyle) {\n          node.setAttribute('style', nodeOptions.cssStyle);\n        }\n        try {\n          // This only works when the range boundaries are not overlapping other elements\n          ranges[i].surroundContents(node);\n          this.selectNode(node);\n        } catch(e) {\n          // fallback\n          node.appendChild(ranges[i].extractContents());\n          ranges[i].insertNode(node);\n        }\n      }\n      return nodes;\n    },\n\n    deblockAndSurround: function(nodeOptions) {\n      var tempElement = this.doc.createElement('div'),\n          range = rangy.createRange(this.doc),\n          tempDivElements,\n          tempElements,\n          firstChild;\n\n      tempElement.className = nodeOptions.className;\n\n      this.composer.commands.exec(\"formatBlock\", nodeOptions.nodeName, nodeOptions.className);\n      tempDivElements = this.contain.querySelectorAll(\".\" + nodeOptions.className);\n      if (tempDivElements[0]) {\n        tempDivElements[0].parentNode.insertBefore(tempElement, tempDivElements[0]);\n\n        range.setStartBefore(tempDivElements[0]);\n        range.setEndAfter(tempDivElements[tempDivElements.length - 1]);\n        tempElements = range.extractContents();\n\n        while (tempElements.firstChild) {\n          firstChild = tempElements.firstChild;\n          if (firstChild.nodeType == 1 && wysihtml5.dom.hasClass(firstChild, nodeOptions.className)) {\n            while (firstChild.firstChild) {\n              tempElement.appendChild(firstChild.firstChild);\n            }\n            if (firstChild.nodeName !== \"BR\") { tempElement.appendChild(this.doc.createElement('br')); }\n            tempElements.removeChild(firstChild);\n          } else {\n            tempElement.appendChild(firstChild);\n          }\n        }\n      } else {\n        tempElement = null;\n      }\n\n      return tempElement;\n    },\n\n    /**\n     * Scroll the current caret position into the view\n     * FIXME: This is a bit hacky, there might be a smarter way of doing this\n     *\n     * @example\n     *    selection.scrollIntoView();\n     */\n    scrollIntoView: function() {\n      var doc           = this.doc,\n          tolerance     = 5, // px\n          hasScrollBars = doc.documentElement.scrollHeight > doc.documentElement.offsetHeight,\n          tempElement   = doc._wysihtml5ScrollIntoViewElement = doc._wysihtml5ScrollIntoViewElement || (function() {\n            var element = doc.createElement(\"span\");\n            // The element needs content in order to be able to calculate it's position properly\n            element.innerHTML = wysihtml5.INVISIBLE_SPACE;\n            return element;\n          })(),\n          offsetTop;\n\n      if (hasScrollBars) {\n        this.insertNode(tempElement);\n        offsetTop = _getCumulativeOffsetTop(tempElement);\n        tempElement.parentNode.removeChild(tempElement);\n        if (offsetTop >= (doc.body.scrollTop + doc.documentElement.offsetHeight - tolerance)) {\n          doc.body.scrollTop = offsetTop;\n        }\n      }\n    },\n\n    /**\n     * Select line where the caret is in\n     */\n    selectLine: function() {\n      if (wysihtml5.browser.supportsSelectionModify()) {\n        this._selectLine_W3C();\n      } else if (this.doc.selection) {\n        this._selectLine_MSIE();\n      }\n    },\n\n    /**\n     * See https://developer.mozilla.org/en/DOM/Selection/modify\n     */\n    _selectLine_W3C: function() {\n      var win       = this.doc.defaultView,\n          selection = win.getSelection();\n      selection.modify(\"move\", \"left\", \"lineboundary\");\n      selection.modify(\"extend\", \"right\", \"lineboundary\");\n    },\n\n    _selectLine_MSIE: function() {\n      var range       = this.doc.selection.createRange(),\n          rangeTop    = range.boundingTop,\n          scrollWidth = this.doc.body.scrollWidth,\n          rangeBottom,\n          rangeEnd,\n          measureNode,\n          i,\n          j;\n\n      if (!range.moveToPoint) {\n        return;\n      }\n\n      if (rangeTop === 0) {\n        // Don't know why, but when the selection ends at the end of a line\n        // range.boundingTop is 0\n        measureNode = this.doc.createElement(\"span\");\n        this.insertNode(measureNode);\n        rangeTop = measureNode.offsetTop;\n        measureNode.parentNode.removeChild(measureNode);\n      }\n\n      rangeTop += 1;\n\n      for (i=-10; i<scrollWidth; i+=2) {\n        try {\n          range.moveToPoint(i, rangeTop);\n          break;\n        } catch(e1) {}\n      }\n\n      // Investigate the following in order to handle multi line selections\n      // rangeBottom = rangeTop + (rangeHeight ? (rangeHeight - 1) : 0);\n      rangeBottom = rangeTop;\n      rangeEnd = this.doc.selection.createRange();\n      for (j=scrollWidth; j>=0; j--) {\n        try {\n          rangeEnd.moveToPoint(j, rangeBottom);\n          break;\n        } catch(e2) {}\n      }\n\n      range.setEndPoint(\"EndToEnd\", rangeEnd);\n      range.select();\n    },\n\n    getText: function() {\n      var selection = this.getSelection();\n      return selection ? selection.toString() : \"\";\n    },\n\n    getNodes: function(nodeType, filter) {\n      var range = this.getRange();\n      if (range) {\n        return range.getNodes([nodeType], filter);\n      } else {\n        return [];\n      }\n    },\n\n    fixRangeOverflow: function(range) {\n      if (this.contain && this.contain.firstChild && range) {\n        var containment = range.compareNode(this.contain);\n        if (containment !== 2) {\n          if (containment === 1) {\n            range.setStartBefore(this.contain.firstChild);\n          }\n          if (containment === 0) {\n            range.setEndAfter(this.contain.lastChild);\n          }\n          if (containment === 3) {\n            range.setStartBefore(this.contain.firstChild);\n            range.setEndAfter(this.contain.lastChild);\n          }\n        } else if (this._detectInlineRangeProblems(range)) {\n          var previousElementSibling = range.endContainer.previousElementSibling;\n          if (previousElementSibling) {\n            range.setEnd(previousElementSibling, this._endOffsetForNode(previousElementSibling));\n          }\n        }\n      }\n    },\n\n    _endOffsetForNode: function(node) {\n      var range = document.createRange();\n      range.selectNodeContents(node);\n      return range.endOffset;\n    },\n\n    _detectInlineRangeProblems: function(range) {\n      var position = dom.compareDocumentPosition(range.startContainer, range.endContainer);\n      return (\n        range.endOffset == 0 &&\n        position & 4 //Node.DOCUMENT_POSITION_FOLLOWING\n      );\n    },\n\n    getRange: function(dontFix) {\n      var selection = this.getSelection(),\n          range = selection && selection.rangeCount && selection.getRangeAt(0);\n\n      if (dontFix !== true) {\n        this.fixRangeOverflow(range);\n      }\n\n      return range;\n    },\n\n    getOwnUneditables: function() {\n      var allUneditables = dom.query(this.contain, '.' + this.unselectableClass),\n          deepUneditables = dom.query(allUneditables, '.' + this.unselectableClass);\n\n      return wysihtml5.lang.array(allUneditables).without(deepUneditables);\n    },\n\n    // Returns an array of ranges that belong only to this editable\n    // Needed as uneditable block in contenteditabel can split range into pieces\n    // If manipulating content reverse loop is usually needed as manipulation can shift subsequent ranges\n    getOwnRanges: function()  {\n      var ranges = [],\n          r = this.getRange(),\n          tmpRanges;\n\n      if (r) { ranges.push(r); }\n\n      if (this.unselectableClass && this.contain && r) {\n          var uneditables = this.getOwnUneditables(),\n              tmpRange;\n          if (uneditables.length > 0) {\n            for (var i = 0, imax = uneditables.length; i < imax; i++) {\n              tmpRanges = [];\n              for (var j = 0, jmax = ranges.length; j < jmax; j++) {\n                if (ranges[j]) {\n                  switch (ranges[j].compareNode(uneditables[i])) {\n                    case 2:\n                      // all selection inside uneditable. remove\n                    break;\n                    case 3:\n                      //section begins before and ends after uneditable. spilt\n                      tmpRange = ranges[j].cloneRange();\n                      tmpRange.setEndBefore(uneditables[i]);\n                      tmpRanges.push(tmpRange);\n\n                      tmpRange = ranges[j].cloneRange();\n                      tmpRange.setStartAfter(uneditables[i]);\n                      tmpRanges.push(tmpRange);\n                    break;\n                    default:\n                      // in all other cases uneditable does not touch selection. dont modify\n                      tmpRanges.push(ranges[j]);\n                  }\n                }\n                ranges = tmpRanges;\n              }\n            }\n          }\n      }\n      return ranges;\n    },\n\n    getSelection: function() {\n      return rangy.getSelection(this.doc.defaultView || this.doc.parentWindow);\n    },\n\n    setSelection: function(range) {\n      var win       = this.doc.defaultView || this.doc.parentWindow,\n          selection = rangy.getSelection(win);\n      return selection.setSingleRange(range);\n    },\n\n    createRange: function() {\n      return rangy.createRange(this.doc);\n    },\n\n    isCollapsed: function() {\n        return this.getSelection().isCollapsed;\n    },\n\n    getHtml: function() {\n      return this.getSelection().toHtml();\n    },\n\n    isEndToEndInNode: function(nodeNames) {\n      var range = this.getRange(),\n          parentElement = range.commonAncestorContainer,\n          startNode = range.startContainer,\n          endNode = range.endContainer;\n\n\n        if (parentElement.nodeType === wysihtml5.TEXT_NODE) {\n          parentElement = parentElement.parentNode;\n        }\n\n        if (startNode.nodeType === wysihtml5.TEXT_NODE && !(/^\\s*$/).test(startNode.data.substr(range.startOffset))) {\n          return false;\n        }\n\n        if (endNode.nodeType === wysihtml5.TEXT_NODE && !(/^\\s*$/).test(endNode.data.substr(range.endOffset))) {\n          return false;\n        }\n\n        while (startNode && startNode !== parentElement) {\n          if (startNode.nodeType !== wysihtml5.TEXT_NODE && !wysihtml5.dom.contains(parentElement, startNode)) {\n            return false;\n          }\n          if (wysihtml5.dom.domNode(startNode).prev({ignoreBlankTexts: true})) {\n            return false;\n          }\n          startNode = startNode.parentNode;\n        }\n\n        while (endNode && endNode !== parentElement) {\n          if (endNode.nodeType !== wysihtml5.TEXT_NODE && !wysihtml5.dom.contains(parentElement, endNode)) {\n            return false;\n          }\n          if (wysihtml5.dom.domNode(endNode).next({ignoreBlankTexts: true})) {\n            return false;\n          }\n          endNode = endNode.parentNode;\n        }\n\n        return (wysihtml5.lang.array(nodeNames).contains(parentElement.nodeName)) ? parentElement : false;\n    },\n\n    deselect: function() {\n      var sel = this.getSelection();\n      sel && sel.removeAllRanges();\n    }\n  });\n\n})(wysihtml5);\n;/**\n * Inspired by the rangy CSS Applier module written by Tim Down and licensed under the MIT license.\n * http://code.google.com/p/rangy/\n *\n * changed in order to be able ...\n *    - to use custom tags\n *    - to detect and replace similar css classes via reg exp\n */\n(function(wysihtml5, rangy) {\n  var defaultTagName = \"span\";\n\n  var REG_EXP_WHITE_SPACE = /\\s+/g;\n\n  function hasClass(el, cssClass, regExp) {\n    if (!el.className) {\n      return false;\n    }\n\n    var matchingClassNames = el.className.match(regExp) || [];\n    return matchingClassNames[matchingClassNames.length - 1] === cssClass;\n  }\n\n  function hasStyleAttr(el, regExp) {\n    if (!el.getAttribute || !el.getAttribute('style')) {\n      return false;\n    }\n    var matchingStyles = el.getAttribute('style').match(regExp);\n    return  (el.getAttribute('style').match(regExp)) ? true : false;\n  }\n\n  function addStyle(el, cssStyle, regExp) {\n    if (el.getAttribute('style')) {\n      removeStyle(el, regExp);\n      if (el.getAttribute('style') && !(/^\\s*$/).test(el.getAttribute('style'))) {\n        el.setAttribute('style', cssStyle + \";\" + el.getAttribute('style'));\n      } else {\n        el.setAttribute('style', cssStyle);\n      }\n    } else {\n      el.setAttribute('style', cssStyle);\n    }\n  }\n\n  function addClass(el, cssClass, regExp) {\n    if (el.className) {\n      removeClass(el, regExp);\n      el.className += \" \" + cssClass;\n    } else {\n      el.className = cssClass;\n    }\n  }\n\n  function removeClass(el, regExp) {\n    if (el.className) {\n      el.className = el.className.replace(regExp, \"\");\n    }\n  }\n\n  function removeStyle(el, regExp) {\n    var s,\n        s2 = [];\n    if (el.getAttribute('style')) {\n      s = el.getAttribute('style').split(';');\n      for (var i = s.length; i--;) {\n        if (!s[i].match(regExp) && !(/^\\s*$/).test(s[i])) {\n          s2.push(s[i]);\n        }\n      }\n      if (s2.length) {\n        el.setAttribute('style', s2.join(';'));\n      } else {\n        el.removeAttribute('style');\n      }\n    }\n  }\n\n  function getMatchingStyleRegexp(el, style) {\n    var regexes = [],\n        sSplit = style.split(';'),\n        elStyle = el.getAttribute('style');\n\n    if (elStyle) {\n      elStyle = elStyle.replace(/\\s/gi, '').toLowerCase();\n      regexes.push(new RegExp(\"(^|\\\\s|;)\" + style.replace(/\\s/gi, '').replace(/([\\(\\)])/gi, \"\\\\$1\").toLowerCase().replace(\";\", \";?\").replace(/rgb\\\\\\((\\d+),(\\d+),(\\d+)\\\\\\)/gi, \"\\\\s?rgb\\\\($1,\\\\s?$2,\\\\s?$3\\\\)\"), \"gi\"));\n\n      for (var i = sSplit.length; i-- > 0;) {\n        if (!(/^\\s*$/).test(sSplit[i])) {\n          regexes.push(new RegExp(\"(^|\\\\s|;)\" + sSplit[i].replace(/\\s/gi, '').replace(/([\\(\\)])/gi, \"\\\\$1\").toLowerCase().replace(\";\", \";?\").replace(/rgb\\\\\\((\\d+),(\\d+),(\\d+)\\\\\\)/gi, \"\\\\s?rgb\\\\($1,\\\\s?$2,\\\\s?$3\\\\)\"), \"gi\"));\n        }\n      }\n      for (var j = 0, jmax = regexes.length; j < jmax; j++) {\n        if (elStyle.match(regexes[j])) {\n          return regexes[j];\n        }\n      }\n    }\n\n    return false;\n  }\n\n  function isMatchingAllready(node, tags, style, className) {\n    if (style) {\n      return getMatchingStyleRegexp(node, style);\n    } else if (className) {\n      return wysihtml5.dom.hasClass(node, className);\n    } else {\n      return rangy.dom.arrayContains(tags, node.tagName.toLowerCase());\n    }\n  }\n\n  function areMatchingAllready(nodes, tags, style, className) {\n    for (var i = nodes.length; i--;) {\n      if (!isMatchingAllready(nodes[i], tags, style, className)) {\n        return false;\n      }\n    }\n    return nodes.length ? true : false;\n  }\n\n  function removeOrChangeStyle(el, style, regExp) {\n\n    var exactRegex = getMatchingStyleRegexp(el, style);\n    if (exactRegex) {\n      // adding same style value on property again removes style\n      removeStyle(el, exactRegex);\n      return \"remove\";\n    } else {\n      // adding new style value changes value\n      addStyle(el, style, regExp);\n      return \"change\";\n    }\n  }\n\n  function hasSameClasses(el1, el2) {\n    return el1.className.replace(REG_EXP_WHITE_SPACE, \" \") == el2.className.replace(REG_EXP_WHITE_SPACE, \" \");\n  }\n\n  function replaceWithOwnChildren(el) {\n    var parent = el.parentNode;\n    while (el.firstChild) {\n      parent.insertBefore(el.firstChild, el);\n    }\n    parent.removeChild(el);\n  }\n\n  function elementsHaveSameNonClassAttributes(el1, el2) {\n    if (el1.attributes.length != el2.attributes.length) {\n      return false;\n    }\n    for (var i = 0, len = el1.attributes.length, attr1, attr2, name; i < len; ++i) {\n      attr1 = el1.attributes[i];\n      name = attr1.name;\n      if (name != \"class\") {\n        attr2 = el2.attributes.getNamedItem(name);\n        if (attr1.specified != attr2.specified) {\n          return false;\n        }\n        if (attr1.specified && attr1.nodeValue !== attr2.nodeValue) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  function isSplitPoint(node, offset) {\n    if (rangy.dom.isCharacterDataNode(node)) {\n      if (offset == 0) {\n        return !!node.previousSibling;\n      } else if (offset == node.length) {\n        return !!node.nextSibling;\n      } else {\n        return true;\n      }\n    }\n\n    return offset > 0 && offset < node.childNodes.length;\n  }\n\n  function splitNodeAt(node, descendantNode, descendantOffset, container) {\n    var newNode;\n    if (rangy.dom.isCharacterDataNode(descendantNode)) {\n      if (descendantOffset == 0) {\n        descendantOffset = rangy.dom.getNodeIndex(descendantNode);\n        descendantNode = descendantNode.parentNode;\n      } else if (descendantOffset == descendantNode.length) {\n        descendantOffset = rangy.dom.getNodeIndex(descendantNode) + 1;\n        descendantNode = descendantNode.parentNode;\n      } else {\n        newNode = rangy.dom.splitDataNode(descendantNode, descendantOffset);\n      }\n    }\n    if (!newNode) {\n      if (!container || descendantNode !== container) {\n\n        newNode = descendantNode.cloneNode(false);\n        if (newNode.id) {\n          newNode.removeAttribute(\"id\");\n        }\n        var child;\n        while ((child = descendantNode.childNodes[descendantOffset])) {\n          newNode.appendChild(child);\n        }\n        rangy.dom.insertAfter(newNode, descendantNode);\n\n      }\n    }\n    return (descendantNode == node) ? newNode :  splitNodeAt(node, newNode.parentNode, rangy.dom.getNodeIndex(newNode), container);\n  }\n\n  function Merge(firstNode) {\n    this.isElementMerge = (firstNode.nodeType == wysihtml5.ELEMENT_NODE);\n    this.firstTextNode = this.isElementMerge ? firstNode.lastChild : firstNode;\n    this.textNodes = [this.firstTextNode];\n  }\n\n  Merge.prototype = {\n    doMerge: function() {\n      var textBits = [], textNode, parent, text;\n      for (var i = 0, len = this.textNodes.length; i < len; ++i) {\n        textNode = this.textNodes[i];\n        parent = textNode.parentNode;\n        textBits[i] = textNode.data;\n        if (i) {\n          parent.removeChild(textNode);\n          if (!parent.hasChildNodes()) {\n            parent.parentNode.removeChild(parent);\n          }\n        }\n      }\n      this.firstTextNode.data = text = textBits.join(\"\");\n      return text;\n    },\n\n    getLength: function() {\n      var i = this.textNodes.length, len = 0;\n      while (i--) {\n        len += this.textNodes[i].length;\n      }\n      return len;\n    },\n\n    toString: function() {\n      var textBits = [];\n      for (var i = 0, len = this.textNodes.length; i < len; ++i) {\n        textBits[i] = \"'\" + this.textNodes[i].data + \"'\";\n      }\n      return \"[Merge(\" + textBits.join(\",\") + \")]\";\n    }\n  };\n\n  function HTMLApplier(tagNames, cssClass, similarClassRegExp, normalize, cssStyle, similarStyleRegExp, container) {\n    this.tagNames = tagNames || [defaultTagName];\n    this.cssClass = cssClass || ((cssClass === false) ? false : \"\");\n    this.similarClassRegExp = similarClassRegExp;\n    this.cssStyle = cssStyle || \"\";\n    this.similarStyleRegExp = similarStyleRegExp;\n    this.normalize = normalize;\n    this.applyToAnyTagName = false;\n    this.container = container;\n  }\n\n  HTMLApplier.prototype = {\n    getAncestorWithClass: function(node) {\n      var cssClassMatch;\n      while (node) {\n        cssClassMatch = this.cssClass ? hasClass(node, this.cssClass, this.similarClassRegExp) : (this.cssStyle !== \"\") ? false : true;\n        if (node.nodeType == wysihtml5.ELEMENT_NODE && node.getAttribute(\"contenteditable\") != \"false\" &&  rangy.dom.arrayContains(this.tagNames, node.tagName.toLowerCase()) && cssClassMatch) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    },\n\n    // returns parents of node with given style attribute\n    getAncestorWithStyle: function(node) {\n      var cssStyleMatch;\n      while (node) {\n        cssStyleMatch = this.cssStyle ? hasStyleAttr(node, this.similarStyleRegExp) : false;\n\n        if (node.nodeType == wysihtml5.ELEMENT_NODE && node.getAttribute(\"contenteditable\") != \"false\" && rangy.dom.arrayContains(this.tagNames, node.tagName.toLowerCase()) && cssStyleMatch) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    },\n\n    getMatchingAncestor: function(node) {\n      var ancestor = this.getAncestorWithClass(node),\n          matchType = false;\n\n      if (!ancestor) {\n        ancestor = this.getAncestorWithStyle(node);\n        if (ancestor) {\n          matchType = \"style\";\n        }\n      } else {\n        if (this.cssStyle) {\n          matchType = \"class\";\n        }\n      }\n\n      return {\n        \"element\": ancestor,\n        \"type\": matchType\n      };\n    },\n\n    // Normalizes nodes after applying a CSS class to a Range.\n    postApply: function(textNodes, range) {\n      var firstNode = textNodes[0], lastNode = textNodes[textNodes.length - 1];\n\n      var merges = [], currentMerge;\n\n      var rangeStartNode = firstNode, rangeEndNode = lastNode;\n      var rangeStartOffset = 0, rangeEndOffset = lastNode.length;\n\n      var textNode, precedingTextNode;\n\n      for (var i = 0, len = textNodes.length; i < len; ++i) {\n        textNode = textNodes[i];\n        precedingTextNode = null;\n        if (textNode && textNode.parentNode) {\n          precedingTextNode = this.getAdjacentMergeableTextNode(textNode.parentNode, false);\n        }\n        if (precedingTextNode) {\n          if (!currentMerge) {\n            currentMerge = new Merge(precedingTextNode);\n            merges.push(currentMerge);\n          }\n          currentMerge.textNodes.push(textNode);\n          if (textNode === firstNode) {\n            rangeStartNode = currentMerge.firstTextNode;\n            rangeStartOffset = rangeStartNode.length;\n          }\n          if (textNode === lastNode) {\n            rangeEndNode = currentMerge.firstTextNode;\n            rangeEndOffset = currentMerge.getLength();\n          }\n        } else {\n          currentMerge = null;\n        }\n      }\n      // Test whether the first node after the range needs merging\n      if(lastNode && lastNode.parentNode) {\n        var nextTextNode = this.getAdjacentMergeableTextNode(lastNode.parentNode, true);\n        if (nextTextNode) {\n          if (!currentMerge) {\n            currentMerge = new Merge(lastNode);\n            merges.push(currentMerge);\n          }\n          currentMerge.textNodes.push(nextTextNode);\n        }\n      }\n      // Do the merges\n      if (merges.length) {\n        for (i = 0, len = merges.length; i < len; ++i) {\n          merges[i].doMerge();\n        }\n        // Set the range boundaries\n        range.setStart(rangeStartNode, rangeStartOffset);\n        range.setEnd(rangeEndNode, rangeEndOffset);\n      }\n    },\n\n    getAdjacentMergeableTextNode: function(node, forward) {\n        var isTextNode = (node.nodeType == wysihtml5.TEXT_NODE);\n        var el = isTextNode ? node.parentNode : node;\n        var adjacentNode;\n        var propName = forward ? \"nextSibling\" : \"previousSibling\";\n        if (isTextNode) {\n          // Can merge if the node's previous/next sibling is a text node\n          adjacentNode = node[propName];\n          if (adjacentNode && adjacentNode.nodeType == wysihtml5.TEXT_NODE) {\n            return adjacentNode;\n          }\n        } else {\n          // Compare element with its sibling\n          adjacentNode = el[propName];\n          if (adjacentNode && this.areElementsMergeable(node, adjacentNode)) {\n            return adjacentNode[forward ? \"firstChild\" : \"lastChild\"];\n          }\n        }\n        return null;\n    },\n\n    areElementsMergeable: function(el1, el2) {\n      return rangy.dom.arrayContains(this.tagNames, (el1.tagName || \"\").toLowerCase())\n        && rangy.dom.arrayContains(this.tagNames, (el2.tagName || \"\").toLowerCase())\n        && hasSameClasses(el1, el2)\n        && elementsHaveSameNonClassAttributes(el1, el2);\n    },\n\n    createContainer: function(doc) {\n      var el = doc.createElement(this.tagNames[0]);\n      if (this.cssClass) {\n        el.className = this.cssClass;\n      }\n      if (this.cssStyle) {\n        el.setAttribute('style', this.cssStyle);\n      }\n      return el;\n    },\n\n    applyToTextNode: function(textNode) {\n      var parent = textNode.parentNode;\n      if (parent.childNodes.length == 1 && rangy.dom.arrayContains(this.tagNames, parent.tagName.toLowerCase())) {\n\n        if (this.cssClass) {\n          addClass(parent, this.cssClass, this.similarClassRegExp);\n        }\n        if (this.cssStyle) {\n          addStyle(parent, this.cssStyle, this.similarStyleRegExp);\n        }\n      } else {\n        var el = this.createContainer(rangy.dom.getDocument(textNode));\n        textNode.parentNode.insertBefore(el, textNode);\n        el.appendChild(textNode);\n      }\n    },\n\n    isRemovable: function(el) {\n      return rangy.dom.arrayContains(this.tagNames, el.tagName.toLowerCase()) &&\n              wysihtml5.lang.string(el.className).trim() === \"\" &&\n              (\n                !el.getAttribute('style') ||\n                wysihtml5.lang.string(el.getAttribute('style')).trim() === \"\"\n              );\n    },\n\n    undoToTextNode: function(textNode, range, ancestorWithClass, ancestorWithStyle) {\n      var styleMode = (ancestorWithClass) ? false : true,\n          ancestor = ancestorWithClass || ancestorWithStyle,\n          styleChanged = false;\n      if (!range.containsNode(ancestor)) {\n        // Split out the portion of the ancestor from which we can remove the CSS class\n        var ancestorRange = range.cloneRange();\n            ancestorRange.selectNode(ancestor);\n\n        if (ancestorRange.isPointInRange(range.endContainer, range.endOffset) && isSplitPoint(range.endContainer, range.endOffset)) {\n            splitNodeAt(ancestor, range.endContainer, range.endOffset, this.container);\n            range.setEndAfter(ancestor);\n        }\n        if (ancestorRange.isPointInRange(range.startContainer, range.startOffset) && isSplitPoint(range.startContainer, range.startOffset)) {\n            ancestor = splitNodeAt(ancestor, range.startContainer, range.startOffset, this.container);\n        }\n      }\n\n      if (!styleMode && this.similarClassRegExp) {\n        removeClass(ancestor, this.similarClassRegExp);\n      }\n\n      if (styleMode && this.similarStyleRegExp) {\n        styleChanged = (removeOrChangeStyle(ancestor, this.cssStyle, this.similarStyleRegExp) === \"change\");\n      }\n      if (this.isRemovable(ancestor) && !styleChanged) {\n        replaceWithOwnChildren(ancestor);\n      }\n    },\n\n    applyToRange: function(range) {\n        var textNodes;\n        for (var ri = range.length; ri--;) {\n            textNodes = range[ri].getNodes([wysihtml5.TEXT_NODE]);\n\n            if (!textNodes.length) {\n              try {\n                var node = this.createContainer(range[ri].endContainer.ownerDocument);\n                range[ri].surroundContents(node);\n                this.selectNode(range[ri], node);\n                return;\n              } catch(e) {}\n            }\n\n            range[ri].splitBoundaries();\n            textNodes = range[ri].getNodes([wysihtml5.TEXT_NODE]);\n            if (textNodes.length) {\n              var textNode;\n\n              for (var i = 0, len = textNodes.length; i < len; ++i) {\n                textNode = textNodes[i];\n                if (!this.getMatchingAncestor(textNode).element) {\n                  this.applyToTextNode(textNode);\n                }\n              }\n\n              range[ri].setStart(textNodes[0], 0);\n              textNode = textNodes[textNodes.length - 1];\n              range[ri].setEnd(textNode, textNode.length);\n\n              if (this.normalize) {\n                this.postApply(textNodes, range[ri]);\n              }\n            }\n\n        }\n    },\n\n    undoToRange: function(range) {\n      var textNodes, textNode, ancestorWithClass, ancestorWithStyle, ancestor;\n      for (var ri = range.length; ri--;) {\n\n          textNodes = range[ri].getNodes([wysihtml5.TEXT_NODE]);\n          if (textNodes.length) {\n            range[ri].splitBoundaries();\n            textNodes = range[ri].getNodes([wysihtml5.TEXT_NODE]);\n          } else {\n            var doc = range[ri].endContainer.ownerDocument,\n                node = doc.createTextNode(wysihtml5.INVISIBLE_SPACE);\n            range[ri].insertNode(node);\n            range[ri].selectNode(node);\n            textNodes = [node];\n          }\n\n          for (var i = 0, len = textNodes.length; i < len; ++i) {\n            if (range[ri].isValid()) {\n              textNode = textNodes[i];\n\n              ancestor = this.getMatchingAncestor(textNode);\n              if (ancestor.type === \"style\") {\n                this.undoToTextNode(textNode, range[ri], false, ancestor.element);\n              } else if (ancestor.element) {\n                this.undoToTextNode(textNode, range[ri], ancestor.element);\n              }\n            }\n          }\n\n          if (len == 1) {\n            this.selectNode(range[ri], textNodes[0]);\n          } else {\n            range[ri].setStart(textNodes[0], 0);\n            textNode = textNodes[textNodes.length - 1];\n            range[ri].setEnd(textNode, textNode.length);\n\n            if (this.normalize) {\n              this.postApply(textNodes, range[ri]);\n            }\n          }\n\n      }\n    },\n\n    selectNode: function(range, node) {\n      var isElement       = node.nodeType === wysihtml5.ELEMENT_NODE,\n          canHaveHTML     = \"canHaveHTML\" in node ? node.canHaveHTML : true,\n          content         = isElement ? node.innerHTML : node.data,\n          isEmpty         = (content === \"\" || content === wysihtml5.INVISIBLE_SPACE);\n\n      if (isEmpty && isElement && canHaveHTML) {\n        // Make sure that caret is visible in node by inserting a zero width no breaking space\n        try { node.innerHTML = wysihtml5.INVISIBLE_SPACE; } catch(e) {}\n      }\n      range.selectNodeContents(node);\n      if (isEmpty && isElement) {\n        range.collapse(false);\n      } else if (isEmpty) {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n    },\n\n    getTextSelectedByRange: function(textNode, range) {\n      var textRange = range.cloneRange();\n      textRange.selectNodeContents(textNode);\n\n      var intersectionRange = textRange.intersection(range);\n      var text = intersectionRange ? intersectionRange.toString() : \"\";\n      textRange.detach();\n\n      return text;\n    },\n\n    isAppliedToRange: function(range) {\n      var ancestors = [],\n          appliedType = \"full\",\n          ancestor, styleAncestor, textNodes;\n\n      for (var ri = range.length; ri--;) {\n\n        textNodes = range[ri].getNodes([wysihtml5.TEXT_NODE]);\n        if (!textNodes.length) {\n          ancestor = this.getMatchingAncestor(range[ri].startContainer).element;\n\n          return (ancestor) ? {\n            \"elements\": [ancestor],\n            \"coverage\": appliedType\n          } : false;\n        }\n\n        for (var i = 0, len = textNodes.length, selectedText; i < len; ++i) {\n          selectedText = this.getTextSelectedByRange(textNodes[i], range[ri]);\n          ancestor = this.getMatchingAncestor(textNodes[i]).element;\n          if (ancestor && selectedText != \"\") {\n            ancestors.push(ancestor);\n\n            if (wysihtml5.dom.getTextNodes(ancestor, true).length === 1) {\n              appliedType = \"full\";\n            } else if (appliedType === \"full\") {\n              appliedType = \"inline\";\n            }\n          } else if (!ancestor) {\n            appliedType = \"partial\";\n          }\n        }\n\n      }\n\n      return (ancestors.length) ? {\n        \"elements\": ancestors,\n        \"coverage\": appliedType\n      } : false;\n    },\n\n    toggleRange: function(range) {\n      var isApplied = this.isAppliedToRange(range),\n          parentsExactMatch;\n\n      if (isApplied) {\n        if (isApplied.coverage === \"full\") {\n          this.undoToRange(range);\n        } else if (isApplied.coverage === \"inline\") {\n          parentsExactMatch = areMatchingAllready(isApplied.elements, this.tagNames, this.cssStyle, this.cssClass);\n          this.undoToRange(range);\n          if (!parentsExactMatch) {\n            this.applyToRange(range);\n          }\n        } else {\n          // partial\n          if (!areMatchingAllready(isApplied.elements, this.tagNames, this.cssStyle, this.cssClass)) {\n            this.undoToRange(range);\n          }\n          this.applyToRange(range);\n        }\n      } else {\n        this.applyToRange(range);\n      }\n    }\n  };\n\n  wysihtml5.selection.HTMLApplier = HTMLApplier;\n\n})(wysihtml5, rangy);\n;/**\n * Rich Text Query/Formatting Commands\n *\n * @example\n *    var commands = new wysihtml5.Commands(editor);\n */\nwysihtml5.Commands = Base.extend(\n  /** @scope wysihtml5.Commands.prototype */ {\n  constructor: function(editor) {\n    this.editor   = editor;\n    this.composer = editor.composer;\n    this.doc      = this.composer.doc;\n  },\n\n  /**\n   * Check whether the browser supports the given command\n   *\n   * @param {String} command The command string which to check (eg. \"bold\", \"italic\", \"insertUnorderedList\")\n   * @example\n   *    commands.supports(\"createLink\");\n   */\n  support: function(command) {\n    return wysihtml5.browser.supportsCommand(this.doc, command);\n  },\n\n  /**\n   * Check whether the browser supports the given command\n   *\n   * @param {String} command The command string which to execute (eg. \"bold\", \"italic\", \"insertUnorderedList\")\n   * @param {String} [value] The command value parameter, needed for some commands (\"createLink\", \"insertImage\", ...), optional for commands that don't require one (\"bold\", \"underline\", ...)\n   * @example\n   *    commands.exec(\"insertImage\", \"http://a1.twimg.com/profile_images/113868655/schrei_twitter_reasonably_small.jpg\");\n   */\n  exec: function(command, value) {\n    var obj     = wysihtml5.commands[command],\n        args    = wysihtml5.lang.array(arguments).get(),\n        method  = obj && obj.exec,\n        result  = null;\n\n    this.editor.fire(\"beforecommand:composer\");\n\n    if (method) {\n      args.unshift(this.composer);\n      result = method.apply(obj, args);\n    } else {\n      try {\n        // try/catch for buggy firefox\n        result = this.doc.execCommand(command, false, value);\n      } catch(e) {}\n    }\n\n    this.editor.fire(\"aftercommand:composer\");\n    return result;\n  },\n\n  /**\n   * Check whether the current command is active\n   * If the caret is within a bold text, then calling this with command \"bold\" should return true\n   *\n   * @param {String} command The command string which to check (eg. \"bold\", \"italic\", \"insertUnorderedList\")\n   * @param {String} [commandValue] The command value parameter (eg. for \"insertImage\" the image src)\n   * @return {Boolean} Whether the command is active\n   * @example\n   *    var isCurrentSelectionBold = commands.state(\"bold\");\n   */\n  state: function(command, commandValue) {\n    var obj     = wysihtml5.commands[command],\n        args    = wysihtml5.lang.array(arguments).get(),\n        method  = obj && obj.state;\n    if (method) {\n      args.unshift(this.composer);\n      return method.apply(obj, args);\n    } else {\n      try {\n        // try/catch for buggy firefox\n        return this.doc.queryCommandState(command);\n      } catch(e) {\n        return false;\n      }\n    }\n  },\n\n  /* Get command state parsed value if command has stateValue parsing function */\n  stateValue: function(command) {\n    var obj     = wysihtml5.commands[command],\n        args    = wysihtml5.lang.array(arguments).get(),\n        method  = obj && obj.stateValue;\n    if (method) {\n      args.unshift(this.composer);\n      return method.apply(obj, args);\n    } else {\n      return false;\n    }\n  }\n});\n;wysihtml5.commands.bold = {\n  exec: function(composer, command) {\n    wysihtml5.commands.formatInline.execWithToggle(composer, command, \"b\");\n  },\n\n  state: function(composer, command) {\n    // element.ownerDocument.queryCommandState(\"bold\") results:\n    // firefox: only <b>\n    // chrome:  <b>, <strong>, <h1>, <h2>, ...\n    // ie:      <b>, <strong>\n    // opera:   <b>, <strong>\n    return wysihtml5.commands.formatInline.state(composer, command, \"b\");\n  }\n};\n\n;(function(wysihtml5) {\n  var undef,\n      NODE_NAME = \"A\",\n      dom       = wysihtml5.dom;\n\n  function _format(composer, attributes) {\n    var doc             = composer.doc,\n        tempClass       = \"_wysihtml5-temp-\" + (+new Date()),\n        tempClassRegExp = /non-matching-class/g,\n        i               = 0,\n        length,\n        anchors,\n        anchor,\n        hasElementChild,\n        isEmpty,\n        elementToSetCaretAfter,\n        textContent,\n        whiteSpace,\n        j;\n    wysihtml5.commands.formatInline.exec(composer, undef, NODE_NAME, tempClass, tempClassRegExp, undef, undef, true, true);\n    anchors = doc.querySelectorAll(NODE_NAME + \".\" + tempClass);\n    length  = anchors.length;\n    for (; i<length; i++) {\n      anchor = anchors[i];\n      anchor.removeAttribute(\"class\");\n      for (j in attributes) {\n        // Do not set attribute \"text\" as it is meant for setting string value if created link has no textual data\n        if (j !== \"text\") {\n          anchor.setAttribute(j, attributes[j]);\n        }\n      }\n    }\n\n    elementToSetCaretAfter = anchor;\n    if (length === 1) {\n      textContent = dom.getTextContent(anchor);\n      hasElementChild = !!anchor.querySelector(\"*\");\n      isEmpty = textContent === \"\" || textContent === wysihtml5.INVISIBLE_SPACE;\n      if (!hasElementChild && isEmpty) {\n        dom.setTextContent(anchor, attributes.text || anchor.href);\n        whiteSpace = doc.createTextNode(\" \");\n        composer.selection.setAfter(anchor);\n        dom.insert(whiteSpace).after(anchor);\n        elementToSetCaretAfter = whiteSpace;\n      }\n    }\n    composer.selection.setAfter(elementToSetCaretAfter);\n  }\n\n  // Changes attributes of links\n  function _changeLinks(composer, anchors, attributes) {\n    var oldAttrs;\n    for (var a = anchors.length; a--;) {\n\n      // Remove all old attributes\n      oldAttrs = anchors[a].attributes;\n      for (var oa = oldAttrs.length; oa--;) {\n        anchors[a].removeAttribute(oldAttrs.item(oa).name);\n      }\n\n      // Set new attributes\n      for (var j in attributes) {\n        if (attributes.hasOwnProperty(j)) {\n          anchors[a].setAttribute(j, attributes[j]);\n        }\n      }\n\n    }\n  }\n\n  wysihtml5.commands.createLink = {\n    /**\n     * TODO: Use HTMLApplier or formatInline here\n     *\n     * Turns selection into a link\n     * If selection is already a link, it just changes the attributes\n     *\n     * @example\n     *    // either ...\n     *    wysihtml5.commands.createLink.exec(composer, \"createLink\", \"http://www.google.de\");\n     *    // ... or ...\n     *    wysihtml5.commands.createLink.exec(composer, \"createLink\", { href: \"http://www.google.de\", target: \"_blank\" });\n     */\n    exec: function(composer, command, value) {\n      var anchors = this.state(composer, command);\n      if (anchors) {\n        // Selection contains links then change attributes of these links\n        composer.selection.executeAndRestore(function() {\n          _changeLinks(composer, anchors, value);\n        });\n      } else {\n        // Create links\n        value = typeof(value) === \"object\" ? value : { href: value };\n        _format(composer, value);\n      }\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatInline.state(composer, command, \"A\");\n    }\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n  var dom = wysihtml5.dom;\n\n  function _removeFormat(composer, anchors) {\n    var length  = anchors.length,\n        i       = 0,\n        anchor,\n        codeElement,\n        textContent;\n    for (; i<length; i++) {\n      anchor      = anchors[i];\n      codeElement = dom.getParentElement(anchor, { nodeName: \"code\" });\n      textContent = dom.getTextContent(anchor);\n\n      // if <a> contains url-like text content, rename it to <code> to prevent re-autolinking\n      // else replace <a> with its childNodes\n      if (textContent.match(dom.autoLink.URL_REG_EXP) && !codeElement) {\n        // <code> element is used to prevent later auto-linking of the content\n        codeElement = dom.renameElement(anchor, \"code\");\n      } else {\n        dom.replaceWithChildNodes(anchor);\n      }\n    }\n  }\n\n  wysihtml5.commands.removeLink = {\n    /*\n     * If selection is a link, it removes the link and wraps it with a <code> element\n     * The <code> element is needed to avoid auto linking\n     *\n     * @example\n     *    wysihtml5.commands.createLink.exec(composer, \"removeLink\");\n     */\n\n    exec: function(composer, command) {\n      var anchors = this.state(composer, command);\n      if (anchors) {\n        composer.selection.executeAndRestore(function() {\n          _removeFormat(composer, anchors);\n        });\n      }\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatInline.state(composer, command, \"A\");\n    }\n  };\n})(wysihtml5);\n;/**\n * document.execCommand(\"fontSize\") will create either inline styles (firefox, chrome) or use font tags\n * which we don't want\n * Instead we set a css class\n */\n(function(wysihtml5) {\n  var REG_EXP = /wysiwyg-font-size-[0-9a-z\\-]+/g;\n\n  wysihtml5.commands.fontSize = {\n    exec: function(composer, command, size) {\n        wysihtml5.commands.formatInline.execWithToggle(composer, command, \"span\", \"wysiwyg-font-size-\" + size, REG_EXP);\n    },\n\n    state: function(composer, command, size) {\n      return wysihtml5.commands.formatInline.state(composer, command, \"span\", \"wysiwyg-font-size-\" + size, REG_EXP);\n    }\n  };\n})(wysihtml5);\n;/* In case font size adjustment to any number defined by user is preferred, we cannot use classes and must use inline styles. */\n(function(wysihtml5) {\n  var REG_EXP = /(\\s|^)font-size\\s*:\\s*[^;\\s]+;?/gi;\n\n  wysihtml5.commands.fontSizeStyle = {\n    exec: function(composer, command, size) {\n      size = (typeof(size) == \"object\") ? size.size : size;\n      if (!(/^\\s*$/).test(size)) {\n        wysihtml5.commands.formatInline.execWithToggle(composer, command, \"span\", false, false, \"font-size:\" + size, REG_EXP);\n      }\n    },\n\n    state: function(composer, command, size) {\n      return wysihtml5.commands.formatInline.state(composer, command, \"span\", false, false, \"font-size\", REG_EXP);\n    },\n\n    stateValue: function(composer, command) {\n      var st = this.state(composer, command),\n          styleStr, fontsizeMatches,\n          val = false;\n\n      if (st && wysihtml5.lang.object(st).isArray()) {\n          st = st[0];\n      }\n      if (st) {\n        styleStr = st.getAttribute('style');\n        if (styleStr) {\n          return wysihtml5.quirks.styleParser.parseFontSize(styleStr);\n        }\n      }\n      return false;\n    }\n  };\n})(wysihtml5);\n;/**\n * document.execCommand(\"foreColor\") will create either inline styles (firefox, chrome) or use font tags\n * which we don't want\n * Instead we set a css class\n */\n(function(wysihtml5) {\n  var REG_EXP = /wysiwyg-color-[0-9a-z]+/g;\n\n  wysihtml5.commands.foreColor = {\n    exec: function(composer, command, color) {\n        wysihtml5.commands.formatInline.execWithToggle(composer, command, \"span\", \"wysiwyg-color-\" + color, REG_EXP);\n    },\n\n    state: function(composer, command, color) {\n      return wysihtml5.commands.formatInline.state(composer, command, \"span\", \"wysiwyg-color-\" + color, REG_EXP);\n    }\n  };\n})(wysihtml5);\n;/**\n * document.execCommand(\"foreColor\") will create either inline styles (firefox, chrome) or use font tags\n * which we don't want\n * Instead we set a css class\n */\n(function(wysihtml5) {\n  var REG_EXP = /(\\s|^)color\\s*:\\s*[^;\\s]+;?/gi;\n\n  wysihtml5.commands.foreColorStyle = {\n    exec: function(composer, command, color) {\n      var colorVals  = wysihtml5.quirks.styleParser.parseColor((typeof(color) == \"object\") ? \"color:\" + color.color : \"color:\" + color, \"color\"),\n          colString;\n\n      if (colorVals) {\n        colString = \"color: rgb(\" + colorVals[0] + ',' + colorVals[1] + ',' + colorVals[2] + ');';\n        if (colorVals[3] !== 1) {\n          colString += \"color: rgba(\" + colorVals[0] + ',' + colorVals[1] + ',' + colorVals[2] + ',' + colorVals[3] + ');';\n        }\n        wysihtml5.commands.formatInline.execWithToggle(composer, command, \"span\", false, false, colString, REG_EXP);\n      }\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatInline.state(composer, command, \"span\", false, false, \"color\", REG_EXP);\n    },\n\n    stateValue: function(composer, command, props) {\n      var st = this.state(composer, command),\n          colorStr;\n\n      if (st && wysihtml5.lang.object(st).isArray()) {\n        st = st[0];\n      }\n\n      if (st) {\n        colorStr = st.getAttribute('style');\n        if (colorStr) {\n          if (colorStr) {\n            val = wysihtml5.quirks.styleParser.parseColor(colorStr, \"color\");\n            return wysihtml5.quirks.styleParser.unparseColor(val, props);\n          }\n        }\n      }\n      return false;\n    }\n\n  };\n})(wysihtml5);\n;/* In case background adjustment to any color defined by user is preferred, we cannot use classes and must use inline styles. */\n(function(wysihtml5) {\n  var REG_EXP = /(\\s|^)background-color\\s*:\\s*[^;\\s]+;?/gi;\n\n  wysihtml5.commands.bgColorStyle = {\n    exec: function(composer, command, color) {\n      var colorVals  = wysihtml5.quirks.styleParser.parseColor((typeof(color) == \"object\") ? \"background-color:\" + color.color : \"background-color:\" + color, \"background-color\"),\n          colString;\n\n      if (colorVals) {\n        colString = \"background-color: rgb(\" + colorVals[0] + ',' + colorVals[1] + ',' + colorVals[2] + ');';\n        if (colorVals[3] !== 1) {\n          colString += \"background-color: rgba(\" + colorVals[0] + ',' + colorVals[1] + ',' + colorVals[2] + ',' + colorVals[3] + ');';\n        }\n        wysihtml5.commands.formatInline.execWithToggle(composer, command, \"span\", false, false, colString, REG_EXP);\n      }\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatInline.state(composer, command, \"span\", false, false, \"background-color\", REG_EXP);\n    },\n\n    stateValue: function(composer, command, props) {\n      var st = this.state(composer, command),\n          colorStr,\n          val = false;\n\n      if (st && wysihtml5.lang.object(st).isArray()) {\n        st = st[0];\n      }\n\n      if (st) {\n        colorStr = st.getAttribute('style');\n        if (colorStr) {\n          val = wysihtml5.quirks.styleParser.parseColor(colorStr, \"background-color\");\n          return wysihtml5.quirks.styleParser.unparseColor(val, props);\n        }\n      }\n      return false;\n    }\n\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n  var dom                     = wysihtml5.dom,\n      // Following elements are grouped\n      // when the caret is within a H1 and the H4 is invoked, the H1 should turn into H4\n      // instead of creating a H4 within a H1 which would result in semantically invalid html\n      BLOCK_ELEMENTS_GROUP    = [\"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\", \"P\", \"PRE\", \"DIV\"];\n\n  /**\n   * Remove similiar classes (based on classRegExp)\n   * and add the desired class name\n   */\n  function _addClass(element, className, classRegExp) {\n    if (element.className) {\n      _removeClass(element, classRegExp);\n      element.className = wysihtml5.lang.string(element.className + \" \" + className).trim();\n    } else {\n      element.className = className;\n    }\n  }\n\n  function _addStyle(element, cssStyle, styleRegExp) {\n    _removeStyle(element, styleRegExp);\n    if (element.getAttribute('style')) {\n      element.setAttribute('style', wysihtml5.lang.string(element.getAttribute('style') + \" \" + cssStyle).trim());\n    } else {\n      element.setAttribute('style', cssStyle);\n    }\n  }\n\n  function _removeClass(element, classRegExp) {\n    var ret = classRegExp.test(element.className);\n    element.className = element.className.replace(classRegExp, \"\");\n    if (wysihtml5.lang.string(element.className).trim() == '') {\n        element.removeAttribute('class');\n    }\n    return ret;\n  }\n\n  function _removeStyle(element, styleRegExp) {\n    var ret = styleRegExp.test(element.getAttribute('style'));\n    element.setAttribute('style', (element.getAttribute('style') || \"\").replace(styleRegExp, \"\"));\n    if (wysihtml5.lang.string(element.getAttribute('style') || \"\").trim() == '') {\n      element.removeAttribute('style');\n    }\n    return ret;\n  }\n\n  function _removeLastChildIfLineBreak(node) {\n    var lastChild = node.lastChild;\n    if (lastChild && _isLineBreak(lastChild)) {\n      lastChild.parentNode.removeChild(lastChild);\n    }\n  }\n\n  function _isLineBreak(node) {\n    return node.nodeName === \"BR\";\n  }\n\n  /**\n   * Execute native query command\n   * and if necessary modify the inserted node's className\n   */\n  function _execCommand(doc, composer, command, nodeName, className) {\n    var ranges = composer.selection.getOwnRanges();\n    for (var i = ranges.length; i--;){\n      composer.selection.getSelection().removeAllRanges();\n      composer.selection.setSelection(ranges[i]);\n      if (className) {\n        var eventListener = dom.observe(doc, \"DOMNodeInserted\", function(event) {\n          var target = event.target,\n              displayStyle;\n          if (target.nodeType !== wysihtml5.ELEMENT_NODE) {\n            return;\n          }\n          displayStyle = dom.getStyle(\"display\").from(target);\n          if (displayStyle.substr(0, 6) !== \"inline\") {\n            // Make sure that only block elements receive the given class\n            target.className += \" \" + className;\n          }\n        });\n      }\n      doc.execCommand(command, false, nodeName);\n\n      if (eventListener) {\n        eventListener.stop();\n      }\n    }\n  }\n\n  function _selectionWrap(composer, options) {\n    if (composer.selection.isCollapsed()) {\n        composer.selection.selectLine();\n    }\n\n    var surroundedNodes = composer.selection.surround(options);\n    for (var i = 0, imax = surroundedNodes.length; i < imax; i++) {\n      wysihtml5.dom.lineBreaks(surroundedNodes[i]).remove();\n      _removeLastChildIfLineBreak(surroundedNodes[i]);\n    }\n\n    // rethink restoring selection\n    // composer.selection.selectNode(element, wysihtml5.browser.displaysCaretInEmptyContentEditableCorrectly());\n  }\n\n  function _hasClasses(element) {\n    return !!wysihtml5.lang.string(element.className).trim();\n  }\n\n  function _hasStyles(element) {\n    return !!wysihtml5.lang.string(element.getAttribute('style') || '').trim();\n  }\n\n  wysihtml5.commands.formatBlock = {\n    exec: function(composer, command, nodeName, className, classRegExp, cssStyle, styleRegExp) {\n      var doc             = composer.doc,\n          blockElements    = this.state(composer, command, nodeName, className, classRegExp, cssStyle, styleRegExp),\n          useLineBreaks   = composer.config.useLineBreaks,\n          defaultNodeName = useLineBreaks ? \"DIV\" : \"P\",\n          selectedNodes, classRemoveAction, blockRenameFound, styleRemoveAction, blockElement;\n      nodeName = typeof(nodeName) === \"string\" ? nodeName.toUpperCase() : nodeName;\n\n      if (blockElements.length) {\n        composer.selection.executeAndRestoreRangy(function() {\n          for (var b = blockElements.length; b--;) {\n            if (classRegExp) {\n              classRemoveAction = _removeClass(blockElements[b], classRegExp);\n            }\n            if (styleRegExp) {\n              styleRemoveAction = _removeStyle(blockElements[b], styleRegExp);\n            }\n\n            if ((styleRemoveAction || classRemoveAction) && nodeName === null && blockElements[b].nodeName != defaultNodeName) {\n              // dont rename or remove element when just setting block formating class or style\n              return;\n            }\n\n            var hasClasses = _hasClasses(blockElements[b]),\n                hasStyles = _hasStyles(blockElements[b]);\n\n            if (!hasClasses && !hasStyles && (useLineBreaks || nodeName === \"P\")) {\n              // Insert a line break afterwards and beforewards when there are siblings\n              // that are not of type line break or block element\n              wysihtml5.dom.lineBreaks(blockElements[b]).add();\n              dom.replaceWithChildNodes(blockElements[b]);\n            } else {\n              // Make sure that styling is kept by renaming the element to a <div> or <p> and copying over the class name\n              dom.renameElement(blockElements[b], nodeName === \"P\" ? \"DIV\" : defaultNodeName);\n            }\n          }\n        });\n\n        return;\n      }\n\n      // Find similiar block element and rename it (<h2 class=\"foo\"></h2>  =>  <h1 class=\"foo\"></h1>)\n      if (nodeName === null || wysihtml5.lang.array(BLOCK_ELEMENTS_GROUP).contains(nodeName)) {\n        selectedNodes = composer.selection.findNodesInSelection(BLOCK_ELEMENTS_GROUP).concat(composer.selection.getSelectedOwnNodes());\n        composer.selection.executeAndRestoreRangy(function() {\n          for (var n = selectedNodes.length; n--;) {\n            blockElement = dom.getParentElement(selectedNodes[n], {\n              nodeName: BLOCK_ELEMENTS_GROUP\n            });\n            if (blockElement == composer.element) {\n              blockElement = null;\n            }\n            if (blockElement) {\n                // Rename current block element to new block element and add class\n                if (nodeName) {\n                  blockElement = dom.renameElement(blockElement, nodeName);\n                }\n                if (className) {\n                  _addClass(blockElement, className, classRegExp);\n                }\n                if (cssStyle) {\n                  _addStyle(blockElement, cssStyle, styleRegExp);\n                }\n              blockRenameFound = true;\n            }\n          }\n\n        });\n\n        if (blockRenameFound) {\n          return;\n        }\n      }\n\n      _selectionWrap(composer, {\n        \"nodeName\": (nodeName || defaultNodeName),\n        \"className\": className || null,\n        \"cssStyle\": cssStyle || null\n      });\n    },\n\n    state: function(composer, command, nodeName, className, classRegExp, cssStyle, styleRegExp) {\n      var nodes = composer.selection.getSelectedOwnNodes(),\n          parents = [],\n          parent;\n\n      nodeName = typeof(nodeName) === \"string\" ? nodeName.toUpperCase() : nodeName;\n\n      //var selectedNode = composer.selection.getSelectedNode();\n      for (var i = 0, maxi = nodes.length; i < maxi; i++) {\n        parent = dom.getParentElement(nodes[i], {\n          nodeName:     nodeName,\n          className:    className,\n          classRegExp:  classRegExp,\n          cssStyle:     cssStyle,\n          styleRegExp:  styleRegExp\n        });\n        if (parent && wysihtml5.lang.array(parents).indexOf(parent) == -1) {\n          parents.push(parent);\n        }\n      }\n      if (parents.length == 0) {\n        return false;\n      }\n      return parents;\n    }\n\n\n  };\n})(wysihtml5);\n;/* Formats block for as a <pre><code class=\"classname\"></code></pre> block\n * Useful in conjuction for sytax highlight utility: highlight.js\n *\n * Usage:\n *\n * editorInstance.composer.commands.exec(\"formatCode\", \"language-html\");\n*/\n\nwysihtml5.commands.formatCode = {\n\n  exec: function(composer, command, classname) {\n    var pre = this.state(composer),\n        code, range, selectedNodes;\n    if (pre) {\n      // caret is already within a <pre><code>...</code></pre>\n      composer.selection.executeAndRestore(function() {\n        code = pre.querySelector(\"code\");\n        wysihtml5.dom.replaceWithChildNodes(pre);\n        if (code) {\n          wysihtml5.dom.replaceWithChildNodes(code);\n        }\n      });\n    } else {\n      // Wrap in <pre><code>...</code></pre>\n      range = composer.selection.getRange();\n      selectedNodes = range.extractContents();\n      pre = composer.doc.createElement(\"pre\");\n      code = composer.doc.createElement(\"code\");\n\n      if (classname) {\n        code.className = classname;\n      }\n\n      pre.appendChild(code);\n      code.appendChild(selectedNodes);\n      range.insertNode(pre);\n      composer.selection.selectNode(pre);\n    }\n  },\n\n  state: function(composer) {\n    var selectedNode = composer.selection.getSelectedNode();\n    if (selectedNode && selectedNode.nodeName && selectedNode.nodeName == \"PRE\"&&\n        selectedNode.firstChild && selectedNode.firstChild.nodeName && selectedNode.firstChild.nodeName == \"CODE\") {\n      return selectedNode;\n    } else {\n      return wysihtml5.dom.getParentElement(selectedNode, { nodeName: \"CODE\" }) && wysihtml5.dom.getParentElement(selectedNode, { nodeName: \"PRE\" });\n    }\n  }\n};;/**\n * formatInline scenarios for tag \"B\" (| = caret, |foo| = selected text)\n *\n *   #1 caret in unformatted text:\n *      abcdefg|\n *   output:\n *      abcdefg<b>|</b>\n *\n *   #2 unformatted text selected:\n *      abc|deg|h\n *   output:\n *      abc<b>|deg|</b>h\n *\n *   #3 unformatted text selected across boundaries:\n *      ab|c <span>defg|h</span>\n *   output:\n *      ab<b>|c </b><span><b>defg</b>|h</span>\n *\n *   #4 formatted text entirely selected\n *      <b>|abc|</b>\n *   output:\n *      |abc|\n *\n *   #5 formatted text partially selected\n *      <b>ab|c|</b>\n *   output:\n *      <b>ab</b>|c|\n *\n *   #6 formatted text selected across boundaries\n *      <span>ab|c</span> <b>de|fgh</b>\n *   output:\n *      <span>ab|c</span> de|<b>fgh</b>\n */\n(function(wysihtml5) {\n  var // Treat <b> as <strong> and vice versa\n      ALIAS_MAPPING = {\n        \"strong\": \"b\",\n        \"em\":     \"i\",\n        \"b\":      \"strong\",\n        \"i\":      \"em\"\n      },\n      htmlApplier = {};\n\n  function _getTagNames(tagName) {\n    var alias = ALIAS_MAPPING[tagName];\n    return alias ? [tagName.toLowerCase(), alias.toLowerCase()] : [tagName.toLowerCase()];\n  }\n\n  function _getApplier(tagName, className, classRegExp, cssStyle, styleRegExp, container) {\n    var identifier = tagName;\n    \n    if (className) {\n      identifier += \":\" + className;\n    }\n    if (cssStyle) {\n      identifier += \":\" + cssStyle;\n    }\n\n    if (!htmlApplier[identifier]) {\n      htmlApplier[identifier] = new wysihtml5.selection.HTMLApplier(_getTagNames(tagName), className, classRegExp, true, cssStyle, styleRegExp, container);\n    }\n\n    return htmlApplier[identifier];\n  }\n\n  wysihtml5.commands.formatInline = {\n    exec: function(composer, command, tagName, className, classRegExp, cssStyle, styleRegExp, dontRestoreSelect, noCleanup) {\n      var range = composer.selection.createRange(),\n          ownRanges = composer.selection.getOwnRanges();\n\n      if (!ownRanges || ownRanges.length == 0) {\n        return false;\n      }\n      composer.selection.getSelection().removeAllRanges();\n\n      _getApplier(tagName, className, classRegExp, cssStyle, styleRegExp, composer.element).toggleRange(ownRanges);\n\n      if (!dontRestoreSelect) {\n        range.setStart(ownRanges[0].startContainer,  ownRanges[0].startOffset);\n        range.setEnd(\n          ownRanges[ownRanges.length - 1].endContainer,\n          ownRanges[ownRanges.length - 1].endOffset\n        );\n        composer.selection.setSelection(range);\n        composer.selection.executeAndRestore(function() {\n          if (!noCleanup) {\n            composer.cleanUp();\n          }\n        }, true, true);\n      } else if (!noCleanup) {\n        composer.cleanUp();\n      }\n    },\n\n    // Executes so that if collapsed caret is in a state and executing that state it should unformat that state\n    // It is achieved by selecting the entire state element before executing.\n    // This works on built in contenteditable inline format commands\n    execWithToggle: function(composer, command, tagName, className, classRegExp, cssStyle, styleRegExp) {\n      var that = this;\n\n      if (this.state(composer, command, tagName, className, classRegExp, cssStyle, styleRegExp) &&\n        composer.selection.isCollapsed() &&\n        !composer.selection.caretIsLastInSelection() &&\n        !composer.selection.caretIsFirstInSelection()\n      ) {\n        var state_element = that.state(composer, command, tagName, className, classRegExp)[0];\n        composer.selection.executeAndRestoreRangy(function() {\n          var parent = state_element.parentNode;\n          composer.selection.selectNode(state_element, true);\n          wysihtml5.commands.formatInline.exec(composer, command, tagName, className, classRegExp, cssStyle, styleRegExp, true, true);\n        });\n      } else {\n        if (this.state(composer, command, tagName, className, classRegExp, cssStyle, styleRegExp) && !composer.selection.isCollapsed()) {\n          composer.selection.executeAndRestoreRangy(function() {\n            wysihtml5.commands.formatInline.exec(composer, command, tagName, className, classRegExp, cssStyle, styleRegExp, true, true);\n          });\n        } else {\n          wysihtml5.commands.formatInline.exec(composer, command, tagName, className, classRegExp, cssStyle, styleRegExp);\n        }\n      }\n    },\n\n    state: function(composer, command, tagName, className, classRegExp, cssStyle, styleRegExp) {\n      var doc           = composer.doc,\n          aliasTagName  = ALIAS_MAPPING[tagName] || tagName,\n          ownRanges, isApplied;\n\n      // Check whether the document contains a node with the desired tagName\n      if (!wysihtml5.dom.hasElementWithTagName(doc, tagName) &&\n          !wysihtml5.dom.hasElementWithTagName(doc, aliasTagName)) {\n        return false;\n      }\n\n       // Check whether the document contains a node with the desired className\n      if (className && !wysihtml5.dom.hasElementWithClassName(doc, className)) {\n         return false;\n      }\n\n      ownRanges = composer.selection.getOwnRanges();\n\n      if (!ownRanges || ownRanges.length === 0) {\n        return false;\n      }\n\n      isApplied = _getApplier(tagName, className, classRegExp, cssStyle, styleRegExp, composer.element).isAppliedToRange(ownRanges);\n\n      return (isApplied && isApplied.elements) ? isApplied.elements : false;\n    }\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n\n  wysihtml5.commands.insertBlockQuote = {\n    exec: function(composer, command) {\n      var state = this.state(composer, command),\n          endToEndParent = composer.selection.isEndToEndInNode(['H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'P']),\n          prevNode, nextNode;\n\n      composer.selection.executeAndRestore(function() {\n        if (state) {\n          if (composer.config.useLineBreaks) {\n             wysihtml5.dom.lineBreaks(state).add();\n          }\n          wysihtml5.dom.unwrap(state);\n        } else {\n          if (composer.selection.isCollapsed()) {\n            composer.selection.selectLine();\n          }\n          \n          if (endToEndParent) {\n            var qouteEl = endToEndParent.ownerDocument.createElement('blockquote');\n            wysihtml5.dom.insert(qouteEl).after(endToEndParent);\n            qouteEl.appendChild(endToEndParent);\n          } else {\n            composer.selection.surround({nodeName: \"blockquote\"});\n          }\n        }\n      });\n    },\n    state: function(composer, command) {\n      var selectedNode  = composer.selection.getSelectedNode(),\n          node = wysihtml5.dom.getParentElement(selectedNode, { nodeName: \"BLOCKQUOTE\" }, false, composer.element);\n\n      return (node) ? node : false;\n    }\n  };\n\n})(wysihtml5);;wysihtml5.commands.insertHTML = {\n  exec: function(composer, command, html) {\n    if (composer.commands.support(command)) {\n      composer.doc.execCommand(command, false, html);\n    } else {\n      composer.selection.insertHTML(html);\n    }\n  },\n\n  state: function() {\n    return false;\n  }\n};\n;(function(wysihtml5) {\n  var NODE_NAME = \"IMG\";\n\n  wysihtml5.commands.insertImage = {\n    /**\n     * Inserts an <img>\n     * If selection is already an image link, it removes it\n     *\n     * @example\n     *    // either ...\n     *    wysihtml5.commands.insertImage.exec(composer, \"insertImage\", \"http://www.google.de/logo.jpg\");\n     *    // ... or ...\n     *    wysihtml5.commands.insertImage.exec(composer, \"insertImage\", { src: \"http://www.google.de/logo.jpg\", title: \"foo\" });\n     */\n    exec: function(composer, command, value) {\n      value = typeof(value) === \"object\" ? value : { src: value };\n\n      var doc     = composer.doc,\n          image   = this.state(composer),\n          textNode,\n          parent;\n\n      if (image) {\n        // Image already selected, set the caret before it and delete it\n        composer.selection.setBefore(image);\n        parent = image.parentNode;\n        parent.removeChild(image);\n\n        // and it's parent <a> too if it hasn't got any other relevant child nodes\n        wysihtml5.dom.removeEmptyTextNodes(parent);\n        if (parent.nodeName === \"A\" && !parent.firstChild) {\n          composer.selection.setAfter(parent);\n          parent.parentNode.removeChild(parent);\n        }\n\n        // firefox and ie sometimes don't remove the image handles, even though the image got removed\n        wysihtml5.quirks.redraw(composer.element);\n        return;\n      }\n\n      image = doc.createElement(NODE_NAME);\n\n      for (var i in value) {\n        image.setAttribute(i === \"className\" ? \"class\" : i, value[i]);\n      }\n\n      composer.selection.insertNode(image);\n      if (wysihtml5.browser.hasProblemsSettingCaretAfterImg()) {\n        textNode = doc.createTextNode(wysihtml5.INVISIBLE_SPACE);\n        composer.selection.insertNode(textNode);\n        composer.selection.setAfter(textNode);\n      } else {\n        composer.selection.setAfter(image);\n      }\n    },\n\n    state: function(composer) {\n      var doc = composer.doc,\n          selectedNode,\n          text,\n          imagesInSelection;\n\n      if (!wysihtml5.dom.hasElementWithTagName(doc, NODE_NAME)) {\n        return false;\n      }\n\n      selectedNode = composer.selection.getSelectedNode();\n      if (!selectedNode) {\n        return false;\n      }\n\n      if (selectedNode.nodeName === NODE_NAME) {\n        // This works perfectly in IE\n        return selectedNode;\n      }\n\n      if (selectedNode.nodeType !== wysihtml5.ELEMENT_NODE) {\n        return false;\n      }\n\n      text = composer.selection.getText();\n      text = wysihtml5.lang.string(text).trim();\n      if (text) {\n        return false;\n      }\n\n      imagesInSelection = composer.selection.getNodes(wysihtml5.ELEMENT_NODE, function(node) {\n        return node.nodeName === \"IMG\";\n      });\n\n      if (imagesInSelection.length !== 1) {\n        return false;\n      }\n\n      return imagesInSelection[0];\n    }\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n  var LINE_BREAK = \"<br>\" + (wysihtml5.browser.needsSpaceAfterLineBreak() ? \" \" : \"\");\n\n  wysihtml5.commands.insertLineBreak = {\n    exec: function(composer, command) {\n      if (composer.commands.support(command)) {\n        composer.doc.execCommand(command, false, null);\n        if (!wysihtml5.browser.autoScrollsToCaret()) {\n          composer.selection.scrollIntoView();\n        }\n      } else {\n        composer.commands.exec(\"insertHTML\", LINE_BREAK);\n      }\n    },\n\n    state: function() {\n      return false;\n    }\n  };\n})(wysihtml5);\n;wysihtml5.commands.insertOrderedList = {\n  exec: function(composer, command) {\n    wysihtml5.commands.insertList.exec(composer, command, \"OL\");\n  },\n\n  state: function(composer, command) {\n    return wysihtml5.commands.insertList.state(composer, command, \"OL\");\n  }\n};\n;wysihtml5.commands.insertUnorderedList = {\n  exec: function(composer, command) {\n    wysihtml5.commands.insertList.exec(composer, command, \"UL\");\n  },\n\n  state: function(composer, command) {\n    return wysihtml5.commands.insertList.state(composer, command, \"UL\");\n  }\n};\n;wysihtml5.commands.insertList = (function(wysihtml5) {\n\n  var isNode = function(node, name) {\n    if (node && node.nodeName) {\n      if (typeof name === 'string') {\n        name = [name];\n      }\n      for (var n = name.length; n--;) {\n        if (node.nodeName === name[n]) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n\n  var findListEl = function(node, nodeName, composer) {\n    var ret = {\n          el: null,\n          other: false\n        };\n\n    if (node) {\n      var parentLi = wysihtml5.dom.getParentElement(node, { nodeName: \"LI\" }),\n          otherNodeName = (nodeName === \"UL\") ? \"OL\" : \"UL\";\n\n      if (isNode(node, nodeName)) {\n        ret.el = node;\n      } else if (isNode(node, otherNodeName)) {\n        ret = {\n          el: node,\n          other: true\n        };\n      } else if (parentLi) {\n        if (isNode(parentLi.parentNode, nodeName)) {\n          ret.el = parentLi.parentNode;\n        } else if (isNode(parentLi.parentNode, otherNodeName)) {\n          ret = {\n            el : parentLi.parentNode,\n            other: true\n          };\n        }\n      }\n    }\n\n    // do not count list elements outside of composer\n    if (ret.el && !composer.element.contains(ret.el)) {\n      ret.el = null;\n    }\n\n    return ret;\n  };\n\n  var handleSameTypeList = function(el, nodeName, composer) {\n    var otherNodeName = (nodeName === \"UL\") ? \"OL\" : \"UL\",\n        otherLists, innerLists;\n    // Unwrap list\n    // <ul><li>foo</li><li>bar</li></ul>\n    // becomes:\n    // foo<br>bar<br>\n    composer.selection.executeAndRestore(function() {\n      var otherLists = getListsInSelection(otherNodeName, composer);\n      if (otherLists.length) {\n        for (var l = otherLists.length; l--;) {\n          wysihtml5.dom.renameElement(otherLists[l], nodeName.toLowerCase());\n        }\n      } else {\n        innerLists = getListsInSelection(['OL', 'UL'], composer);\n        for (var i = innerLists.length; i--;) {\n          wysihtml5.dom.resolveList(innerLists[i], composer.config.useLineBreaks);\n        }\n        wysihtml5.dom.resolveList(el, composer.config.useLineBreaks);\n      }\n    });\n  };\n\n  var handleOtherTypeList =  function(el, nodeName, composer) {\n    var otherNodeName = (nodeName === \"UL\") ? \"OL\" : \"UL\";\n    // Turn an ordered list into an unordered list\n    // <ol><li>foo</li><li>bar</li></ol>\n    // becomes:\n    // <ul><li>foo</li><li>bar</li></ul>\n    // Also rename other lists in selection\n    composer.selection.executeAndRestore(function() {\n      var renameLists = [el].concat(getListsInSelection(otherNodeName, composer));\n\n      // All selection inner lists get renamed too\n      for (var l = renameLists.length; l--;) {\n        wysihtml5.dom.renameElement(renameLists[l], nodeName.toLowerCase());\n      }\n    });\n  };\n\n  var getListsInSelection = function(nodeName, composer) {\n      var ranges = composer.selection.getOwnRanges(),\n          renameLists = [];\n\n      for (var r = ranges.length; r--;) {\n        renameLists = renameLists.concat(ranges[r].getNodes([1], function(node) {\n          return isNode(node, nodeName);\n        }));\n      }\n\n      return renameLists;\n  };\n\n  var createListFallback = function(nodeName, composer) {\n    // Fallback for Create list\n    composer.selection.executeAndRestoreRangy(function() {\n      var tempClassName =  \"_wysihtml5-temp-\" + new Date().getTime(),\n          tempElement = composer.selection.deblockAndSurround({\n            \"nodeName\": \"div\",\n            \"className\": tempClassName\n          }),\n          isEmpty, list;\n\n      // This space causes new lists to never break on enter \n      var INVISIBLE_SPACE_REG_EXP = /\\uFEFF/g;\n      tempElement.innerHTML = tempElement.innerHTML.replace(INVISIBLE_SPACE_REG_EXP, \"\");\n      \n      if (tempElement) {\n        isEmpty = wysihtml5.lang.array([\"\", \"<br>\", wysihtml5.INVISIBLE_SPACE]).contains(tempElement.innerHTML);\n        list = wysihtml5.dom.convertToList(tempElement, nodeName.toLowerCase(), composer.parent.config.uneditableContainerClassname);\n        if (isEmpty) {\n          composer.selection.selectNode(list.querySelector(\"li\"), true);\n        }\n      }\n    });\n  };\n\n  return {\n    exec: function(composer, command, nodeName) {\n      var doc           = composer.doc,\n          cmd           = (nodeName === \"OL\") ? \"insertOrderedList\" : \"insertUnorderedList\",\n          selectedNode  = composer.selection.getSelectedNode(),\n          list          = findListEl(selectedNode, nodeName, composer);\n\n      if (!list.el){\n        if (composer.commands.support(cmd)) {\n          doc.execCommand(cmd, false, null);\n        } else {\n          createListFallback(nodeName, composer);\n        }\n      } else if (list.other) {\n        handleOtherTypeList(list.el, nodeName, composer);\n      } else {\n        handleSameTypeList(list.el, nodeName, composer);\n      }\n    },\n\n    state: function(composer, command, nodeName) {\n      var selectedNode = composer.selection.getSelectedNode(),\n          list         = findListEl(selectedNode, nodeName, composer);\n\n      return (list.el && !list.other) ? list.el : false;\n    }\n  };\n\n})(wysihtml5);;wysihtml5.commands.italic = {\n  exec: function(composer, command) {\n    wysihtml5.commands.formatInline.execWithToggle(composer, command, \"i\");\n  },\n\n  state: function(composer, command) {\n    // element.ownerDocument.queryCommandState(\"italic\") results:\n    // firefox: only <i>\n    // chrome:  <i>, <em>, <blockquote>, ...\n    // ie:      <i>, <em>\n    // opera:   only <i>\n    return wysihtml5.commands.formatInline.state(composer, command, \"i\");\n  }\n};\n;(function(wysihtml5) {\n  var CLASS_NAME  = \"wysiwyg-text-align-center\",\n      REG_EXP     = /wysiwyg-text-align-[0-9a-z]+/g;\n\n  wysihtml5.commands.justifyCenter = {\n    exec: function(composer, command) {\n      return wysihtml5.commands.formatBlock.exec(composer, \"formatBlock\", null, CLASS_NAME, REG_EXP);\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatBlock.state(composer, \"formatBlock\", null, CLASS_NAME, REG_EXP);\n    }\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n  var CLASS_NAME  = \"wysiwyg-text-align-left\",\n      REG_EXP     = /wysiwyg-text-align-[0-9a-z]+/g;\n\n  wysihtml5.commands.justifyLeft = {\n    exec: function(composer, command) {\n      return wysihtml5.commands.formatBlock.exec(composer, \"formatBlock\", null, CLASS_NAME, REG_EXP);\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatBlock.state(composer, \"formatBlock\", null, CLASS_NAME, REG_EXP);\n    }\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n  var CLASS_NAME  = \"wysiwyg-text-align-right\",\n      REG_EXP     = /wysiwyg-text-align-[0-9a-z]+/g;\n\n  wysihtml5.commands.justifyRight = {\n    exec: function(composer, command) {\n      return wysihtml5.commands.formatBlock.exec(composer, \"formatBlock\", null, CLASS_NAME, REG_EXP);\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatBlock.state(composer, \"formatBlock\", null, CLASS_NAME, REG_EXP);\n    }\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n  var CLASS_NAME  = \"wysiwyg-text-align-justify\",\n      REG_EXP     = /wysiwyg-text-align-[0-9a-z]+/g;\n\n  wysihtml5.commands.justifyFull = {\n    exec: function(composer, command) {\n      return wysihtml5.commands.formatBlock.exec(composer, \"formatBlock\", null, CLASS_NAME, REG_EXP);\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatBlock.state(composer, \"formatBlock\", null, CLASS_NAME, REG_EXP);\n    }\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n  var STYLE_STR  = \"text-align: right;\",\n      REG_EXP = /(\\s|^)text-align\\s*:\\s*[^;\\s]+;?/gi;\n\n  wysihtml5.commands.alignRightStyle = {\n    exec: function(composer, command) {\n      return wysihtml5.commands.formatBlock.exec(composer, \"formatBlock\", null, null, null, STYLE_STR, REG_EXP);\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatBlock.state(composer, \"formatBlock\", null, null, null, STYLE_STR, REG_EXP);\n    }\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n  var STYLE_STR  = \"text-align: left;\",\n      REG_EXP = /(\\s|^)text-align\\s*:\\s*[^;\\s]+;?/gi;\n\n  wysihtml5.commands.alignLeftStyle = {\n    exec: function(composer, command) {\n      return wysihtml5.commands.formatBlock.exec(composer, \"formatBlock\", null, null, null, STYLE_STR, REG_EXP);\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatBlock.state(composer, \"formatBlock\", null, null, null, STYLE_STR, REG_EXP);\n    }\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n  var STYLE_STR  = \"text-align: center;\",\n      REG_EXP = /(\\s|^)text-align\\s*:\\s*[^;\\s]+;?/gi;\n\n  wysihtml5.commands.alignCenterStyle = {\n    exec: function(composer, command) {\n      return wysihtml5.commands.formatBlock.exec(composer, \"formatBlock\", null, null, null, STYLE_STR, REG_EXP);\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatBlock.state(composer, \"formatBlock\", null, null, null, STYLE_STR, REG_EXP);\n    }\n  };\n})(wysihtml5);\n;wysihtml5.commands.redo = {\n  exec: function(composer) {\n    return composer.undoManager.redo();\n  },\n\n  state: function(composer) {\n    return false;\n  }\n};\n;wysihtml5.commands.underline = {\n  exec: function(composer, command) {\n    wysihtml5.commands.formatInline.execWithToggle(composer, command, \"u\");\n  },\n\n  state: function(composer, command) {\n    return wysihtml5.commands.formatInline.state(composer, command, \"u\");\n  }\n};\n;wysihtml5.commands.undo = {\n  exec: function(composer) {\n    return composer.undoManager.undo();\n  },\n\n  state: function(composer) {\n    return false;\n  }\n};\n;wysihtml5.commands.createTable = {\n  exec: function(composer, command, value) {\n      var col, row, html;\n      if (value && value.cols && value.rows && parseInt(value.cols, 10) > 0 && parseInt(value.rows, 10) > 0) {\n          if (value.tableStyle) {\n            html = \"<table style=\\\"\" + value.tableStyle + \"\\\">\";\n          } else {\n            html = \"<table>\";\n          }\n          html += \"<tbody>\";\n          for (row = 0; row < value.rows; row ++) {\n              html += '<tr>';\n              for (col = 0; col < value.cols; col ++) {\n                  html += \"<td>&nbsp;</td>\";\n              }\n              html += '</tr>';\n          }\n          html += \"</tbody></table>\";\n          composer.commands.exec(\"insertHTML\", html);\n          //composer.selection.insertHTML(html);\n      }\n\n\n  },\n\n  state: function(composer, command) {\n      return false;\n  }\n};\n;wysihtml5.commands.mergeTableCells = {\n  exec: function(composer, command) {\n      if (composer.tableSelection && composer.tableSelection.start && composer.tableSelection.end) {\n          if (this.state(composer, command)) {\n              wysihtml5.dom.table.unmergeCell(composer.tableSelection.start);\n          } else {\n              wysihtml5.dom.table.mergeCellsBetween(composer.tableSelection.start, composer.tableSelection.end);\n          }\n      }\n  },\n\n  state: function(composer, command) {\n      if (composer.tableSelection) {\n          var start = composer.tableSelection.start,\n              end = composer.tableSelection.end;\n          if (start && end && start == end &&\n              ((\n                  wysihtml5.dom.getAttribute(start, \"colspan\") &&\n                  parseInt(wysihtml5.dom.getAttribute(start, \"colspan\"), 10) > 1\n              ) || (\n                  wysihtml5.dom.getAttribute(start, \"rowspan\") &&\n                  parseInt(wysihtml5.dom.getAttribute(start, \"rowspan\"), 10) > 1\n              ))\n          ) {\n              return [start];\n          }\n      }\n      return false;\n  }\n};\n;wysihtml5.commands.addTableCells = {\n  exec: function(composer, command, value) {\n      if (composer.tableSelection && composer.tableSelection.start && composer.tableSelection.end) {\n\n          // switches start and end if start is bigger than end (reverse selection)\n          var tableSelect = wysihtml5.dom.table.orderSelectionEnds(composer.tableSelection.start, composer.tableSelection.end);\n          if (value == \"before\" || value == \"above\") {\n              wysihtml5.dom.table.addCells(tableSelect.start, value);\n          } else if (value == \"after\" || value == \"below\") {\n              wysihtml5.dom.table.addCells(tableSelect.end, value);\n          }\n          setTimeout(function() {\n              composer.tableSelection.select(tableSelect.start, tableSelect.end);\n          },0);\n      }\n  },\n\n  state: function(composer, command) {\n      return false;\n  }\n};\n;wysihtml5.commands.deleteTableCells = {\n  exec: function(composer, command, value) {\n      if (composer.tableSelection && composer.tableSelection.start && composer.tableSelection.end) {\n          var tableSelect = wysihtml5.dom.table.orderSelectionEnds(composer.tableSelection.start, composer.tableSelection.end),\n              idx = wysihtml5.dom.table.indexOf(tableSelect.start),\n              selCell,\n              table = composer.tableSelection.table;\n\n          wysihtml5.dom.table.removeCells(tableSelect.start, value);\n          setTimeout(function() {\n              // move selection to next or previous if not present\n              selCell = wysihtml5.dom.table.findCell(table, idx);\n\n              if (!selCell){\n                  if (value == \"row\") {\n                      selCell = wysihtml5.dom.table.findCell(table, {\n                          \"row\": idx.row - 1,\n                          \"col\": idx.col\n                      });\n                  }\n\n                  if (value == \"column\") {\n                      selCell = wysihtml5.dom.table.findCell(table, {\n                          \"row\": idx.row,\n                          \"col\": idx.col - 1\n                      });\n                  }\n              }\n              if (selCell) {\n                  composer.tableSelection.select(selCell, selCell);\n              }\n          }, 0);\n\n      }\n  },\n\n  state: function(composer, command) {\n      return false;\n  }\n};\n;wysihtml5.commands.indentList = {\n  exec: function(composer, command, value) {\n    var listEls = composer.selection.getSelectionParentsByTag('LI');\n    if (listEls) {\n      return this.tryToPushLiLevel(listEls, composer.selection);\n    }\n    return false;\n  },\n\n  state: function(composer, command) {\n      return false;\n  },\n\n  tryToPushLiLevel: function(liNodes, selection) {\n    var listTag, list, prevLi, liNode, prevLiList,\n        found = false;\n\n    selection.executeAndRestoreRangy(function() {\n\n      for (var i = liNodes.length; i--;) {\n        liNode = liNodes[i];\n        listTag = (liNode.parentNode.nodeName === 'OL') ? 'OL' : 'UL';\n        list = liNode.ownerDocument.createElement(listTag);\n        prevLi = wysihtml5.dom.domNode(liNode).prev({nodeTypes: [wysihtml5.ELEMENT_NODE]});\n        prevLiList = (prevLi) ? prevLi.querySelector('ul, ol') : null;\n\n        if (prevLi) {\n          if (prevLiList) {\n            prevLiList.appendChild(liNode);\n          } else {\n            list.appendChild(liNode);\n            prevLi.appendChild(list);\n          }\n          found = true;\n        }\n      }\n\n    });\n    return found;\n  }\n};\n;wysihtml5.commands.outdentList = {\n  exec: function(composer, command, value) {\n    var listEls = composer.selection.getSelectionParentsByTag('LI');\n    if (listEls) {\n      return this.tryToPullLiLevel(listEls, composer);\n    }\n    return false;\n  },\n\n  state: function(composer, command) {\n      return false;\n  },\n\n  tryToPullLiLevel: function(liNodes, composer) {\n    var listNode, outerListNode, outerLiNode, list, prevLi, liNode, afterList,\n        found = false,\n        that = this;\n\n    composer.selection.executeAndRestoreRangy(function() {\n\n      for (var i = liNodes.length; i--;) {\n        liNode = liNodes[i];\n        if (liNode.parentNode) {\n          listNode = liNode.parentNode;\n\n          if (listNode.tagName === 'OL' || listNode.tagName === 'UL') {\n            found = true;\n\n            outerListNode = wysihtml5.dom.getParentElement(listNode.parentNode, { nodeName: ['OL', 'UL']}, false, composer.element);\n            outerLiNode = wysihtml5.dom.getParentElement(listNode.parentNode, { nodeName: ['LI']}, false, composer.element);\n\n            if (outerListNode && outerLiNode) {\n\n              if (liNode.nextSibling) {\n                afterList = that.getAfterList(listNode, liNode);\n                liNode.appendChild(afterList);\n              }\n              outerListNode.insertBefore(liNode, outerLiNode.nextSibling);\n\n            } else {\n\n              if (liNode.nextSibling) {\n                afterList = that.getAfterList(listNode, liNode);\n                liNode.appendChild(afterList);\n              }\n\n              for (var j = liNode.childNodes.length; j--;) {\n                listNode.parentNode.insertBefore(liNode.childNodes[j], listNode.nextSibling);\n              }\n\n              listNode.parentNode.insertBefore(document.createElement('br'), listNode.nextSibling);\n              liNode.parentNode.removeChild(liNode);\n\n            }\n\n            // cleanup\n            if (listNode.childNodes.length === 0) {\n                listNode.parentNode.removeChild(listNode);\n            }\n          }\n        }\n      }\n\n    });\n    return found;\n  },\n\n  getAfterList: function(listNode, liNode) {\n    var nodeName = listNode.nodeName,\n        newList = document.createElement(nodeName);\n\n    while (liNode.nextSibling) {\n      newList.appendChild(liNode.nextSibling);\n    }\n    return newList;\n  }\n\n};;/**\n * Undo Manager for wysihtml5\n * slightly inspired by http://rniwa.com/editing/undomanager.html#the-undomanager-interface\n */\n(function(wysihtml5) {\n  var Z_KEY               = 90,\n      Y_KEY               = 89,\n      BACKSPACE_KEY       = 8,\n      DELETE_KEY          = 46,\n      MAX_HISTORY_ENTRIES = 25,\n      DATA_ATTR_NODE      = \"data-wysihtml5-selection-node\",\n      DATA_ATTR_OFFSET    = \"data-wysihtml5-selection-offset\",\n      UNDO_HTML           = '<span id=\"_wysihtml5-undo\" class=\"_wysihtml5-temp\">' + wysihtml5.INVISIBLE_SPACE + '</span>',\n      REDO_HTML           = '<span id=\"_wysihtml5-redo\" class=\"_wysihtml5-temp\">' + wysihtml5.INVISIBLE_SPACE + '</span>',\n      dom                 = wysihtml5.dom;\n\n  function cleanTempElements(doc) {\n    var tempElement;\n    while (tempElement = doc.querySelector(\"._wysihtml5-temp\")) {\n      tempElement.parentNode.removeChild(tempElement);\n    }\n  }\n\n  wysihtml5.UndoManager = wysihtml5.lang.Dispatcher.extend(\n    /** @scope wysihtml5.UndoManager.prototype */ {\n    constructor: function(editor) {\n      this.editor = editor;\n      this.composer = editor.composer;\n      this.element = this.composer.element;\n\n      this.position = 0;\n      this.historyStr = [];\n      this.historyDom = [];\n\n      this.transact();\n\n      this._observe();\n    },\n\n    _observe: function() {\n      var that      = this,\n          doc       = this.composer.sandbox.getDocument(),\n          lastKey;\n\n      // Catch CTRL+Z and CTRL+Y\n      dom.observe(this.element, \"keydown\", function(event) {\n        if (event.altKey || (!event.ctrlKey && !event.metaKey)) {\n          return;\n        }\n\n        var keyCode = event.keyCode,\n            isUndo = keyCode === Z_KEY && !event.shiftKey,\n            isRedo = (keyCode === Z_KEY && event.shiftKey) || (keyCode === Y_KEY);\n\n        if (isUndo) {\n          that.undo();\n          event.preventDefault();\n        } else if (isRedo) {\n          that.redo();\n          event.preventDefault();\n        }\n      });\n\n      // Catch delete and backspace\n      dom.observe(this.element, \"keydown\", function(event) {\n        var keyCode = event.keyCode;\n        if (keyCode === lastKey) {\n          return;\n        }\n\n        lastKey = keyCode;\n\n        if (keyCode === BACKSPACE_KEY || keyCode === DELETE_KEY) {\n          that.transact();\n        }\n      });\n\n      this.editor\n        .on(\"newword:composer\", function() {\n          that.transact();\n        })\n\n        .on(\"beforecommand:composer\", function() {\n          that.transact();\n        });\n    },\n\n    transact: function() {\n      var previousHtml      = this.historyStr[this.position - 1],\n          currentHtml       = this.composer.getValue(false, false),\n          composerIsVisible   = this.element.offsetWidth > 0 && this.element.offsetHeight > 0,\n          range, node, offset, element, position;\n\n      if (currentHtml === previousHtml) {\n        return;\n      }\n\n      var length = this.historyStr.length = this.historyDom.length = this.position;\n      if (length > MAX_HISTORY_ENTRIES) {\n        this.historyStr.shift();\n        this.historyDom.shift();\n        this.position--;\n      }\n\n      this.position++;\n\n      if (composerIsVisible) {\n        // Do not start saving selection if composer is not visible\n        range   = this.composer.selection.getRange();\n        node    = (range && range.startContainer) ? range.startContainer : this.element;\n        offset  = (range && range.startOffset) ? range.startOffset : 0;\n\n        if (node.nodeType === wysihtml5.ELEMENT_NODE) {\n          element = node;\n        } else {\n          element  = node.parentNode;\n          position = this.getChildNodeIndex(element, node);\n        }\n\n        element.setAttribute(DATA_ATTR_OFFSET, offset);\n        if (typeof(position) !== \"undefined\") {\n          element.setAttribute(DATA_ATTR_NODE, position);\n        }\n      }\n\n      var clone = this.element.cloneNode(!!currentHtml);\n      this.historyDom.push(clone);\n      this.historyStr.push(currentHtml);\n\n      if (element) {\n        element.removeAttribute(DATA_ATTR_OFFSET);\n        element.removeAttribute(DATA_ATTR_NODE);\n      }\n\n    },\n\n    undo: function() {\n      this.transact();\n\n      if (!this.undoPossible()) {\n        return;\n      }\n\n      this.set(this.historyDom[--this.position - 1]);\n      this.editor.fire(\"undo:composer\");\n    },\n\n    redo: function() {\n      if (!this.redoPossible()) {\n        return;\n      }\n\n      this.set(this.historyDom[++this.position - 1]);\n      this.editor.fire(\"redo:composer\");\n    },\n\n    undoPossible: function() {\n      return this.position > 1;\n    },\n\n    redoPossible: function() {\n      return this.position < this.historyStr.length;\n    },\n\n    set: function(historyEntry) {\n      this.element.innerHTML = \"\";\n\n      var i = 0,\n          childNodes = historyEntry.childNodes,\n          length = historyEntry.childNodes.length;\n\n      for (; i<length; i++) {\n        this.element.appendChild(childNodes[i].cloneNode(true));\n      }\n\n      // Restore selection\n      var offset,\n          node,\n          position;\n\n      if (historyEntry.hasAttribute(DATA_ATTR_OFFSET)) {\n        offset    = historyEntry.getAttribute(DATA_ATTR_OFFSET);\n        position  = historyEntry.getAttribute(DATA_ATTR_NODE);\n        node      = this.element;\n      } else {\n        node      = this.element.querySelector(\"[\" + DATA_ATTR_OFFSET + \"]\") || this.element;\n        offset    = node.getAttribute(DATA_ATTR_OFFSET);\n        position  = node.getAttribute(DATA_ATTR_NODE);\n        node.removeAttribute(DATA_ATTR_OFFSET);\n        node.removeAttribute(DATA_ATTR_NODE);\n      }\n\n      if (position !== null) {\n        node = this.getChildNodeByIndex(node, +position);\n      }\n\n      this.composer.selection.set(node, offset);\n    },\n\n    getChildNodeIndex: function(parent, child) {\n      var i           = 0,\n          childNodes  = parent.childNodes,\n          length      = childNodes.length;\n      for (; i<length; i++) {\n        if (childNodes[i] === child) {\n          return i;\n        }\n      }\n    },\n\n    getChildNodeByIndex: function(parent, index) {\n      return parent.childNodes[index];\n    }\n  });\n})(wysihtml5);\n;/**\n * TODO: the following methods still need unit test coverage\n */\nwysihtml5.views.View = Base.extend(\n  /** @scope wysihtml5.views.View.prototype */ {\n  constructor: function(parent, textareaElement, config) {\n    this.parent   = parent;\n    this.element  = textareaElement;\n    this.config   = config;\n    if (!this.config.noTextarea) {\n        this._observeViewChange();\n    }\n  },\n\n  _observeViewChange: function() {\n    var that = this;\n    this.parent.on(\"beforeload\", function() {\n      that.parent.on(\"change_view\", function(view) {\n        if (view === that.name) {\n          that.parent.currentView = that;\n          that.show();\n          // Using tiny delay here to make sure that the placeholder is set before focusing\n          setTimeout(function() { that.focus(); }, 0);\n        } else {\n          that.hide();\n        }\n      });\n    });\n  },\n\n  focus: function() {\n    if (this.element.ownerDocument.querySelector(\":focus\") === this.element) {\n      return;\n    }\n\n    try { this.element.focus(); } catch(e) {}\n  },\n\n  hide: function() {\n    this.element.style.display = \"none\";\n  },\n\n  show: function() {\n    this.element.style.display = \"\";\n  },\n\n  disable: function() {\n    this.element.setAttribute(\"disabled\", \"disabled\");\n  },\n\n  enable: function() {\n    this.element.removeAttribute(\"disabled\");\n  }\n});\n;(function(wysihtml5) {\n  var dom       = wysihtml5.dom,\n      browser   = wysihtml5.browser;\n\n  wysihtml5.views.Composer = wysihtml5.views.View.extend(\n    /** @scope wysihtml5.views.Composer.prototype */ {\n    name: \"composer\",\n\n    // Needed for firefox in order to display a proper caret in an empty contentEditable\n    CARET_HACK: \"<br>\",\n\n    constructor: function(parent, editableElement, config) {\n      this.base(parent, editableElement, config);\n      if (!this.config.noTextarea) {\n          this.textarea = this.parent.textarea;\n      } else {\n          this.editableArea = editableElement;\n      }\n      if (this.config.contentEditableMode) {\n          this._initContentEditableArea();\n      } else {\n          this._initSandbox();\n      }\n    },\n\n    clear: function() {\n      this.element.innerHTML = browser.displaysCaretInEmptyContentEditableCorrectly() ? \"\" : this.CARET_HACK;\n    },\n\n    getValue: function(parse, clearInternals) {\n      var value = this.isEmpty() ? \"\" : wysihtml5.quirks.getCorrectInnerHTML(this.element);\n      if (parse !== false) {\n        value = this.parent.parse(value, (clearInternals === false) ? false : true);\n      }\n\n      return value;\n    },\n\n    setValue: function(html, parse) {\n      if (parse) {\n        html = this.parent.parse(html);\n      }\n\n      try {\n        this.element.innerHTML = html;\n      } catch (e) {\n        this.element.innerText = html;\n      }\n    },\n\n    cleanUp: function() {\n        this.parent.parse(this.element);\n    },\n\n    show: function() {\n      this.editableArea.style.display = this._displayStyle || \"\";\n\n      if (!this.config.noTextarea && !this.textarea.element.disabled) {\n        // Firefox needs this, otherwise contentEditable becomes uneditable\n        this.disable();\n        this.enable();\n      }\n    },\n\n    hide: function() {\n      this._displayStyle = dom.getStyle(\"display\").from(this.editableArea);\n      if (this._displayStyle === \"none\") {\n        this._displayStyle = null;\n      }\n      this.editableArea.style.display = \"none\";\n    },\n\n    disable: function() {\n      this.parent.fire(\"disable:composer\");\n      this.element.removeAttribute(\"contentEditable\");\n    },\n\n    enable: function() {\n      this.parent.fire(\"enable:composer\");\n      this.element.setAttribute(\"contentEditable\", \"true\");\n    },\n\n    focus: function(setToEnd) {\n      // IE 8 fires the focus event after .focus()\n      // This is needed by our simulate_placeholder.js to work\n      // therefore we clear it ourselves this time\n      if (wysihtml5.browser.doesAsyncFocus() && this.hasPlaceholderSet()) {\n        this.clear();\n      }\n\n      this.base();\n\n      var lastChild = this.element.lastChild;\n      if (setToEnd && lastChild && this.selection) {\n        if (lastChild.nodeName === \"BR\") {\n          this.selection.setBefore(this.element.lastChild);\n        } else {\n          this.selection.setAfter(this.element.lastChild);\n        }\n      }\n    },\n\n    getTextContent: function() {\n      return dom.getTextContent(this.element);\n    },\n\n    hasPlaceholderSet: function() {\n      return this.getTextContent() == ((this.config.noTextarea) ? this.editableArea.getAttribute(\"data-placeholder\") : this.textarea.element.getAttribute(\"placeholder\")) && this.placeholderSet;\n    },\n\n    isEmpty: function() {\n      var innerHTML = this.element.innerHTML.toLowerCase();\n      return (/^(\\s|<br>|<\\/br>|<p>|<\\/p>)*$/i).test(innerHTML)  ||\n             innerHTML === \"\"            ||\n             innerHTML === \"<br>\"        ||\n             innerHTML === \"<p></p>\"     ||\n             innerHTML === \"<p><br></p>\" ||\n             this.hasPlaceholderSet();\n    },\n\n    _initContentEditableArea: function() {\n        var that = this;\n\n        if (this.config.noTextarea) {\n            this.sandbox = new dom.ContentEditableArea(function() {\n                that._create();\n            }, {}, this.editableArea);\n        } else {\n            this.sandbox = new dom.ContentEditableArea(function() {\n                that._create();\n            });\n            this.editableArea = this.sandbox.getContentEditable();\n            dom.insert(this.editableArea).after(this.textarea.element);\n            this._createWysiwygFormField();\n        }\n    },\n\n    _initSandbox: function() {\n      var that = this;\n\n      this.sandbox = new dom.Sandbox(function() {\n        that._create();\n      }, {\n        stylesheets:  this.config.stylesheets\n      });\n      this.editableArea  = this.sandbox.getIframe();\n\n      var textareaElement = this.textarea.element;\n      dom.insert(this.editableArea).after(textareaElement);\n\n      this._createWysiwygFormField();\n    },\n\n    // Creates hidden field which tells the server after submit, that the user used an wysiwyg editor\n    _createWysiwygFormField: function() {\n        if (this.textarea.element.form) {\n          var hiddenField = document.createElement(\"input\");\n          hiddenField.type   = \"hidden\";\n          hiddenField.name   = \"_wysihtml5_mode\";\n          hiddenField.value  = 1;\n          dom.insert(hiddenField).after(this.textarea.element);\n        }\n    },\n\n    _create: function() {\n      var that = this;\n      this.doc                = this.sandbox.getDocument();\n      this.element            = (this.config.contentEditableMode) ? this.sandbox.getContentEditable() : this.doc.body;\n      if (!this.config.noTextarea) {\n          this.textarea           = this.parent.textarea;\n          this.element.innerHTML  = this.textarea.getValue(true, false);\n      } else {\n          this.cleanUp(); // cleans contenteditable on initiation as it may contain html\n      }\n\n      // Make sure our selection handler is ready\n      this.selection = new wysihtml5.Selection(this.parent, this.element, this.config.uneditableContainerClassname);\n\n      // Make sure commands dispatcher is ready\n      this.commands  = new wysihtml5.Commands(this.parent);\n\n      if (!this.config.noTextarea) {\n          dom.copyAttributes([\n              \"className\", \"spellcheck\", \"title\", \"lang\", \"dir\", \"accessKey\"\n          ]).from(this.textarea.element).to(this.element);\n      }\n\n      dom.addClass(this.element, this.config.composerClassName);\n      //\n      // Make the editor look like the original textarea, by syncing styles\n      if (this.config.style && !this.config.contentEditableMode) {\n        this.style();\n      }\n\n      this.observe();\n\n      var name = this.config.name;\n      if (name) {\n        dom.addClass(this.element, name);\n        if (!this.config.contentEditableMode) { dom.addClass(this.editableArea, name); }\n      }\n\n      this.enable();\n\n      if (!this.config.noTextarea && this.textarea.element.disabled) {\n        this.disable();\n      }\n\n      // Simulate html5 placeholder attribute on contentEditable element\n      var placeholderText = typeof(this.config.placeholder) === \"string\"\n        ? this.config.placeholder\n        : ((this.config.noTextarea) ? this.editableArea.getAttribute(\"data-placeholder\") : this.textarea.element.getAttribute(\"placeholder\"));\n      if (placeholderText) {\n        dom.simulatePlaceholder(this.parent, this, placeholderText);\n      }\n\n      // Make sure that the browser avoids using inline styles whenever possible\n      this.commands.exec(\"styleWithCSS\", false);\n\n      this._initAutoLinking();\n      this._initObjectResizing();\n      this._initUndoManager();\n      this._initLineBreaking();\n\n      // Simulate html5 autofocus on contentEditable element\n      // This doesn't work on IOS (5.1.1)\n      if (!this.config.noTextarea && (this.textarea.element.hasAttribute(\"autofocus\") || document.querySelector(\":focus\") == this.textarea.element) && !browser.isIos()) {\n        setTimeout(function() { that.focus(true); }, 100);\n      }\n\n      // IE sometimes leaves a single paragraph, which can't be removed by the user\n      if (!browser.clearsContentEditableCorrectly()) {\n        wysihtml5.quirks.ensureProperClearing(this);\n      }\n\n      // Set up a sync that makes sure that textarea and editor have the same content\n      if (this.initSync && this.config.sync) {\n        this.initSync();\n      }\n\n      // Okay hide the textarea, we are ready to go\n      if (!this.config.noTextarea) { this.textarea.hide(); }\n\n      // Fire global (before-)load event\n      this.parent.fire(\"beforeload\").fire(\"load\");\n    },\n\n    _initAutoLinking: function() {\n      var that                           = this,\n          supportsDisablingOfAutoLinking = browser.canDisableAutoLinking(),\n          supportsAutoLinking            = browser.doesAutoLinkingInContentEditable();\n      if (supportsDisablingOfAutoLinking) {\n        this.commands.exec(\"autoUrlDetect\", false);\n      }\n\n      if (!this.config.autoLink) {\n        return;\n      }\n\n      // Only do the auto linking by ourselves when the browser doesn't support auto linking\n      // OR when he supports auto linking but we were able to turn it off (IE9+)\n      if (!supportsAutoLinking || (supportsAutoLinking && supportsDisablingOfAutoLinking)) {\n        this.parent.on(\"newword:composer\", function() {\n          if (dom.getTextContent(that.element).match(dom.autoLink.URL_REG_EXP)) {\n            that.selection.executeAndRestore(function(startContainer, endContainer) {\n              var uneditables = that.element.querySelectorAll(\".\" + that.config.uneditableContainerClassname),\n                  isInUneditable = false;\n\n              for (var i = uneditables.length; i--;) {\n                if (wysihtml5.dom.contains(uneditables[i], endContainer)) {\n                  isInUneditable = true;\n                }\n              }\n\n              if (!isInUneditable) dom.autoLink(endContainer.parentNode, [that.config.uneditableContainerClassname]);\n            });\n          }\n        });\n\n        dom.observe(this.element, \"blur\", function() {\n          dom.autoLink(that.element, [that.config.uneditableContainerClassname]);\n        });\n      }\n\n      // Assuming we have the following:\n      //  <a href=\"http://www.google.de\">http://www.google.de</a>\n      // If a user now changes the url in the innerHTML we want to make sure that\n      // it's synchronized with the href attribute (as long as the innerHTML is still a url)\n      var // Use a live NodeList to check whether there are any links in the document\n          links           = this.sandbox.getDocument().getElementsByTagName(\"a\"),\n          // The autoLink helper method reveals a reg exp to detect correct urls\n          urlRegExp       = dom.autoLink.URL_REG_EXP,\n          getTextContent  = function(element) {\n            var textContent = wysihtml5.lang.string(dom.getTextContent(element)).trim();\n            if (textContent.substr(0, 4) === \"www.\") {\n              textContent = \"http://\" + textContent;\n            }\n            return textContent;\n          };\n\n      dom.observe(this.element, \"keydown\", function(event) {\n        if (!links.length) {\n          return;\n        }\n\n        var selectedNode = that.selection.getSelectedNode(event.target.ownerDocument),\n            link         = dom.getParentElement(selectedNode, { nodeName: \"A\" }, 4),\n            textContent;\n\n        if (!link) {\n          return;\n        }\n\n        textContent = getTextContent(link);\n        // keydown is fired before the actual content is changed\n        // therefore we set a timeout to change the href\n        setTimeout(function() {\n          var newTextContent = getTextContent(link);\n          if (newTextContent === textContent) {\n            return;\n          }\n\n          // Only set href when new href looks like a valid url\n          if (newTextContent.match(urlRegExp)) {\n            link.setAttribute(\"href\", newTextContent);\n          }\n        }, 0);\n      });\n    },\n\n    _initObjectResizing: function() {\n      this.commands.exec(\"enableObjectResizing\", true);\n\n      // IE sets inline styles after resizing objects\n      // The following lines make sure that the width/height css properties\n      // are copied over to the width/height attributes\n      if (browser.supportsEvent(\"resizeend\")) {\n        var properties        = [\"width\", \"height\"],\n            propertiesLength  = properties.length,\n            element           = this.element;\n\n        dom.observe(element, \"resizeend\", function(event) {\n          var target = event.target || event.srcElement,\n              style  = target.style,\n              i      = 0,\n              property;\n\n          if (target.nodeName !== \"IMG\") {\n            return;\n          }\n\n          for (; i<propertiesLength; i++) {\n            property = properties[i];\n            if (style[property]) {\n              target.setAttribute(property, parseInt(style[property], 10));\n              style[property] = \"\";\n            }\n          }\n\n          // After resizing IE sometimes forgets to remove the old resize handles\n          wysihtml5.quirks.redraw(element);\n        });\n      }\n    },\n\n    _initUndoManager: function() {\n      this.undoManager = new wysihtml5.UndoManager(this.parent);\n    },\n\n    _initLineBreaking: function() {\n      var that                              = this,\n          USE_NATIVE_LINE_BREAK_INSIDE_TAGS = [\"LI\", \"P\", \"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\"],\n          LIST_TAGS                         = [\"UL\", \"OL\", \"MENU\"];\n\n      function adjust(selectedNode) {\n        var parentElement = dom.getParentElement(selectedNode, { nodeName: [\"P\", \"DIV\"] }, 2);\n        if (parentElement && dom.contains(that.element, parentElement)) {\n          that.selection.executeAndRestore(function() {\n            if (that.config.useLineBreaks) {\n              dom.replaceWithChildNodes(parentElement);\n            } else if (parentElement.nodeName !== \"P\") {\n              dom.renameElement(parentElement, \"p\");\n            }\n          });\n        }\n      }\n\n      if (!this.config.useLineBreaks) {\n        dom.observe(this.element, [\"focus\", \"keydown\"], function() {\n          if (that.isEmpty()) {\n            var paragraph = that.doc.createElement(\"P\");\n            that.element.innerHTML = \"\";\n            that.element.appendChild(paragraph);\n            if (!browser.displaysCaretInEmptyContentEditableCorrectly()) {\n              paragraph.innerHTML = \"<br>\";\n              that.selection.setBefore(paragraph.firstChild);\n            } else {\n              that.selection.selectNode(paragraph, true);\n            }\n          }\n        });\n      }\n\n      // Under certain circumstances Chrome + Safari create nested <p> or <hX> tags after paste\n      // Inserting an invisible white space in front of it fixes the issue\n      // This is too hacky and causes selection not to replace content on paste in chrome\n     /* if (browser.createsNestedInvalidMarkupAfterPaste()) {\n        dom.observe(this.element, \"paste\", function(event) {\n          var invisibleSpace = that.doc.createTextNode(wysihtml5.INVISIBLE_SPACE);\n          that.selection.insertNode(invisibleSpace);\n        });\n      }*/\n\n\n      dom.observe(this.element, \"keydown\", function(event) {\n        var keyCode = event.keyCode;\n\n        if (event.shiftKey) {\n          return;\n        }\n\n        if (keyCode !== wysihtml5.ENTER_KEY && keyCode !== wysihtml5.BACKSPACE_KEY) {\n          return;\n        }\n        var blockElement = dom.getParentElement(that.selection.getSelectedNode(), { nodeName: USE_NATIVE_LINE_BREAK_INSIDE_TAGS }, 4);\n        if (blockElement) {\n          setTimeout(function() {\n            // Unwrap paragraph after leaving a list or a H1-6\n            var selectedNode = that.selection.getSelectedNode(),\n                list;\n\n            if (blockElement.nodeName === \"LI\") {\n              if (!selectedNode) {\n                return;\n              }\n\n              list = dom.getParentElement(selectedNode, { nodeName: LIST_TAGS }, 2);\n\n              if (!list) {\n                adjust(selectedNode);\n              }\n            }\n\n            if (keyCode === wysihtml5.ENTER_KEY && blockElement.nodeName.match(/^H[1-6]$/)) {\n              adjust(selectedNode);\n            }\n          }, 0);\n          return;\n        }\n\n        if (that.config.useLineBreaks && keyCode === wysihtml5.ENTER_KEY && !wysihtml5.browser.insertsLineBreaksOnReturn()) {\n          event.preventDefault();\n          that.commands.exec(\"insertLineBreak\");\n\n        }\n      });\n    }\n  });\n})(wysihtml5);\n;(function(wysihtml5) {\n  var dom             = wysihtml5.dom,\n      doc             = document,\n      win             = window,\n      HOST_TEMPLATE   = doc.createElement(\"div\"),\n      /**\n       * Styles to copy from textarea to the composer element\n       */\n      TEXT_FORMATTING = [\n        \"background-color\",\n        \"color\", \"cursor\",\n        \"font-family\", \"font-size\", \"font-style\", \"font-variant\", \"font-weight\",\n        \"line-height\", \"letter-spacing\",\n        \"text-align\", \"text-decoration\", \"text-indent\", \"text-rendering\",\n        \"word-break\", \"word-wrap\", \"word-spacing\"\n      ],\n      /**\n       * Styles to copy from textarea to the iframe\n       */\n      BOX_FORMATTING = [\n        \"background-color\",\n        \"border-collapse\",\n        \"border-bottom-color\", \"border-bottom-style\", \"border-bottom-width\",\n        \"border-left-color\", \"border-left-style\", \"border-left-width\",\n        \"border-right-color\", \"border-right-style\", \"border-right-width\",\n        \"border-top-color\", \"border-top-style\", \"border-top-width\",\n        \"clear\", \"display\", \"float\",\n        \"margin-bottom\", \"margin-left\", \"margin-right\", \"margin-top\",\n        \"outline-color\", \"outline-offset\", \"outline-width\", \"outline-style\",\n        \"padding-left\", \"padding-right\", \"padding-top\", \"padding-bottom\",\n        \"position\", \"top\", \"left\", \"right\", \"bottom\", \"z-index\",\n        \"vertical-align\", \"text-align\",\n        \"-webkit-box-sizing\", \"-moz-box-sizing\", \"-ms-box-sizing\", \"box-sizing\",\n        \"-webkit-box-shadow\", \"-moz-box-shadow\", \"-ms-box-shadow\",\"box-shadow\",\n        \"-webkit-border-top-right-radius\", \"-moz-border-radius-topright\", \"border-top-right-radius\",\n        \"-webkit-border-bottom-right-radius\", \"-moz-border-radius-bottomright\", \"border-bottom-right-radius\",\n        \"-webkit-border-bottom-left-radius\", \"-moz-border-radius-bottomleft\", \"border-bottom-left-radius\",\n        \"-webkit-border-top-left-radius\", \"-moz-border-radius-topleft\", \"border-top-left-radius\",\n        \"width\", \"height\"\n      ],\n      ADDITIONAL_CSS_RULES = [\n        \"html                 { height: 100%; }\",\n        \"body                 { height: 100%; padding: 1px 0 0 0; margin: -1px 0 0 0; }\",\n        \"body > p:first-child { margin-top: 0; }\",\n        \"._wysihtml5-temp     { display: none; }\",\n        wysihtml5.browser.isGecko ?\n          \"body.placeholder { color: graytext !important; }\" :\n          \"body.placeholder { color: #a9a9a9 !important; }\",\n        // Ensure that user see's broken images and can delete them\n        \"img:-moz-broken      { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }\"\n      ];\n\n  /**\n   * With \"setActive\" IE offers a smart way of focusing elements without scrolling them into view:\n   * http://msdn.microsoft.com/en-us/library/ms536738(v=vs.85).aspx\n   *\n   * Other browsers need a more hacky way: (pssst don't tell my mama)\n   * In order to prevent the element being scrolled into view when focusing it, we simply\n   * move it out of the scrollable area, focus it, and reset it's position\n   */\n  var focusWithoutScrolling = function(element) {\n    if (element.setActive) {\n      // Following line could cause a js error when the textarea is invisible\n      // See https://github.com/xing/wysihtml5/issues/9\n      try { element.setActive(); } catch(e) {}\n    } else {\n      var elementStyle = element.style,\n          originalScrollTop = doc.documentElement.scrollTop || doc.body.scrollTop,\n          originalScrollLeft = doc.documentElement.scrollLeft || doc.body.scrollLeft,\n          originalStyles = {\n            position:         elementStyle.position,\n            top:              elementStyle.top,\n            left:             elementStyle.left,\n            WebkitUserSelect: elementStyle.WebkitUserSelect\n          };\n\n      dom.setStyles({\n        position:         \"absolute\",\n        top:              \"-99999px\",\n        left:             \"-99999px\",\n        // Don't ask why but temporarily setting -webkit-user-select to none makes the whole thing performing smoother\n        WebkitUserSelect: \"none\"\n      }).on(element);\n\n      element.focus();\n\n      dom.setStyles(originalStyles).on(element);\n\n      if (win.scrollTo) {\n        // Some browser extensions unset this method to prevent annoyances\n        // \"Better PopUp Blocker\" for Chrome http://code.google.com/p/betterpopupblocker/source/browse/trunk/blockStart.js#100\n        // Issue: http://code.google.com/p/betterpopupblocker/issues/detail?id=1\n        win.scrollTo(originalScrollLeft, originalScrollTop);\n      }\n    }\n  };\n\n\n  wysihtml5.views.Composer.prototype.style = function() {\n    var that                  = this,\n        originalActiveElement = doc.querySelector(\":focus\"),\n        textareaElement       = this.textarea.element,\n        hasPlaceholder        = textareaElement.hasAttribute(\"placeholder\"),\n        originalPlaceholder   = hasPlaceholder && textareaElement.getAttribute(\"placeholder\"),\n        originalDisplayValue  = textareaElement.style.display,\n        originalDisabled      = textareaElement.disabled,\n        displayValueForCopying;\n\n    this.focusStylesHost      = HOST_TEMPLATE.cloneNode(false);\n    this.blurStylesHost       = HOST_TEMPLATE.cloneNode(false);\n    this.disabledStylesHost   = HOST_TEMPLATE.cloneNode(false);\n\n    // Remove placeholder before copying (as the placeholder has an affect on the computed style)\n    if (hasPlaceholder) {\n      textareaElement.removeAttribute(\"placeholder\");\n    }\n\n    if (textareaElement === originalActiveElement) {\n      textareaElement.blur();\n    }\n\n    // enable for copying styles\n    textareaElement.disabled = false;\n\n    // set textarea to display=\"none\" to get cascaded styles via getComputedStyle\n    textareaElement.style.display = displayValueForCopying = \"none\";\n\n    if ((textareaElement.getAttribute(\"rows\") && dom.getStyle(\"height\").from(textareaElement) === \"auto\") ||\n        (textareaElement.getAttribute(\"cols\") && dom.getStyle(\"width\").from(textareaElement) === \"auto\")) {\n      textareaElement.style.display = displayValueForCopying = originalDisplayValue;\n    }\n\n    // --------- iframe styles (has to be set before editor styles, otherwise IE9 sets wrong fontFamily on blurStylesHost) ---------\n    dom.copyStyles(BOX_FORMATTING).from(textareaElement).to(this.editableArea).andTo(this.blurStylesHost);\n\n    // --------- editor styles ---------\n    dom.copyStyles(TEXT_FORMATTING).from(textareaElement).to(this.element).andTo(this.blurStylesHost);\n\n    // --------- apply standard rules ---------\n    dom.insertCSS(ADDITIONAL_CSS_RULES).into(this.element.ownerDocument);\n\n    // --------- :disabled styles ---------\n    textareaElement.disabled = true;\n    dom.copyStyles(BOX_FORMATTING).from(textareaElement).to(this.disabledStylesHost);\n    dom.copyStyles(TEXT_FORMATTING).from(textareaElement).to(this.disabledStylesHost);\n    textareaElement.disabled = originalDisabled;\n\n    // --------- :focus styles ---------\n    textareaElement.style.display = originalDisplayValue;\n    focusWithoutScrolling(textareaElement);\n    textareaElement.style.display = displayValueForCopying;\n\n    dom.copyStyles(BOX_FORMATTING).from(textareaElement).to(this.focusStylesHost);\n    dom.copyStyles(TEXT_FORMATTING).from(textareaElement).to(this.focusStylesHost);\n\n    // reset textarea\n    textareaElement.style.display = originalDisplayValue;\n\n    dom.copyStyles([\"display\"]).from(textareaElement).to(this.editableArea);\n\n    // Make sure that we don't change the display style of the iframe when copying styles oblur/onfocus\n    // this is needed for when the change_view event is fired where the iframe is hidden and then\n    // the blur event fires and re-displays it\n    var boxFormattingStyles = wysihtml5.lang.array(BOX_FORMATTING).without([\"display\"]);\n\n    // --------- restore focus ---------\n    if (originalActiveElement) {\n      originalActiveElement.focus();\n    } else {\n      textareaElement.blur();\n    }\n\n    // --------- restore placeholder ---------\n    if (hasPlaceholder) {\n      textareaElement.setAttribute(\"placeholder\", originalPlaceholder);\n    }\n\n    // --------- Sync focus/blur styles ---------\n    this.parent.on(\"focus:composer\", function() {\n      dom.copyStyles(boxFormattingStyles) .from(that.focusStylesHost).to(that.editableArea);\n      dom.copyStyles(TEXT_FORMATTING)     .from(that.focusStylesHost).to(that.element);\n    });\n\n    this.parent.on(\"blur:composer\", function() {\n      dom.copyStyles(boxFormattingStyles) .from(that.blurStylesHost).to(that.editableArea);\n      dom.copyStyles(TEXT_FORMATTING)     .from(that.blurStylesHost).to(that.element);\n    });\n\n    this.parent.observe(\"disable:composer\", function() {\n      dom.copyStyles(boxFormattingStyles) .from(that.disabledStylesHost).to(that.editableArea);\n      dom.copyStyles(TEXT_FORMATTING)     .from(that.disabledStylesHost).to(that.element);\n    });\n\n    this.parent.observe(\"enable:composer\", function() {\n      dom.copyStyles(boxFormattingStyles) .from(that.blurStylesHost).to(that.editableArea);\n      dom.copyStyles(TEXT_FORMATTING)     .from(that.blurStylesHost).to(that.element);\n    });\n\n    return this;\n  };\n})(wysihtml5);\n;/**\n * Taking care of events\n *  - Simulating 'change' event on contentEditable element\n *  - Handling drag & drop logic\n *  - Catch paste events\n *  - Dispatch proprietary newword:composer event\n *  - Keyboard shortcuts\n */\n(function(wysihtml5) {\n  var dom       = wysihtml5.dom,\n      browser   = wysihtml5.browser,\n      /**\n       * Map keyCodes to query commands\n       */\n      shortcuts = {\n        \"66\": \"bold\",     // B\n        \"73\": \"italic\",   // I\n        \"85\": \"underline\" // U\n      };\n\n  var deleteAroundEditable = function(selection, uneditable, element) {\n    // merge node with previous node from uneditable\n    var prevNode = selection.getPreviousNode(uneditable, true),\n        curNode = selection.getSelectedNode();\n\n    if (curNode.nodeType !== 1 && curNode.parentNode !== element) { curNode = curNode.parentNode; }\n    if (prevNode) {\n      if (curNode.nodeType == 1) {\n        var first = curNode.firstChild;\n\n        if (prevNode.nodeType == 1) {\n          while (curNode.firstChild) {\n            prevNode.appendChild(curNode.firstChild);\n          }\n        } else {\n          while (curNode.firstChild) {\n            uneditable.parentNode.insertBefore(curNode.firstChild, uneditable);\n          }\n        }\n        if (curNode.parentNode) {\n          curNode.parentNode.removeChild(curNode);\n        }\n        selection.setBefore(first);\n      } else {\n        if (prevNode.nodeType == 1) {\n          prevNode.appendChild(curNode);\n        } else {\n          uneditable.parentNode.insertBefore(curNode, uneditable);\n        }\n        selection.setBefore(curNode);\n      }\n    }\n  };\n\n  var handleDeleteKeyPress = function(event, selection, element, composer) {\n    if (selection.isCollapsed()) {\n      if (selection.caretIsInTheBeginnig('LI')) {\n        event.preventDefault();\n        composer.commands.exec('outdentList');\n      } else if (selection.caretIsInTheBeginnig()) {\n        event.preventDefault();\n      } else {\n\n        if (selection.caretIsFirstInSelection() &&\n            selection.getPreviousNode() &&\n            selection.getPreviousNode().nodeName &&\n            (/^H\\d$/gi).test(selection.getPreviousNode().nodeName)\n        ) {\n          var prevNode = selection.getPreviousNode();\n          event.preventDefault();\n          if ((/^\\s*$/).test(prevNode.textContent || prevNode.innerText)) {\n            // heading is empty\n            prevNode.parentNode.removeChild(prevNode);\n          } else {\n            var range = prevNode.ownerDocument.createRange();\n            range.selectNodeContents(prevNode);\n            range.collapse(false);\n            selection.setSelection(range);\n          }\n        }\n\n        var beforeUneditable = selection.caretIsBeforeUneditable();\n        // Do a special delete if caret would delete uneditable\n        if (beforeUneditable) {\n          event.preventDefault();\n          deleteAroundEditable(selection, beforeUneditable, element);\n        }\n      }\n    } else {\n      if (selection.containsUneditable()) {\n        event.preventDefault();\n        selection.deleteContents();\n      }\n    }\n  };\n\n  var handleTabKeyDown = function(composer, element) {\n    if (!composer.selection.isCollapsed()) {\n      composer.selection.deleteContents();\n    } else if (composer.selection.caretIsInTheBeginnig('LI')) {\n      if (composer.commands.exec('indentList')) return;\n    }\n\n    // Is &emsp; close enough to tab. Could not find enough counter arguments for now.\n    composer.commands.exec(\"insertHTML\", \"&emsp;\");\n  };\n\n  wysihtml5.views.Composer.prototype.observe = function() {\n    var that                = this,\n        state               = this.getValue(false, false),\n        container           = (this.sandbox.getIframe) ? this.sandbox.getIframe() : this.sandbox.getContentEditable(),\n        element             = this.element,\n        focusBlurElement    = (browser.supportsEventsInIframeCorrectly() || this.sandbox.getContentEditable) ? element : this.sandbox.getWindow(),\n        pasteEvents         = [\"drop\", \"paste\", \"beforepaste\"],\n        interactionEvents   = [\"drop\", \"paste\", \"mouseup\", \"focus\", \"keyup\"];\n\n    // --------- destroy:composer event ---------\n    dom.observe(container, \"DOMNodeRemoved\", function() {\n      clearInterval(domNodeRemovedInterval);\n      that.parent.fire(\"destroy:composer\");\n    });\n\n    // DOMNodeRemoved event is not supported in IE 8\n    if (!browser.supportsMutationEvents()) {\n        var domNodeRemovedInterval = setInterval(function() {\n          if (!dom.contains(document.documentElement, container)) {\n            clearInterval(domNodeRemovedInterval);\n            that.parent.fire(\"destroy:composer\");\n          }\n        }, 250);\n    }\n\n    // --------- User interaction tracking --\n\n    dom.observe(focusBlurElement, interactionEvents, function() {\n      setTimeout(function() {\n        that.parent.fire(\"interaction\").fire(\"interaction:composer\");\n      }, 0);\n    });\n\n\n    if (this.config.handleTables) {\n      if(!this.tableClickHandle && this.doc.execCommand && wysihtml5.browser.supportsCommand(this.doc, \"enableObjectResizing\") && wysihtml5.browser.supportsCommand(this.doc, \"enableInlineTableEditing\")) {\n        if (this.sandbox.getIframe) {\n          this.tableClickHandle = dom.observe(container , [\"focus\", \"mouseup\", \"mouseover\"], function() {\n            that.doc.execCommand(\"enableObjectResizing\", false, \"false\");\n            that.doc.execCommand(\"enableInlineTableEditing\", false, \"false\");\n            that.tableClickHandle.stop();\n          });\n        } else {\n          setTimeout(function() {\n            that.doc.execCommand(\"enableObjectResizing\", false, \"false\");\n            that.doc.execCommand(\"enableInlineTableEditing\", false, \"false\");\n          }, 0);\n        }\n      }\n      this.tableSelection = wysihtml5.quirks.tableCellsSelection(element, that.parent);\n    }\n\n    // --------- Focus & blur logic ---------\n    dom.observe(focusBlurElement, \"focus\", function(event) {\n      that.parent.fire(\"focus\", event).fire(\"focus:composer\", event);\n\n      // Delay storing of state until all focus handler are fired\n      // especially the one which resets the placeholder\n      setTimeout(function() { state = that.getValue(false, false); }, 0);\n    });\n\n    dom.observe(focusBlurElement, \"blur\", function(event) {\n      if (state !== that.getValue(false, false)) {\n        //create change event if supported (all except IE8)\n        var changeevent = event;\n        if(typeof Object.create == 'function') {\n          changeevent = Object.create(event, { type: { value: 'change' } });\n        }\n        that.parent.fire(\"change\", changeevent).fire(\"change:composer\", changeevent);\n      }\n      that.parent.fire(\"blur\", event).fire(\"blur:composer\", event);\n    });\n\n    // --------- Drag & Drop logic ---------\n    dom.observe(element, \"dragenter\", function() {\n      that.parent.fire(\"unset_placeholder\");\n    });\n\n    dom.observe(element, pasteEvents, function(event) {\n      that.parent.fire(event.type, event).fire(event.type + \":composer\", event);\n    });\n\n\n    if (this.config.copyedFromMarking) {\n      // If supported the copied source is based directly on selection\n      // Very useful for webkit based browsers where copy will otherwise contain a lot of code and styles based on whatever and not actually in selection.\n      dom.observe(element, \"copy\", function(event) {\n        if (event.clipboardData) {\n          event.clipboardData.setData(\"text/html\", that.config.copyedFromMarking + that.selection.getHtml());\n          event.preventDefault();\n        }\n        that.parent.fire(event.type, event).fire(event.type + \":composer\", event);\n      });\n    }\n\n    // --------- neword event ---------\n    dom.observe(element, \"keyup\", function(event) {\n      var keyCode = event.keyCode;\n      if (keyCode === wysihtml5.SPACE_KEY || keyCode === wysihtml5.ENTER_KEY) {\n        that.parent.fire(\"newword:composer\");\n      }\n    });\n\n    this.parent.on(\"paste:composer\", function() {\n      setTimeout(function() { that.parent.fire(\"newword:composer\"); }, 0);\n    });\n\n    // --------- Make sure that images are selected when clicking on them ---------\n    if (!browser.canSelectImagesInContentEditable()) {\n      dom.observe(element, \"mousedown\", function(event) {\n        var target = event.target;\n        var allImages = element.querySelectorAll('img'),\n            notMyImages = element.querySelectorAll('.' + that.config.uneditableContainerClassname + ' img'),\n            myImages = wysihtml5.lang.array(allImages).without(notMyImages);\n\n        if (target.nodeName === \"IMG\" && wysihtml5.lang.array(myImages).contains(target)) {\n          that.selection.selectNode(target);\n        }\n      });\n    }\n\n    if (!browser.canSelectImagesInContentEditable()) {\n        dom.observe(element, \"drop\", function(event) {\n            // TODO: if I knew how to get dropped elements list from event I could limit it to only IMG element case\n            setTimeout(function() {\n                that.selection.getSelection().removeAllRanges();\n            }, 0);\n        });\n    }\n\n    if (browser.hasHistoryIssue() && browser.supportsSelectionModify()) {\n      dom.observe(element, \"keydown\", function(event) {\n        if (!event.metaKey && !event.ctrlKey) {\n          return;\n        }\n\n        var keyCode   = event.keyCode,\n            win       = element.ownerDocument.defaultView,\n            selection = win.getSelection();\n\n        if (keyCode === 37 || keyCode === 39) {\n          if (keyCode === 37) {\n            selection.modify(\"extend\", \"left\", \"lineboundary\");\n            if (!event.shiftKey) {\n              selection.collapseToStart();\n            }\n          }\n          if (keyCode === 39) {\n            selection.modify(\"extend\", \"right\", \"lineboundary\");\n            if (!event.shiftKey) {\n              selection.collapseToEnd();\n            }\n          }\n          event.preventDefault();\n        }\n      });\n    }\n\n    // --------- Shortcut logic ---------\n    dom.observe(element, \"keydown\", function(event) {\n      var keyCode  = event.keyCode,\n          command  = shortcuts[keyCode];\n      if ((event.ctrlKey || event.metaKey) && !event.altKey && command) {\n        that.commands.exec(command);\n        event.preventDefault();\n      }\n      if (keyCode === 8) {\n        // delete key\n        handleDeleteKeyPress(event, that.selection, element, that);\n      } else if (that.config.handleTabKey && keyCode === 9) {\n        event.preventDefault();\n        handleTabKeyDown(that, element);\n      }\n    });\n\n    // --------- Make sure that when pressing backspace/delete on selected images deletes the image and it's anchor ---------\n    dom.observe(element, \"keydown\", function(event) {\n      var target  = that.selection.getSelectedNode(true),\n          keyCode = event.keyCode,\n          parent;\n      if (target && target.nodeName === \"IMG\" && (keyCode === wysihtml5.BACKSPACE_KEY || keyCode === wysihtml5.DELETE_KEY)) { // 8 => backspace, 46 => delete\n        parent = target.parentNode;\n        // delete the <img>\n        parent.removeChild(target);\n        // and it's parent <a> too if it hasn't got any other child nodes\n        if (parent.nodeName === \"A\" && !parent.firstChild) {\n          parent.parentNode.removeChild(parent);\n        }\n\n        setTimeout(function() { wysihtml5.quirks.redraw(element); }, 0);\n        event.preventDefault();\n      }\n    });\n\n    // --------- IE 8+9 focus the editor when the iframe is clicked (without actually firing the 'focus' event on the <body>) ---------\n    if (!this.config.contentEditableMode && browser.hasIframeFocusIssue()) {\n      dom.observe(container, \"focus\", function() {\n        setTimeout(function() {\n          if (that.doc.querySelector(\":focus\") !== that.element) {\n            that.focus();\n          }\n        }, 0);\n      });\n\n      dom.observe(this.element, \"blur\", function() {\n        setTimeout(function() {\n          that.selection.getSelection().removeAllRanges();\n        }, 0);\n      });\n    }\n\n    // --------- Show url in tooltip when hovering links or images ---------\n    var titlePrefixes = {\n      IMG: \"Image: \",\n      A:   \"Link: \"\n    };\n\n    dom.observe(element, \"mouseover\", function(event) {\n      var target   = event.target,\n          nodeName = target.nodeName,\n          title;\n      if (nodeName !== \"A\" && nodeName !== \"IMG\") {\n        return;\n      }\n      var hasTitle = target.hasAttribute(\"title\");\n      if(!hasTitle){\n        title = titlePrefixes[nodeName] + (target.getAttribute(\"href\") || target.getAttribute(\"src\"));\n        target.setAttribute(\"title\", title);\n      }\n    });\n  };\n})(wysihtml5);\n;/**\n * Class that takes care that the value of the composer and the textarea is always in sync\n */\n(function(wysihtml5) {\n  var INTERVAL = 400;\n\n  wysihtml5.views.Synchronizer = Base.extend(\n    /** @scope wysihtml5.views.Synchronizer.prototype */ {\n\n    constructor: function(editor, textarea, composer) {\n      this.editor   = editor;\n      this.textarea = textarea;\n      this.composer = composer;\n\n      this._observe();\n    },\n\n    /**\n     * Sync html from composer to textarea\n     * Takes care of placeholders\n     * @param {Boolean} shouldParseHtml Whether the html should be sanitized before inserting it into the textarea\n     */\n    fromComposerToTextarea: function(shouldParseHtml) {\n      this.textarea.setValue(wysihtml5.lang.string(this.composer.getValue(false, false)).trim(), shouldParseHtml);\n    },\n\n    /**\n     * Sync value of textarea to composer\n     * Takes care of placeholders\n     * @param {Boolean} shouldParseHtml Whether the html should be sanitized before inserting it into the composer\n     */\n    fromTextareaToComposer: function(shouldParseHtml) {\n      var textareaValue = this.textarea.getValue(false, false);\n      if (textareaValue) {\n        this.composer.setValue(textareaValue, shouldParseHtml);\n      } else {\n        this.composer.clear();\n        this.editor.fire(\"set_placeholder\");\n      }\n    },\n\n    /**\n     * Invoke syncing based on view state\n     * @param {Boolean} shouldParseHtml Whether the html should be sanitized before inserting it into the composer/textarea\n     */\n    sync: function(shouldParseHtml) {\n      if (this.editor.currentView.name === \"textarea\") {\n        this.fromTextareaToComposer(shouldParseHtml);\n      } else {\n        this.fromComposerToTextarea(shouldParseHtml);\n      }\n    },\n\n    /**\n     * Initializes interval-based syncing\n     * also makes sure that on-submit the composer's content is synced with the textarea\n     * immediately when the form gets submitted\n     */\n    _observe: function() {\n      var interval,\n          that          = this,\n          form          = this.textarea.element.form,\n          startInterval = function() {\n            interval = setInterval(function() { that.fromComposerToTextarea(); }, INTERVAL);\n          },\n          stopInterval  = function() {\n            clearInterval(interval);\n            interval = null;\n          };\n\n      startInterval();\n\n      if (form) {\n        // If the textarea is in a form make sure that after onreset and onsubmit the composer\n        // has the correct state\n        wysihtml5.dom.observe(form, \"submit\", function() {\n          that.sync(true);\n        });\n        wysihtml5.dom.observe(form, \"reset\", function() {\n          setTimeout(function() { that.fromTextareaToComposer(); }, 0);\n        });\n      }\n\n      this.editor.on(\"change_view\", function(view) {\n        if (view === \"composer\" && !interval) {\n          that.fromTextareaToComposer(true);\n          startInterval();\n        } else if (view === \"textarea\") {\n          that.fromComposerToTextarea(true);\n          stopInterval();\n        }\n      });\n\n      this.editor.on(\"destroy:composer\", stopInterval);\n    }\n  });\n})(wysihtml5);\n;wysihtml5.views.Textarea = wysihtml5.views.View.extend(\n  /** @scope wysihtml5.views.Textarea.prototype */ {\n  name: \"textarea\",\n\n  constructor: function(parent, textareaElement, config) {\n    this.base(parent, textareaElement, config);\n\n    this._observe();\n  },\n\n  clear: function() {\n    this.element.value = \"\";\n  },\n\n  getValue: function(parse) {\n    var value = this.isEmpty() ? \"\" : this.element.value;\n    if (parse !== false) {\n      value = this.parent.parse(value);\n    }\n    return value;\n  },\n\n  setValue: function(html, parse) {\n    if (parse) {\n      html = this.parent.parse(html);\n    }\n    this.element.value = html;\n  },\n\n  cleanUp: function() {\n      var html = this.parent.parse(this.element.value);\n      this.element.value = html;\n  },\n\n  hasPlaceholderSet: function() {\n    var supportsPlaceholder = wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),\n        placeholderText     = this.element.getAttribute(\"placeholder\") || null,\n        value               = this.element.value,\n        isEmpty             = !value;\n    return (supportsPlaceholder && isEmpty) || (value === placeholderText);\n  },\n\n  isEmpty: function() {\n    return !wysihtml5.lang.string(this.element.value).trim() || this.hasPlaceholderSet();\n  },\n\n  _observe: function() {\n    var element = this.element,\n        parent  = this.parent,\n        eventMapping = {\n          focusin:  \"focus\",\n          focusout: \"blur\"\n        },\n        /**\n         * Calling focus() or blur() on an element doesn't synchronously trigger the attached focus/blur events\n         * This is the case for focusin and focusout, so let's use them whenever possible, kkthxbai\n         */\n        events = wysihtml5.browser.supportsEvent(\"focusin\") ? [\"focusin\", \"focusout\", \"change\"] : [\"focus\", \"blur\", \"change\"];\n\n    parent.on(\"beforeload\", function() {\n      wysihtml5.dom.observe(element, events, function(event) {\n        var eventName = eventMapping[event.type] || event.type;\n        parent.fire(eventName).fire(eventName + \":textarea\");\n      });\n\n      wysihtml5.dom.observe(element, [\"paste\", \"drop\"], function() {\n        setTimeout(function() { parent.fire(\"paste\").fire(\"paste:textarea\"); }, 0);\n      });\n    });\n  }\n});\n;/**\n * WYSIHTML5 Editor\n *\n * @param {Element} editableElement Reference to the textarea which should be turned into a rich text interface\n * @param {Object} [config] See defaultConfig object below for explanation of each individual config option\n *\n * @events\n *    load\n *    beforeload (for internal use only)\n *    focus\n *    focus:composer\n *    focus:textarea\n *    blur\n *    blur:composer\n *    blur:textarea\n *    change\n *    change:composer\n *    change:textarea\n *    paste\n *    paste:composer\n *    paste:textarea\n *    newword:composer\n *    destroy:composer\n *    undo:composer\n *    redo:composer\n *    beforecommand:composer\n *    aftercommand:composer\n *    enable:composer\n *    disable:composer\n *    change_view\n */\n(function(wysihtml5) {\n  var undef;\n\n  var defaultConfig = {\n    // Give the editor a name, the name will also be set as class name on the iframe and on the iframe's body\n    name:                 undef,\n    // Whether the editor should look like the textarea (by adopting styles)\n    style:                true,\n    // Id of the toolbar element, pass falsey value if you don't want any toolbar logic\n    toolbar:              undef,\n    // Whether toolbar is displayed after init by script automatically.\n    // Can be set to false if toolobar is set to display only on editable area focus\n    showToolbarAfterInit: true,\n    // Whether urls, entered by the user should automatically become clickable-links\n    autoLink:             true,\n    // Includes table editing events and cell selection tracking\n    handleTables:         true,\n    // Tab key inserts tab into text as default behaviour. It can be disabled to regain keyboard navigation\n    handleTabKey:         true,\n    // Object which includes parser rules to apply when html gets cleaned\n    // See parser_rules/*.js for examples\n    parserRules:          { tags: { br: {}, span: {}, div: {}, p: {} }, classes: {} },\n    // Object which includes parser when the user inserts content via copy & paste. If null parserRules will be used instead\n    pasteParserRulesets: null,\n    // Parser method to use when the user inserts content\n    parser:               wysihtml5.dom.parse,\n    // Class name which should be set on the contentEditable element in the created sandbox iframe, can be styled via the 'stylesheets' option\n    composerClassName:    \"wysihtml5-editor\",\n    // Class name to add to the body when the wysihtml5 editor is supported\n    bodyClassName:        \"wysihtml5-supported\",\n    // By default wysihtml5 will insert a <br> for line breaks, set this to false to use <p>\n    useLineBreaks:        true,\n    // Array (or single string) of stylesheet urls to be loaded in the editor's iframe\n    stylesheets:          [],\n    // Placeholder text to use, defaults to the placeholder attribute on the textarea element\n    placeholderText:      undef,\n    // Whether the rich text editor should be rendered on touch devices (wysihtml5 >= 0.3.0 comes with basic support for iOS 5)\n    supportTouchDevices:  true,\n    // Whether senseless <span> elements (empty or without attributes) should be removed/replaced with their content\n    cleanUp:              true,\n    // Whether to use div instead of secure iframe\n    contentEditableMode: false,\n    // Classname of container that editor should not touch and pass through\n    // Pass false to disable\n    uneditableContainerClassname: \"wysihtml5-uneditable-container\",\n    // Browsers that support copied source handling will get a marking of the origin of the copied source (for determinig code cleanup rules on paste)\n    // Also copied source is based directly on selection - \n    // (very useful for webkit based browsers where copy will otherwise contain a lot of code and styles based on whatever and not actually in selection).\n    // If falsy value is passed source override is also disabled\n    copyedFromMarking: '<meta name=\"copied-from\" content=\"wysihtml5\">'\n  };\n\n  wysihtml5.Editor = wysihtml5.lang.Dispatcher.extend(\n    /** @scope wysihtml5.Editor.prototype */ {\n    constructor: function(editableElement, config) {\n      this.editableElement  = typeof(editableElement) === \"string\" ? document.getElementById(editableElement) : editableElement;\n      this.config           = wysihtml5.lang.object({}).merge(defaultConfig).merge(config).get();\n      this._isCompatible    = wysihtml5.browser.supported();\n\n      if (this.editableElement.nodeName.toLowerCase() != \"textarea\") {\n          this.config.contentEditableMode = true;\n          this.config.noTextarea = true;\n      }\n      if (!this.config.noTextarea) {\n          this.textarea         = new wysihtml5.views.Textarea(this, this.editableElement, this.config);\n          this.currentView      = this.textarea;\n      }\n\n      // Sort out unsupported/unwanted browsers here\n      if (!this._isCompatible || (!this.config.supportTouchDevices && wysihtml5.browser.isTouchDevice())) {\n        var that = this;\n        setTimeout(function() { that.fire(\"beforeload\").fire(\"load\"); }, 0);\n        return;\n      }\n\n      // Add class name to body, to indicate that the editor is supported\n      wysihtml5.dom.addClass(document.body, this.config.bodyClassName);\n\n      this.composer = new wysihtml5.views.Composer(this, this.editableElement, this.config);\n      this.currentView = this.composer;\n\n      if (typeof(this.config.parser) === \"function\") {\n        this._initParser();\n      }\n\n      this.on(\"beforeload\", this.handleBeforeLoad);\n    },\n\n    handleBeforeLoad: function() {\n        if (!this.config.noTextarea) {\n            this.synchronizer = new wysihtml5.views.Synchronizer(this, this.textarea, this.composer);\n        }\n        if (this.config.toolbar) {\n          this.toolbar = new wysihtml5.toolbar.Toolbar(this, this.config.toolbar, this.config.showToolbarAfterInit);\n        }\n    },\n\n    isCompatible: function() {\n      return this._isCompatible;\n    },\n\n    clear: function() {\n      this.currentView.clear();\n      return this;\n    },\n\n    getValue: function(parse, clearInternals) {\n      return this.currentView.getValue(parse, clearInternals);\n    },\n\n    setValue: function(html, parse) {\n      this.fire(\"unset_placeholder\");\n\n      if (!html) {\n        return this.clear();\n      }\n\n      this.currentView.setValue(html, parse);\n      return this;\n    },\n\n    cleanUp: function() {\n        this.currentView.cleanUp();\n    },\n\n    focus: function(setToEnd) {\n      this.currentView.focus(setToEnd);\n      return this;\n    },\n\n    /**\n     * Deactivate editor (make it readonly)\n     */\n    disable: function() {\n      this.currentView.disable();\n      return this;\n    },\n\n    /**\n     * Activate editor\n     */\n    enable: function() {\n      this.currentView.enable();\n      return this;\n    },\n\n    isEmpty: function() {\n      return this.currentView.isEmpty();\n    },\n\n    hasPlaceholderSet: function() {\n      return this.currentView.hasPlaceholderSet();\n    },\n\n    parse: function(htmlOrElement, clearInternals) {\n      var parseContext = (this.config.contentEditableMode) ? document : ((this.composer) ? this.composer.sandbox.getDocument() : null);\n      var returnValue = this.config.parser(htmlOrElement, {\n        \"rules\": this.config.parserRules,\n        \"cleanUp\": this.config.cleanUp,\n        \"context\": parseContext,\n        \"uneditableClass\": this.config.uneditableContainerClassname,\n        \"clearInternals\" : clearInternals\n      });\n      if (typeof(htmlOrElement) === \"object\") {\n        wysihtml5.quirks.redraw(htmlOrElement);\n      }\n      return returnValue;\n    },\n\n    /**\n     * Prepare html parser logic\n     *  - Observes for paste and drop\n     */\n    _initParser: function() {\n      var that = this,\n          oldHtml,\n          cleanHtml;\n\n      if (wysihtml5.browser.supportsModenPaste()) {\n        this.on(\"paste:composer\", function(event) {\n          event.preventDefault();\n          oldHtml = wysihtml5.dom.getPastedHtml(event);\n          if (oldHtml) {\n            that._cleanAndPaste(oldHtml);\n          }\n        });\n\n      } else {\n        this.on(\"beforepaste:composer\", function(event) {\n          event.preventDefault();\n          wysihtml5.dom.getPastedHtmlWithDiv(that.composer, function(pastedHTML) {\n            if (pastedHTML) {\n              that._cleanAndPaste(pastedHTML);\n            }\n          });\n        });\n\n      }\n    },\n\n    _cleanAndPaste: function (oldHtml) {\n      var cleanHtml = wysihtml5.quirks.cleanPastedHTML(oldHtml, {\n        \"referenceNode\": this.composer.element,\n        \"rules\": this.config.pasteParserRulesets || [{\"set\": this.config.parserRules}],\n        \"uneditableClass\": this.config.uneditableContainerClassname\n      });\n      this.composer.selection.deleteContents();\n      this.composer.selection.insertHTML(cleanHtml);\n    }\n  });\n})(wysihtml5);\n;/**\n * Toolbar Dialog\n *\n * @param {Element} link The toolbar link which causes the dialog to show up\n * @param {Element} container The dialog container\n *\n * @example\n *    <!-- Toolbar link -->\n *    <a data-wysihtml5-command=\"insertImage\">insert an image</a>\n *\n *    <!-- Dialog -->\n *    <div data-wysihtml5-dialog=\"insertImage\" style=\"display: none;\">\n *      <label>\n *        URL: <input data-wysihtml5-dialog-field=\"src\" value=\"http://\">\n *      </label>\n *      <label>\n *        Alternative text: <input data-wysihtml5-dialog-field=\"alt\" value=\"\">\n *      </label>\n *    </div>\n *\n *    <script>\n *      var dialog = new wysihtml5.toolbar.Dialog(\n *        document.querySelector(\"[data-wysihtml5-command='insertImage']\"),\n *        document.querySelector(\"[data-wysihtml5-dialog='insertImage']\")\n *      );\n *      dialog.observe(\"save\", function(attributes) {\n *        // do something\n *      });\n *    </script>\n */\n(function(wysihtml5) {\n  var dom                     = wysihtml5.dom,\n      CLASS_NAME_OPENED       = \"wysihtml5-command-dialog-opened\",\n      SELECTOR_FORM_ELEMENTS  = \"input, select, textarea\",\n      SELECTOR_FIELDS         = \"[data-wysihtml5-dialog-field]\",\n      ATTRIBUTE_FIELDS        = \"data-wysihtml5-dialog-field\";\n\n\n  wysihtml5.toolbar.Dialog = wysihtml5.lang.Dispatcher.extend(\n    /** @scope wysihtml5.toolbar.Dialog.prototype */ {\n    constructor: function(link, container) {\n      this.link       = link;\n      this.container  = container;\n    },\n\n    _observe: function() {\n      if (this._observed) {\n        return;\n      }\n\n      var that = this,\n          callbackWrapper = function(event) {\n            var attributes = that._serialize();\n            if (attributes == that.elementToChange) {\n              that.fire(\"edit\", attributes);\n            } else {\n              that.fire(\"save\", attributes);\n            }\n            that.hide();\n            event.preventDefault();\n            event.stopPropagation();\n          };\n\n      dom.observe(that.link, \"click\", function() {\n        if (dom.hasClass(that.link, CLASS_NAME_OPENED)) {\n          setTimeout(function() { that.hide(); }, 0);\n        }\n      });\n\n      dom.observe(this.container, \"keydown\", function(event) {\n        var keyCode = event.keyCode;\n        if (keyCode === wysihtml5.ENTER_KEY) {\n          callbackWrapper(event);\n        }\n        if (keyCode === wysihtml5.ESCAPE_KEY) {\n          that.fire(\"cancel\");\n          that.hide();\n        }\n      });\n\n      dom.delegate(this.container, \"[data-wysihtml5-dialog-action=save]\", \"click\", callbackWrapper);\n\n      dom.delegate(this.container, \"[data-wysihtml5-dialog-action=cancel]\", \"click\", function(event) {\n        that.fire(\"cancel\");\n        that.hide();\n        event.preventDefault();\n        event.stopPropagation();\n      });\n\n      var formElements  = this.container.querySelectorAll(SELECTOR_FORM_ELEMENTS),\n          i             = 0,\n          length        = formElements.length,\n          _clearInterval = function() { clearInterval(that.interval); };\n      for (; i<length; i++) {\n        dom.observe(formElements[i], \"change\", _clearInterval);\n      }\n\n      this._observed = true;\n    },\n\n    /**\n     * Grabs all fields in the dialog and puts them in key=>value style in an object which\n     * then gets returned\n     */\n    _serialize: function() {\n      var data    = this.elementToChange || {},\n          fields  = this.container.querySelectorAll(SELECTOR_FIELDS),\n          length  = fields.length,\n          i       = 0;\n\n      for (; i<length; i++) {\n        data[fields[i].getAttribute(ATTRIBUTE_FIELDS)] = fields[i].value;\n      }\n      return data;\n    },\n\n    /**\n     * Takes the attributes of the \"elementToChange\"\n     * and inserts them in their corresponding dialog input fields\n     *\n     * Assume the \"elementToChange\" looks like this:\n     *    <a href=\"http://www.google.com\" target=\"_blank\">foo</a>\n     *\n     * and we have the following dialog:\n     *    <input type=\"text\" data-wysihtml5-dialog-field=\"href\" value=\"\">\n     *    <input type=\"text\" data-wysihtml5-dialog-field=\"target\" value=\"\">\n     *\n     * after calling _interpolate() the dialog will look like this\n     *    <input type=\"text\" data-wysihtml5-dialog-field=\"href\" value=\"http://www.google.com\">\n     *    <input type=\"text\" data-wysihtml5-dialog-field=\"target\" value=\"_blank\">\n     *\n     * Basically it adopted the attribute values into the corresponding input fields\n     *\n     */\n    _interpolate: function(avoidHiddenFields) {\n      var field,\n          fieldName,\n          newValue,\n          focusedElement = document.querySelector(\":focus\"),\n          fields         = this.container.querySelectorAll(SELECTOR_FIELDS),\n          length         = fields.length,\n          i              = 0;\n      for (; i<length; i++) {\n        field = fields[i];\n\n        // Never change elements where the user is currently typing in\n        if (field === focusedElement) {\n          continue;\n        }\n\n        // Don't update hidden fields\n        // See https://github.com/xing/wysihtml5/pull/14\n        if (avoidHiddenFields && field.type === \"hidden\") {\n          continue;\n        }\n\n        fieldName = field.getAttribute(ATTRIBUTE_FIELDS);\n        newValue  = (this.elementToChange && typeof(this.elementToChange) !== 'boolean') ? (this.elementToChange.getAttribute(fieldName) || \"\") : field.defaultValue;\n        field.value = newValue;\n      }\n    },\n\n    /**\n     * Show the dialog element\n     */\n    show: function(elementToChange) {\n      if (dom.hasClass(this.link, CLASS_NAME_OPENED)) {\n        return;\n      }\n\n      var that        = this,\n          firstField  = this.container.querySelector(SELECTOR_FORM_ELEMENTS);\n      this.elementToChange = elementToChange;\n      this._observe();\n      this._interpolate();\n      if (elementToChange) {\n        this.interval = setInterval(function() { that._interpolate(true); }, 500);\n      }\n      dom.addClass(this.link, CLASS_NAME_OPENED);\n      this.container.style.display = \"\";\n      this.fire(\"show\");\n      if (firstField && !elementToChange) {\n        try {\n          firstField.focus();\n        } catch(e) {}\n      }\n    },\n\n    /**\n     * Hide the dialog element\n     */\n    hide: function() {\n      clearInterval(this.interval);\n      this.elementToChange = null;\n      dom.removeClass(this.link, CLASS_NAME_OPENED);\n      this.container.style.display = \"none\";\n      this.fire(\"hide\");\n    }\n  });\n})(wysihtml5);\n;/**\n * Converts speech-to-text and inserts this into the editor\n * As of now (2011/03/25) this only is supported in Chrome >= 11\n *\n * Note that it sends the recorded audio to the google speech recognition api:\n * http://stackoverflow.com/questions/4361826/does-chrome-have-buil-in-speech-recognition-for-input-type-text-x-webkit-speec\n *\n * Current HTML5 draft can be found here\n * http://lists.w3.org/Archives/Public/public-xg-htmlspeech/2011Feb/att-0020/api-draft.html\n *\n * \"Accessing Google Speech API Chrome 11\"\n * http://mikepultz.com/2011/03/accessing-google-speech-api-chrome-11/\n */\n(function(wysihtml5) {\n  var dom = wysihtml5.dom;\n\n  var linkStyles = {\n    position: \"relative\"\n  };\n\n  var wrapperStyles = {\n    left:     0,\n    margin:   0,\n    opacity:  0,\n    overflow: \"hidden\",\n    padding:  0,\n    position: \"absolute\",\n    top:      0,\n    zIndex:   1\n  };\n\n  var inputStyles = {\n    cursor:     \"inherit\",\n    fontSize:   \"50px\",\n    height:     \"50px\",\n    marginTop:  \"-25px\",\n    outline:    0,\n    padding:    0,\n    position:   \"absolute\",\n    right:      \"-4px\",\n    top:        \"50%\"\n  };\n\n  var inputAttributes = {\n    \"x-webkit-speech\": \"\",\n    \"speech\":          \"\"\n  };\n\n  wysihtml5.toolbar.Speech = function(parent, link) {\n    var input = document.createElement(\"input\");\n    if (!wysihtml5.browser.supportsSpeechApiOn(input)) {\n      link.style.display = \"none\";\n      return;\n    }\n    var lang = parent.editor.textarea.element.getAttribute(\"lang\");\n    if (lang) {\n      inputAttributes.lang = lang;\n    }\n\n    var wrapper = document.createElement(\"div\");\n\n    wysihtml5.lang.object(wrapperStyles).merge({\n      width:  link.offsetWidth  + \"px\",\n      height: link.offsetHeight + \"px\"\n    });\n\n    dom.insert(input).into(wrapper);\n    dom.insert(wrapper).into(link);\n\n    dom.setStyles(inputStyles).on(input);\n    dom.setAttributes(inputAttributes).on(input);\n\n    dom.setStyles(wrapperStyles).on(wrapper);\n    dom.setStyles(linkStyles).on(link);\n\n    var eventName = \"onwebkitspeechchange\" in input ? \"webkitspeechchange\" : \"speechchange\";\n    dom.observe(input, eventName, function() {\n      parent.execCommand(\"insertText\", input.value);\n      input.value = \"\";\n    });\n\n    dom.observe(input, \"click\", function(event) {\n      if (dom.hasClass(link, \"wysihtml5-command-disabled\")) {\n        event.preventDefault();\n      }\n\n      event.stopPropagation();\n    });\n  };\n})(wysihtml5);\n;/**\n * Toolbar\n *\n * @param {Object} parent Reference to instance of Editor instance\n * @param {Element} container Reference to the toolbar container element\n *\n * @example\n *    <div id=\"toolbar\">\n *      <a data-wysihtml5-command=\"createLink\">insert link</a>\n *      <a data-wysihtml5-command=\"formatBlock\" data-wysihtml5-command-value=\"h1\">insert h1</a>\n *    </div>\n *\n *    <script>\n *      var toolbar = new wysihtml5.toolbar.Toolbar(editor, document.getElementById(\"toolbar\"));\n *    </script>\n */\n(function(wysihtml5) {\n  var CLASS_NAME_COMMAND_DISABLED   = \"wysihtml5-command-disabled\",\n      CLASS_NAME_COMMANDS_DISABLED  = \"wysihtml5-commands-disabled\",\n      CLASS_NAME_COMMAND_ACTIVE     = \"wysihtml5-command-active\",\n      CLASS_NAME_ACTION_ACTIVE      = \"wysihtml5-action-active\",\n      dom                           = wysihtml5.dom;\n\n  wysihtml5.toolbar.Toolbar = Base.extend(\n    /** @scope wysihtml5.toolbar.Toolbar.prototype */ {\n    constructor: function(editor, container, showOnInit) {\n      this.editor     = editor;\n      this.container  = typeof(container) === \"string\" ? document.getElementById(container) : container;\n      this.composer   = editor.composer;\n\n      this._getLinks(\"command\");\n      this._getLinks(\"action\");\n\n      this._observe();\n      if (showOnInit) { this.show(); }\n\n      if (editor.config.classNameCommandDisabled != null) {\n        CLASS_NAME_COMMAND_DISABLED = editor.config.classNameCommandDisabled;\n      }\n      if (editor.config.classNameCommandsDisabled != null) {\n        CLASS_NAME_COMMANDS_DISABLED = editor.config.classNameCommandsDisabled;\n      }\n      if (editor.config.classNameCommandActive != null) {\n        CLASS_NAME_COMMAND_ACTIVE = editor.config.classNameCommandActive;\n      }\n      if (editor.config.classNameActionActive != null) {\n        CLASS_NAME_ACTION_ACTIVE = editor.config.classNameActionActive;\n      }\n\n      var speechInputLinks  = this.container.querySelectorAll(\"[data-wysihtml5-command=insertSpeech]\"),\n          length            = speechInputLinks.length,\n          i                 = 0;\n      for (; i<length; i++) {\n        new wysihtml5.toolbar.Speech(this, speechInputLinks[i]);\n      }\n    },\n\n    _getLinks: function(type) {\n      var links   = this[type + \"Links\"] = wysihtml5.lang.array(this.container.querySelectorAll(\"[data-wysihtml5-\" + type + \"]\")).get(),\n          length  = links.length,\n          i       = 0,\n          mapping = this[type + \"Mapping\"] = {},\n          link,\n          group,\n          name,\n          value,\n          dialog;\n      for (; i<length; i++) {\n        link    = links[i];\n        name    = link.getAttribute(\"data-wysihtml5-\" + type);\n        value   = link.getAttribute(\"data-wysihtml5-\" + type + \"-value\");\n        group   = this.container.querySelector(\"[data-wysihtml5-\" + type + \"-group='\" + name + \"']\");\n        dialog  = this._getDialog(link, name);\n\n        mapping[name + \":\" + value] = {\n          link:   link,\n          group:  group,\n          name:   name,\n          value:  value,\n          dialog: dialog,\n          state:  false\n        };\n      }\n    },\n\n    _getDialog: function(link, command) {\n      var that          = this,\n          dialogElement = this.container.querySelector(\"[data-wysihtml5-dialog='\" + command + \"']\"),\n          dialog,\n          caretBookmark;\n\n      if (dialogElement) {\n        if (wysihtml5.toolbar[\"Dialog_\" + command]) {\n            dialog = new wysihtml5.toolbar[\"Dialog_\" + command](link, dialogElement);\n        } else {\n            dialog = new wysihtml5.toolbar.Dialog(link, dialogElement);\n        }\n\n        dialog.on(\"show\", function() {\n          caretBookmark = that.composer.selection.getBookmark();\n\n          that.editor.fire(\"show:dialog\", { command: command, dialogContainer: dialogElement, commandLink: link });\n        });\n\n        dialog.on(\"save\", function(attributes) {\n          if (caretBookmark) {\n            that.composer.selection.setBookmark(caretBookmark);\n          }\n          that._execCommand(command, attributes);\n\n          that.editor.fire(\"save:dialog\", { command: command, dialogContainer: dialogElement, commandLink: link });\n        });\n\n        dialog.on(\"cancel\", function() {\n          that.editor.focus(false);\n          that.editor.fire(\"cancel:dialog\", { command: command, dialogContainer: dialogElement, commandLink: link });\n        });\n      }\n      return dialog;\n    },\n\n    /**\n     * @example\n     *    var toolbar = new wysihtml5.Toolbar();\n     *    // Insert a <blockquote> element or wrap current selection in <blockquote>\n     *    toolbar.execCommand(\"formatBlock\", \"blockquote\");\n     */\n    execCommand: function(command, commandValue) {\n      if (this.commandsDisabled) {\n        return;\n      }\n\n      var commandObj = this.commandMapping[command + \":\" + commandValue];\n\n      // Show dialog when available\n      if (commandObj && commandObj.dialog && !commandObj.state) {\n        commandObj.dialog.show();\n      } else {\n        this._execCommand(command, commandValue);\n      }\n    },\n\n    _execCommand: function(command, commandValue) {\n      // Make sure that composer is focussed (false => don't move caret to the end)\n      this.editor.focus(false);\n\n      this.composer.commands.exec(command, commandValue);\n      this._updateLinkStates();\n    },\n\n    execAction: function(action) {\n      var editor = this.editor;\n      if (action === \"change_view\") {\n        if (editor.textarea) {\n            if (editor.currentView === editor.textarea) {\n              editor.fire(\"change_view\", \"composer\");\n            } else {\n              editor.fire(\"change_view\", \"textarea\");\n            }\n        }\n      }\n      if (action == \"showSource\") {\n          editor.fire(\"showSource\");\n      }\n    },\n\n    _observe: function() {\n      var that      = this,\n          editor    = this.editor,\n          container = this.container,\n          links     = this.commandLinks.concat(this.actionLinks),\n          length    = links.length,\n          i         = 0;\n\n      for (; i<length; i++) {\n        // 'javascript:;' and unselectable=on Needed for IE, but done in all browsers to make sure that all get the same css applied\n        // (you know, a:link { ... } doesn't match anchors with missing href attribute)\n        if (links[i].nodeName === \"A\") {\n          dom.setAttributes({\n            href:         \"javascript:;\",\n            unselectable: \"on\"\n          }).on(links[i]);\n        } else {\n          dom.setAttributes({ unselectable: \"on\" }).on(links[i]);\n        }\n      }\n\n      // Needed for opera and chrome\n      dom.delegate(container, \"[data-wysihtml5-command], [data-wysihtml5-action]\", \"mousedown\", function(event) { event.preventDefault(); });\n\n      dom.delegate(container, \"[data-wysihtml5-command]\", \"click\", function(event) {\n        var link          = this,\n            command       = link.getAttribute(\"data-wysihtml5-command\"),\n            commandValue  = link.getAttribute(\"data-wysihtml5-command-value\");\n        that.execCommand(command, commandValue);\n        event.preventDefault();\n      });\n\n      dom.delegate(container, \"[data-wysihtml5-action]\", \"click\", function(event) {\n        var action = this.getAttribute(\"data-wysihtml5-action\");\n        that.execAction(action);\n        event.preventDefault();\n      });\n\n      editor.on(\"interaction:composer\", function() {\n          that._updateLinkStates();\n      });\n\n      editor.on(\"focus:composer\", function() {\n        that.bookmark = null;\n      });\n\n      if (this.editor.config.handleTables) {\n          editor.on(\"tableselect:composer\", function() {\n              that.container.querySelectorAll('[data-wysihtml5-hiddentools=\"table\"]')[0].style.display = \"\";\n          });\n          editor.on(\"tableunselect:composer\", function() {\n              that.container.querySelectorAll('[data-wysihtml5-hiddentools=\"table\"]')[0].style.display = \"none\";\n          });\n      }\n\n      editor.on(\"change_view\", function(currentView) {\n        // Set timeout needed in order to let the blur event fire first\n        if (editor.textarea) {\n            setTimeout(function() {\n              that.commandsDisabled = (currentView !== \"composer\");\n              that._updateLinkStates();\n              if (that.commandsDisabled) {\n                dom.addClass(container, CLASS_NAME_COMMANDS_DISABLED);\n              } else {\n                dom.removeClass(container, CLASS_NAME_COMMANDS_DISABLED);\n              }\n            }, 0);\n        }\n      });\n    },\n\n    _updateLinkStates: function() {\n\n      var commandMapping    = this.commandMapping,\n          actionMapping     = this.actionMapping,\n          i,\n          state,\n          action,\n          command;\n      // every millisecond counts... this is executed quite often\n      for (i in commandMapping) {\n        command = commandMapping[i];\n        if (this.commandsDisabled) {\n          state = false;\n          dom.removeClass(command.link, CLASS_NAME_COMMAND_ACTIVE);\n          if (command.group) {\n            dom.removeClass(command.group, CLASS_NAME_COMMAND_ACTIVE);\n          }\n          if (command.dialog) {\n            command.dialog.hide();\n          }\n        } else {\n          state = this.composer.commands.state(command.name, command.value);\n          dom.removeClass(command.link, CLASS_NAME_COMMAND_DISABLED);\n          if (command.group) {\n            dom.removeClass(command.group, CLASS_NAME_COMMAND_DISABLED);\n          }\n        }\n        if (command.state === state) {\n          continue;\n        }\n\n        command.state = state;\n        if (state) {\n          dom.addClass(command.link, CLASS_NAME_COMMAND_ACTIVE);\n          if (command.group) {\n            dom.addClass(command.group, CLASS_NAME_COMMAND_ACTIVE);\n          }\n          if (command.dialog) {\n            if (typeof(state) === \"object\" || wysihtml5.lang.object(state).isArray()) {\n\n              if (!command.dialog.multiselect && wysihtml5.lang.object(state).isArray()) {\n                // Grab first and only object/element in state array, otherwise convert state into boolean\n                // to avoid showing a dialog for multiple selected elements which may have different attributes\n                // eg. when two links with different href are selected, the state will be an array consisting of both link elements\n                // but the dialog interface can only update one\n                state = state.length === 1 ? state[0] : true;\n                command.state = state;\n              }\n              command.dialog.show(state);\n            } else {\n              command.dialog.hide();\n            }\n          }\n        } else {\n          dom.removeClass(command.link, CLASS_NAME_COMMAND_ACTIVE);\n          if (command.group) {\n            dom.removeClass(command.group, CLASS_NAME_COMMAND_ACTIVE);\n          }\n          if (command.dialog) {\n            command.dialog.hide();\n          }\n        }\n      }\n\n      for (i in actionMapping) {\n        action = actionMapping[i];\n\n        if (action.name === \"change_view\") {\n          action.state = this.editor.currentView === this.editor.textarea;\n          if (action.state) {\n            dom.addClass(action.link, CLASS_NAME_ACTION_ACTIVE);\n          } else {\n            dom.removeClass(action.link, CLASS_NAME_ACTION_ACTIVE);\n          }\n        }\n      }\n    },\n\n    show: function() {\n      this.container.style.display = \"\";\n    },\n\n    hide: function() {\n      this.container.style.display = \"none\";\n    }\n  });\n\n})(wysihtml5);\n;(function(wysihtml5) {\n    wysihtml5.toolbar.Dialog_createTable = wysihtml5.toolbar.Dialog.extend({\n        show: function(elementToChange) {\n            this.base(elementToChange);\n\n        }\n\n    });\n})(wysihtml5);\n;(function(wysihtml5) {\n  var dom                     = wysihtml5.dom,\n      SELECTOR_FIELDS         = \"[data-wysihtml5-dialog-field]\",\n      ATTRIBUTE_FIELDS        = \"data-wysihtml5-dialog-field\";\n\n  wysihtml5.toolbar.Dialog_foreColorStyle = wysihtml5.toolbar.Dialog.extend({\n    multiselect: true,\n\n    _serialize: function() {\n      var data    = {},\n          fields  = this.container.querySelectorAll(SELECTOR_FIELDS),\n          length  = fields.length,\n          i       = 0;\n\n      for (; i<length; i++) {\n        data[fields[i].getAttribute(ATTRIBUTE_FIELDS)] = fields[i].value;\n      }\n      return data;\n    },\n\n    _interpolate: function(avoidHiddenFields) {\n      var field,\n          fieldName,\n          newValue,\n          focusedElement = document.querySelector(\":focus\"),\n          fields         = this.container.querySelectorAll(SELECTOR_FIELDS),\n          length         = fields.length,\n          i              = 0,\n          firstElement   = (this.elementToChange) ? ((wysihtml5.lang.object(this.elementToChange).isArray()) ? this.elementToChange[0] : this.elementToChange) : null,\n          colorStr       = (firstElement) ? firstElement.getAttribute('style') : null,\n          color          = (colorStr) ? wysihtml5.quirks.styleParser.parseColor(colorStr, \"color\") : null;\n\n      for (; i<length; i++) {\n        field = fields[i];\n        // Never change elements where the user is currently typing in\n        if (field === focusedElement) {\n          continue;\n        }\n        // Don't update hidden fields3\n        if (avoidHiddenFields && field.type === \"hidden\") {\n          continue;\n        }\n        if (field.getAttribute(ATTRIBUTE_FIELDS) === \"color\") {\n          if (color) {\n            if (color[3] && color[3] != 1) {\n              field.value = \"rgba(\" + color[0] + \",\" + color[1] + \",\" + color[2] + \",\" + color[3] + \");\";\n            } else {\n              field.value = \"rgb(\" + color[0] + \",\" + color[1] + \",\" + color[2] + \");\";\n            }\n          } else {\n            field.value = \"rgb(0,0,0);\";\n          }\n        }\n      }\n    }\n\n  });\n})(wysihtml5);\n;(function(wysihtml5) {\n  var dom                     = wysihtml5.dom,\n      SELECTOR_FIELDS         = \"[data-wysihtml5-dialog-field]\",\n      ATTRIBUTE_FIELDS        = \"data-wysihtml5-dialog-field\";\n\n  wysihtml5.toolbar.Dialog_fontSizeStyle = wysihtml5.toolbar.Dialog.extend({\n    multiselect: true,\n\n    _serialize: function() {\n      return {\"size\" : this.container.querySelector('[data-wysihtml5-dialog-field=\"size\"]').value};\n    },\n\n    _interpolate: function(avoidHiddenFields) {\n      var focusedElement = document.querySelector(\":focus\"),\n          field          = this.container.querySelector(\"[data-wysihtml5-dialog-field='size']\"),\n          firstElement   = (this.elementToChange) ? ((wysihtml5.lang.object(this.elementToChange).isArray()) ? this.elementToChange[0] : this.elementToChange) : null,\n          styleStr       = (firstElement) ? firstElement.getAttribute('style') : null,\n          size           = (styleStr) ? wysihtml5.quirks.styleParser.parseFontSize(styleStr) : null;\n\n      if (field && field !== focusedElement && size && !(/^\\s*$/).test(size)) {\n        field.value = size;\n      }\n    }\n\n  });\n})(wysihtml5);\n/*!\n\n handlebars v1.3.0\n\nCopyright (C) 2011 by Yehuda Katz\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n@license\n*/\nvar Handlebars=function(){var a=function(){\"use strict\";function a(a){this.string=a}var b;return a.prototype.toString=function(){return\"\"+this.string},b=a}(),b=function(a){\"use strict\";function b(a){return h[a]||\"&amp;\"}function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function d(a){return a instanceof g?a.toString():a||0===a?(a=\"\"+a,j.test(a)?a.replace(i,b):a):\"\"}function e(a){return a||0===a?m(a)&&0===a.length?!0:!1:!0}var f={},g=a,h={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#x27;\",\"`\":\"&#x60;\"},i=/[&<>\"'`]/g,j=/[&<>\"'`]/;f.extend=c;var k=Object.prototype.toString;f.toString=k;var l=function(a){return\"function\"==typeof a};l(/x/)&&(l=function(a){return\"function\"==typeof a&&\"[object Function]\"===k.call(a)});var l;f.isFunction=l;var m=Array.isArray||function(a){return a&&\"object\"==typeof a?\"[object Array]\"===k.call(a):!1};return f.isArray=m,f.escapeExpression=d,f.isEmpty=e,f}(a),c=function(){\"use strict\";function a(a,b){var d;b&&b.firstLine&&(d=b.firstLine,a+=\" - \"+d+\":\"+b.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<c.length;f++)this[c[f]]=e[c[f]];d&&(this.lineNumber=d,this.column=b.firstColumn)}var b,c=[\"description\",\"fileName\",\"lineNumber\",\"message\",\"name\",\"number\",\"stack\"];return a.prototype=new Error,b=a}(),d=function(a,b){\"use strict\";function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper(\"helperMissing\",function(a){if(2===arguments.length)return void 0;throw new h(\"Missing helper: '\"+a+\"'\")}),a.registerHelper(\"blockHelperMissing\",function(b,c){var d=c.inverse||function(){},e=c.fn;return m(b)&&(b=b.call(this)),b===!0?e(this):b===!1||null==b?d(this):l(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper(\"each\",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g=\"\";if(m(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&\"object\"==typeof a)if(l(a))for(var h=a.length;h>f;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper(\"if\",function(a,b){return m(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper(\"unless\",function(b,c){return a.helpers[\"if\"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper(\"with\",function(a,b){return m(a)&&(a=a.call(this)),g.isEmpty(a)?void 0:b.fn(a)}),a.registerHelper(\"log\",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function e(a,b){p.log(a,b)}var f={},g=a,h=b,i=\"1.3.0\";f.VERSION=i;var j=4;f.COMPILER_REVISION=j;var k={1:\"<= 1.0.rc.2\",2:\"== 1.0.0-rc.3\",3:\"== 1.0.0-rc.4\",4:\">= 1.0.0\"};f.REVISION_CHANGES=k;var l=g.isArray,m=g.isFunction,n=g.toString,o=\"[object Object]\";f.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:p,log:e,registerHelper:function(a,b,c){if(n.call(a)===o){if(c||b)throw new h(\"Arg not supported with multiple helpers\");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){n.call(a)===o?g.extend(this.partials,a):this.partials[a]=b}};var p={methodMap:{0:\"debug\",1:\"info\",2:\"warn\",3:\"error\"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(p.level<=a){var c=p.methodMap[a];\"undefined\"!=typeof console&&console[c]&&console[c].call(console,b)}}};f.logger=p,f.log=e;var q=function(a){var b={};return g.extend(b,a),b};return f.createFrame=q,f}(b,c),e=function(a,b,c){\"use strict\";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(c>b){var d=n[c],e=n[b];throw new l(\"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version (\"+d+\") or downgrade your runtime to an older version (\"+e+\").\")}throw new l(\"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version (\"+a[1]+\").\")}}function e(a,b){if(!b)throw new l(\"No environment passed to template\");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new l(\"The partial \"+c+\" could not be compiled when running in runtime-only mode\")},d={escapeExpression:k.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},k.extend(c,b),k.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new l(\"The partial \"+b+\" could not be found\");return a instanceof Function?a(c,g):void 0}function i(){return\"\"}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES;return j.checkRevision=d,j.template=e,j.programWithDepth=f,j.program=g,j.invokePartial=h,j.noop=i,j}(b,c,d),f=function(a,b,c,d,e){\"use strict\";var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,f=m}(d,a,c,b,e);return f}();this[\"wysihtml5\"] = this[\"wysihtml5\"] || {};\nthis[\"wysihtml5\"][\"tpl\"] = this[\"wysihtml5\"][\"tpl\"] || {};\n\nthis[\"wysihtml5\"][\"tpl\"][\"blockquote\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"btn-\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \" \\n      <span class=\\\"fa fa-quote-left\\\"></span>\\n    \";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"glyphicon glyphicon-quote\\\"></span>\\n    \";\n  }\n\n  buffer += \"<li>\\n  <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"formatBlock\\\" data-wysihtml5-command-value=\\\"blockquote\\\" data-wysihtml5-display-format-name=\\\"false\\\" tabindex=\\\"-1\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.fa), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  </a>\\n</li>\\n\";\n  return buffer;\n  });\n\nthis[\"wysihtml5\"][\"tpl\"][\"color\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"btn-\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\n  buffer += \"<li class=\\\"dropdown\\\">\\n  <a class=\\\"btn btn-default dropdown-toggle \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" data-toggle=\\\"dropdown\\\" tabindex=\\\"-1\\\">\\n    <span class=\\\"current-color\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.black)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</span>\\n    <b class=\\\"caret\\\"></b>\\n  </a>\\n  <ul class=\\\"dropdown-menu\\\">\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"black\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"black\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.black)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"silver\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"silver\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.silver)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"gray\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"gray\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.gray)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"maroon\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"maroon\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.maroon)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"red\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"red\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.red)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"purple\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"purple\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.purple)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"green\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"green\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.green)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"olive\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"olive\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.olive)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"navy\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"navy\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.navy)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"blue\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"blue\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.blue)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"orange\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"orange\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.orange)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n  </ul>\\n</li>\\n\";\n  return buffer;\n  });\n\nthis[\"wysihtml5\"][\"tpl\"][\"emphasis\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"btn-\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"small\\\" title=\\\"CTRL+S\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.emphasis)),stack1 == null || stack1 === false ? stack1 : stack1.small)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a>\\n    \";\n  return buffer;\n  }\n\n  buffer += \"<li>\\n  <div class=\\\"btn-group\\\">\\n    <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"bold\\\" title=\\\"CTRL+B\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.emphasis)),stack1 == null || stack1 === false ? stack1 : stack1.bold)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a>\\n    <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"italic\\\" title=\\\"CTRL+I\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.emphasis)),stack1 == null || stack1 === false ? stack1 : stack1.italic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a>\\n    <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"underline\\\" title=\\\"CTRL+U\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.emphasis)),stack1 == null || stack1 === false ? stack1 : stack1.underline)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a>\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.emphasis)),stack1 == null || stack1 === false ? stack1 : stack1.small), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  </div>\\n</li>\\n\";\n  return buffer;\n  });\n\nthis[\"wysihtml5\"][\"tpl\"][\"font-styles\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"btn-\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"fa fa-font\\\"></span>\\n    \";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"glyphicon glyphicon-font\\\"></span>\\n    \";\n  }\n\n  buffer += \"<li class=\\\"dropdown\\\">\\n  <a class=\\\"btn btn-default dropdown-toggle \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" data-toggle=\\\"dropdown\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.fa), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <span class=\\\"current-font\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.font_styles)),stack1 == null || stack1 === false ? stack1 : stack1.normal)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</span>\\n    <b class=\\\"caret\\\"></b>\\n  </a>\\n  <ul class=\\\"dropdown-menu\\\">\\n    <li><a data-wysihtml5-command=\\\"formatBlock\\\" data-wysihtml5-command-value=\\\"p\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.font_styles)),stack1 == null || stack1 === false ? stack1 : stack1.normal)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><a data-wysihtml5-command=\\\"formatBlock\\\" data-wysihtml5-command-value=\\\"h1\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.font_styles)),stack1 == null || stack1 === false ? stack1 : stack1.h1)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><a data-wysihtml5-command=\\\"formatBlock\\\" data-wysihtml5-command-value=\\\"h2\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.font_styles)),stack1 == null || stack1 === false ? stack1 : stack1.h2)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><a data-wysihtml5-command=\\\"formatBlock\\\" data-wysihtml5-command-value=\\\"h3\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.font_styles)),stack1 == null || stack1 === false ? stack1 : stack1.h3)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><a data-wysihtml5-command=\\\"formatBlock\\\" data-wysihtml5-command-value=\\\"h4\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.font_styles)),stack1 == null || stack1 === false ? stack1 : stack1.h4)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><a data-wysihtml5-command=\\\"formatBlock\\\" data-wysihtml5-command-value=\\\"h5\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.font_styles)),stack1 == null || stack1 === false ? stack1 : stack1.h5)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><a data-wysihtml5-command=\\\"formatBlock\\\" data-wysihtml5-command-value=\\\"h6\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.font_styles)),stack1 == null || stack1 === false ? stack1 : stack1.h6)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n  </ul>\\n</li>\\n\";\n  return buffer;\n  });\n\nthis[\"wysihtml5\"][\"tpl\"][\"html\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"btn-\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"\\n        <span class=\\\"fa fa-pencil\\\"></span>\\n      \";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"\\n        <span class=\\\"glyphicon glyphicon-pencil\\\"></span>\\n      \";\n  }\n\n  buffer += \"<li>\\n  <div class=\\\"btn-group\\\">\\n    <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-action=\\\"change_view\\\" title=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.html)),stack1 == null || stack1 === false ? stack1 : stack1.edit)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" tabindex=\\\"-1\\\">\\n      \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.fa), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </a>\\n  </div>\\n</li>\\n\";\n  return buffer;\n  });\n\nthis[\"wysihtml5\"][\"tpl\"][\"image\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"modal-sm\";\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"btn-\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"fa fa-file-image-o\\\"></span>\\n    \";\n  }\n\nfunction program7(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"glyphicon glyphicon-picture\\\"></span>\\n    \";\n  }\n\n  buffer += \"<li>\\n  <div class=\\\"bootstrap-wysihtml5-insert-image-modal modal fade\\\" data-wysihtml5-dialog=\\\"insertImage\\\">\\n    <div class=\\\"modal-dialog \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.smallmodals), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n      <div class=\\\"modal-content\\\">\\n        <div class=\\\"modal-header\\\">\\n          <a class=\\\"close\\\" data-dismiss=\\\"modal\\\">&times;</a>\\n          <h3>\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.image)),stack1 == null || stack1 === false ? stack1 : stack1.insert)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</h3>\\n        </div>\\n        <div class=\\\"modal-body\\\">\\n          <div class=\\\"form-group\\\">\\n            <input value=\\\"http://\\\" class=\\\"bootstrap-wysihtml5-insert-image-url form-control\\\" data-wysihtml5-dialog-field=\\\"src\\\">\\n          </div> \\n        </div>\\n        <div class=\\\"modal-footer\\\">\\n          <a class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\" data-wysihtml5-dialog-action=\\\"cancel\\\" href=\\\"#\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.image)),stack1 == null || stack1 === false ? stack1 : stack1.cancel)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a>\\n          <a class=\\\"btn btn-primary\\\" data-dismiss=\\\"modal\\\"  data-wysihtml5-dialog-action=\\\"save\\\" href=\\\"#\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.image)),stack1 == null || stack1 === false ? stack1 : stack1.insert)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n  <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"insertImage\\\" title=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.image)),stack1 == null || stack1 === false ? stack1 : stack1.insert)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" tabindex=\\\"-1\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.fa), {hash:{},inverse:self.program(7, program7, data),fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  </a>\\n</li>\\n\";\n  return buffer;\n  });\n\nthis[\"wysihtml5\"][\"tpl\"][\"link\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"modal-sm\";\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"btn-\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"fa fa-share-square-o\\\"></span>\\n    \";\n  }\n\nfunction program7(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"glyphicon glyphicon-share\\\"></span>\\n    \";\n  }\n\n  buffer += \"<li>\\n  <div class=\\\"bootstrap-wysihtml5-insert-link-modal modal fade\\\" data-wysihtml5-dialog=\\\"createLink\\\">\\n    <div class=\\\"modal-dialog \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.smallmodals), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n      <div class=\\\"modal-content\\\">\\n        <div class=\\\"modal-header\\\">\\n          <a class=\\\"close\\\" data-dismiss=\\\"modal\\\">&times;</a>\\n          <h3>\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.link)),stack1 == null || stack1 === false ? stack1 : stack1.insert)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</h3>\\n        </div>\\n        <div class=\\\"modal-body\\\">\\n          <div class=\\\"form-group\\\">\\n            <input value=\\\"http://\\\" class=\\\"bootstrap-wysihtml5-insert-link-url form-control\\\" data-wysihtml5-dialog-field=\\\"href\\\">\\n          </div> \\n          <div class=\\\"checkbox\\\">\\n            <label> \\n              <input type=\\\"checkbox\\\" class=\\\"bootstrap-wysihtml5-insert-link-target\\\" checked>\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.link)),stack1 == null || stack1 === false ? stack1 : stack1.target)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\n            </label>\\n          </div>\\n        </div>\\n        <div class=\\\"modal-footer\\\">\\n          <a class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\" data-wysihtml5-dialog-action=\\\"cancel\\\" href=\\\"#\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.link)),stack1 == null || stack1 === false ? stack1 : stack1.cancel)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a>\\n          <a href=\\\"#\\\" class=\\\"btn btn-primary\\\" data-dismiss=\\\"modal\\\" data-wysihtml5-dialog-action=\\\"save\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.link)),stack1 == null || stack1 === false ? stack1 : stack1.insert)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n  <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"createLink\\\" title=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.link)),stack1 == null || stack1 === false ? stack1 : stack1.insert)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" tabindex=\\\"-1\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.fa), {hash:{},inverse:self.program(7, program7, data),fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  </a>\\n</li>\\n\";\n  return buffer;\n  });\n\nthis[\"wysihtml5\"][\"tpl\"][\"lists\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"btn-\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"fa fa-list-ul\\\"></span>\\n    \";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"glyphicon glyphicon-list\\\"></span>\\n    \";\n  }\n\nfunction program7(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"fa fa-list-ol\\\"></span>\\n    \";\n  }\n\nfunction program9(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"glyphicon glyphicon-th-list\\\"></span>\\n    \";\n  }\n\nfunction program11(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"fa fa-outdent\\\"></span>\\n    \";\n  }\n\nfunction program13(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"glyphicon glyphicon-indent-right\\\"></span>\\n    \";\n  }\n\nfunction program15(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"fa fa-indent\\\"></span>\\n    \";\n  }\n\nfunction program17(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"glyphicon glyphicon-indent-left\\\"></span>\\n    \";\n  }\n\n  buffer += \"<li>\\n  <div class=\\\"btn-group\\\">\\n    <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"insertUnorderedList\\\" title=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.lists)),stack1 == null || stack1 === false ? stack1 : stack1.unordered)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" tabindex=\\\"-1\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.fa), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </a>\\n    <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"insertOrderedList\\\" title=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.lists)),stack1 == null || stack1 === false ? stack1 : stack1.ordered)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" tabindex=\\\"-1\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.fa), {hash:{},inverse:self.program(9, program9, data),fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </a>\\n    <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"Outdent\\\" title=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.lists)),stack1 == null || stack1 === false ? stack1 : stack1.outdent)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" tabindex=\\\"-1\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.fa), {hash:{},inverse:self.program(13, program13, data),fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </a>\\n    <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"Indent\\\" title=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.lists)),stack1 == null || stack1 === false ? stack1 : stack1.indent)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" tabindex=\\\"-1\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.fa), {hash:{},inverse:self.program(17, program17, data),fn:self.program(15, program15, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </a>\\n  </div>\\n</li>\\n\";\n  return buffer;\n  });(function (factory) {\n  'use strict';\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define('bootstrap.wysihtml5', ['jquery', 'wysihtml5', 'bootstrap', 'bootstrap.wysihtml5.templates', 'bootstrap.wysihtml5.commands'], factory);\n  } else {\n    // Browser globals\n    factory(jQuery, wysihtml5); // jshint ignore:line\n  }\n}(function ($, wysihtml5) {\n  'use strict';\n  var bsWysihtml5 = function($, wysihtml5) {\n\n    var templates = function(key, locale, options) {\n      if(wysihtml5.tpl[key]) {\n        return wysihtml5.tpl[key]({locale: locale, options: options});\n      }\n    };\n\n    var Wysihtml5 = function(el, options) {\n      this.el = el;\n      var toolbarOpts = $.extend(true, {}, defaultOptions, options);\n      for(var t in toolbarOpts.customTemplates) {\n        if (toolbarOpts.customTemplates.hasOwnProperty(t)) {\n          wysihtml5.tpl[t] = toolbarOpts.customTemplates[t];\n        }\n      }\n      this.toolbar = this.createToolbar(el, toolbarOpts);\n      this.editor =  this.createEditor(toolbarOpts);\n    };\n\n    Wysihtml5.prototype = {\n\n      constructor: Wysihtml5,\n\n      createEditor: function(options) {\n        options = options || {};\n\n        // Add the toolbar to a clone of the options object so multiple instances\n        // of the WYISYWG don't break because 'toolbar' is already defined\n        options = $.extend(true, {}, options);\n        options.toolbar = this.toolbar[0];\n        \n        this.initializeEditor(this.el[0], options);\n      },\n\n\n      initializeEditor: function(el, options) {\n        var editor = new wysihtml5.Editor(this.el[0], options);\n\n        editor.on('beforeload', this.syncBootstrapDialogEvents);\n        editor.on('beforeload', this.loadParserRules);\n\n        // #30 - body is in IE 10 not created by default, which leads to nullpointer\n        // 2014/02/13 - adapted to wysihtml5-0.4, does not work in IE\n        if(editor.composer.editableArea.contentDocument) {\n          this.addMoreShortcuts(editor, \n                                editor.composer.editableArea.contentDocument.body || editor.composer.editableArea.contentDocument, \n                                options.shortcuts);\n        } else {\n          this.addMoreShortcuts(editor, editor.composer.editableArea, options.shortcuts);    \n        }\n\n        if(options && options.events) {\n          for(var eventName in options.events) {\n            if (options.events.hasOwnProperty(eventName)) {\n              editor.on(eventName, options.events[eventName]);\n            }\n          }\n        }\n\n        return editor;\n      },\n\n      loadParserRules: function() {\n        if($.type(this.config.parserRules) === 'string') {\n          $.ajax({\n            dataType: 'json',\n            url: this.config.parserRules,\n            context: this,\n            error: function (jqXHR, textStatus, errorThrown) {\n              console.log(errorThrown);\n            },\n            success: function (parserRules) {\n              this.config.parserRules = parserRules;\n              console.log('parserrules loaded');\n            }\n          });\n        }\n\n        if(this.config.pasteParserRulesets && $.type(this.config.pasteParserRulesets) === 'string') {\n          $.ajax({\n            dataType: 'json',\n            url: this.config.pasteParserRulesets,\n            context: this,\n            error: function (jqXHR, textStatus, errorThrown) {\n              console.log(errorThrown);\n            },\n            success: function (pasteParserRulesets) {\n              this.config.pasteParserRulesets = pasteParserRulesets;\n            }\n          });\n        }\n      },\n\n      //sync wysihtml5 events for dialogs with bootstrap events\n      syncBootstrapDialogEvents: function() {\n        var editor = this;\n        $.map(this.toolbar.commandMapping, function(value) {\n          return [value];\n        }).filter(function(commandObj) {\n          return commandObj.dialog;\n        }).map(function(commandObj) {\n          return commandObj.dialog;\n        }).forEach(function(dialog) {\n          dialog.on('show', function() {\n            $(this.container).modal('show');\n          });\n          dialog.on('hide', function() {\n            $(this.container).modal('hide');\n            setTimeout(editor.composer.focus, 0);\n          });\n          $(dialog.container).on('shown.bs.modal', function () {\n            $(this).find('input, select, textarea').first().focus();\n          });\n        });\n        this.on('change_view', function() {\n          $(this.toolbar.container.children).find('a.btn').not('[data-wysihtml5-action=\"change_view\"]').toggleClass('disabled');\n        });\n      },\n\n      createToolbar: function(el, options) {\n        var self = this;\n        var toolbar = $('<ul/>', {\n          'class' : 'wysihtml5-toolbar',\n          'style': 'display:none'\n        });\n        var culture = options.locale || defaultOptions.locale || 'en';\n        if(!locale.hasOwnProperty(culture)) {\n          console.debug('Locale \\'' + culture + '\\' not found. Available locales are: ' + Object.keys(locale) + '. Falling back to \\'en\\'.');\n          culture = 'en';\n        }\n        var localeObject = $.extend(true, {}, locale.en, locale[culture]);\n        for(var key in options.toolbar) {\n          if(options.toolbar[key]) {\n            toolbar.append(templates(key, localeObject, options));\n          }\n        }\n\n        toolbar.find('a[data-wysihtml5-command=\"formatBlock\"]').click(function(e) {\n          var target = e.delegateTarget || e.target || e.srcElement,\n          el = $(target),\n          showformat = el.data('wysihtml5-display-format-name'),\n          formatname = el.data('wysihtml5-format-name') || el.html();\n          if(showformat === undefined || showformat === 'true') {\n            self.toolbar.find('.current-font').text(formatname);\n          }\n        });\n\n        toolbar.find('a[data-wysihtml5-command=\"foreColor\"]').click(function(e) {\n          var target = e.target || e.srcElement;\n          var el = $(target);\n          self.toolbar.find('.current-color').text(el.html());\n        });\n\n        this.el.before(toolbar);\n\n        return toolbar;\n      },\n\n      addMoreShortcuts: function(editor, el, shortcuts) {\n        /* some additional shortcuts */\n        wysihtml5.dom.observe(el, 'keydown', function(event) {\n          var keyCode  = event.keyCode,\n          command  = shortcuts[keyCode];\n          if ((event.ctrlKey || event.metaKey || event.altKey) && command && wysihtml5.commands[command]) {\n            var commandObj = editor.toolbar.commandMapping[command + ':null'];\n            if (commandObj && commandObj.dialog && !commandObj.state) {\n              commandObj.dialog.show();\n            } else {\n              wysihtml5.commands[command].exec(editor.composer, command);\n            }\n            event.preventDefault();\n          }\n        });\n      }\n    };\n\n    // these define our public api\n    var methods = {\n      resetDefaults: function() {\n        $.fn.wysihtml5.defaultOptions = $.extend(true, {}, $.fn.wysihtml5.defaultOptionsCache);\n      },\n      bypassDefaults: function(options) {\n        return this.each(function () {\n          var $this = $(this);\n          $this.data('wysihtml5', new Wysihtml5($this, options));\n        });\n      },\n      shallowExtend: function (options) {\n        var settings = $.extend({}, $.fn.wysihtml5.defaultOptions, options || {}, $(this).data());\n        var that = this;\n        return methods.bypassDefaults.apply(that, [settings]);\n      },\n      deepExtend: function(options) {\n        var settings = $.extend(true, {}, $.fn.wysihtml5.defaultOptions, options || {});\n        var that = this;\n        return methods.bypassDefaults.apply(that, [settings]);\n      },\n      init: function(options) {\n        var that = this;\n        return methods.shallowExtend.apply(that, [options]);\n      }\n    };\n\n    $.fn.wysihtml5 = function ( method ) {\n      if ( methods[method] ) {\n        return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));\n      } else if ( typeof method === 'object' || ! method ) {\n        return methods.init.apply( this, arguments );\n      } else {\n        $.error( 'Method ' +  method + ' does not exist on jQuery.wysihtml5' );\n      }    \n    };\n\n    $.fn.wysihtml5.Constructor = Wysihtml5;\n\n    var defaultOptions = $.fn.wysihtml5.defaultOptions = {\n      toolbar: {\n        'font-styles': true,\n        'color': false,\n        'emphasis': {\n          'small': true\n        },\n        'blockquote': true,\n        'lists': true,\n        'html': false,\n        'link': true,\n        'image': true,\n        'smallmodals': false\n      },\n      useLineBreaks: false,\n      parserRules: {\n        classes: {\n          'wysiwyg-color-silver' : 1,\n          'wysiwyg-color-gray' : 1,\n          'wysiwyg-color-white' : 1,\n          'wysiwyg-color-maroon' : 1,\n          'wysiwyg-color-red' : 1,\n          'wysiwyg-color-purple' : 1,\n          'wysiwyg-color-fuchsia' : 1,\n          'wysiwyg-color-green' : 1,\n          'wysiwyg-color-lime' : 1,\n          'wysiwyg-color-olive' : 1,\n          'wysiwyg-color-yellow' : 1,\n          'wysiwyg-color-navy' : 1,\n          'wysiwyg-color-blue' : 1,\n          'wysiwyg-color-teal' : 1,\n          'wysiwyg-color-aqua' : 1,\n          'wysiwyg-color-orange' : 1\n        },\n        tags: {\n          'b':  {},\n          'i':  {},\n          'strong': {},\n          'em': {},\n          'p': {},\n          'br': {},\n          'ol': {},\n          'ul': {},\n          'li': {},\n          'h1': {},\n          'h2': {},\n          'h3': {},\n          'h4': {},\n          'h5': {},\n          'h6': {},\n          'blockquote': {},\n          'u': 1,\n          'img': {\n            'check_attributes': {\n              'width': 'numbers',\n              'alt': 'alt',\n              'src': 'url',\n              'height': 'numbers'\n            }\n          },\n          'a':  {\n            'check_attributes': {\n              'href': 'url'\n            },\n            'set_attributes': {\n              'target': '_blank',\n              'rel': 'nofollow'\n            }\n          },\n          'span': 1,\n          'div': 1,\n          'small': 1,\n          'code': 1,\n          'pre': 1\n        }\n      },\n      locale: 'en',\n      shortcuts: {\n        '83': 'small',// S\n        '75': 'createLink'// K\n      }\n    };\n\n    if (typeof $.fn.wysihtml5.defaultOptionsCache === 'undefined') {\n      $.fn.wysihtml5.defaultOptionsCache = $.extend(true, {}, $.fn.wysihtml5.defaultOptions);\n    }\n\n    var locale = $.fn.wysihtml5.locale = {};\n  };\n  bsWysihtml5($, wysihtml5);\n}));\n(function(wysihtml5) {\n  wysihtml5.commands.small = {\n    exec: function(composer, command) {\n      return wysihtml5.commands.formatInline.exec(composer, command, \"small\");\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatInline.state(composer, command, \"small\");\n    }\n  };\n})(wysihtml5);\n\n/**\n * English translation for bootstrap-wysihtml5\n */\n(function (factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define('bootstrap.wysihtml5.en-US', ['jquery', 'bootstrap.wysihtml5'], factory);\n    } else {\n        // Browser globals\n        factory(jQuery);\n    }\n}(function ($) {\n  $.fn.wysihtml5.locale.en = $.fn.wysihtml5.locale['en-US'] = {\n    font_styles: {\n      normal: 'Normal text',\n      h1: 'Heading 1',\n      h2: 'Heading 2',\n      h3: 'Heading 3',\n      h4: 'Heading 4',\n      h5: 'Heading 5',\n      h6: 'Heading 6'\n    },\n    emphasis: {\n      bold: 'Bold',\n      italic: 'Italic',\n      underline: 'Underline',\n      small: 'Small'\n    },\n    lists: {\n      unordered: 'Unordered list',\n      ordered: 'Ordered list',\n      outdent: 'Outdent',\n      indent: 'Indent'\n    },\n    link: {\n      insert: 'Insert link',\n      cancel: 'Cancel',\n      target: 'Open link in new window'\n    },\n    image: {\n      insert: 'Insert image',\n      cancel: 'Cancel'\n    },\n    html: {\n      edit: 'Edit HTML'\n    },\n    colours: {\n      black: 'Black',\n      silver: 'Silver',\n      gray: 'Grey',\n      maroon: 'Maroon',\n      red: 'Red',\n      purple: 'Purple',\n      green: 'Green',\n      olive: 'Olive',\n      navy: 'Navy',\n      blue: 'Blue',\n      orange: 'Orange'\n    }\n  };\n}));\n"],"file":"bootstrap3-wysihtml5.all.js"}